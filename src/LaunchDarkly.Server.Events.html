<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">LaunchDarkly.Server.Events</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Concurrent.MVar</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MVar</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">modifyMVar</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">modifyMVar_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">newEmptyMVar</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">newMVar</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">putMVar</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">readMVar</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">swapMVar</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">tryTakeMVar</span></span><span class="hs-special">)</span><span>
</span><span id="line-4"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Lens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(%~)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(&amp;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-5"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">when</span></span><span class="hs-special">)</span><span>
</span><span id="line-6"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ToJSON</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Value</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">object</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">toJSON</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(.=)</span></span><span class="hs-special">)</span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Cache.LRU</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">LRU</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">newLRU</span></span><span class="hs-special">)</span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Cache.LRU</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LRU</span></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Generics.Product</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">field</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">getField</span></span><span class="hs-special">)</span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashSet</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HS</span></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromMaybe</span></span><span class="hs-special">)</span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Time.Clock.POSIX</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">getPOSIXTime</span></span><span class="hs-special">)</span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Exts</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromList</span></span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Generics</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Natural</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Natural</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">naturalFromInteger</span></span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="LaunchDarkly.AesonCompat.html"><span class="hs-identifier">LaunchDarkly.AesonCompat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="LaunchDarkly.AesonCompat.html#KeyMap"><span class="hs-identifier">KeyMap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.AesonCompat.html#insertKey"><span class="hs-identifier">insertKey</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.AesonCompat.html#keyMapUnion"><span class="hs-identifier">keyMapUnion</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.AesonCompat.html#lookupKey"><span class="hs-identifier">lookupKey</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.AesonCompat.html#objectValues"><span class="hs-identifier">objectValues</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Config.Internal.html"><span class="hs-identifier">LaunchDarkly.Server.Config.Internal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="LaunchDarkly.Server.Config.Internal.html#Config"><span class="hs-identifier">Config</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Config.Internal.html#shouldSendEvents"><span class="hs-identifier">shouldSendEvents</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Context.html"><span class="hs-identifier">LaunchDarkly.Server.Context</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="LaunchDarkly.Server.Context.Internal.html#Context"><span class="hs-identifier">Context</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Context.Internal.html"><span class="hs-identifier">LaunchDarkly.Server.Context.Internal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="LaunchDarkly.Server.Context.Internal.html#Context"><span class="hs-identifier">Context</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="LaunchDarkly.Server.Context.Internal.html#Invalid"><span class="hs-identifier">Invalid</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Context.Internal.html#getCanonicalKey"><span class="hs-identifier">getCanonicalKey</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Context.Internal.html#getKinds"><span class="hs-identifier">getKinds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Context.Internal.html#optionallyRedactAnonymous"><span class="hs-identifier">optionallyRedactAnonymous</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Context.Internal.html#redactContext"><span class="hs-identifier">redactContext</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Context.Internal.html#redactContextRedactAnonymous"><span class="hs-identifier">redactContextRedactAnonymous</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Details.html"><span class="hs-identifier">LaunchDarkly.Server.Details</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="LaunchDarkly.Server.Details.html#EvaluationReason"><span class="hs-identifier">EvaluationReason</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Features.html"><span class="hs-identifier">LaunchDarkly.Server.Features</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="LaunchDarkly.Server.Features.html#Flag"><span class="hs-identifier">Flag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span id="local-6989586621679669460"><span id="local-6989586621679669461"></span></span><span class="hs-keyword">data</span><span> </span><span id="EvalEvent"><span class="annot"><a href="LaunchDarkly.Server.Events.html#EvalEvent"><span class="hs-identifier hs-var">EvalEvent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="EvalEvent"><span class="annot"><a href="LaunchDarkly.Server.Events.html#EvalEvent"><span class="hs-identifier hs-var">EvalEvent</span></a></span></span><span>
</span><span id="line-27"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Akey%3AEvalEvent"><span class="annot"><span class="annottext">EvalEvent -&gt; Text
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Akey%3AEvalEvent"><span class="hs-identifier hs-var hs-var">key</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-28"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Acontext%3AEvalEvent"><span class="annot"><span class="annottext">EvalEvent -&gt; Context
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Acontext%3AEvalEvent"><span class="hs-identifier hs-var hs-var">context</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="LaunchDarkly.Server.Context.Internal.html#Context"><span class="hs-identifier hs-type">Context</span></a></span><span>
</span><span id="line-29"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Avariation%3AEvalEvent"><span class="annot"><span class="annottext">EvalEvent -&gt; Maybe Integer
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Avariation%3AEvalEvent"><span class="hs-identifier hs-var hs-var">variation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Avalue%3AEvalEvent"><span class="annot"><span class="annottext">EvalEvent -&gt; Value
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Avalue%3AEvalEvent"><span class="hs-identifier hs-var hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span>
</span><span id="line-31"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AdefaultValue%3AEvalEvent"><span class="annot"><span class="annottext">EvalEvent -&gt; Maybe Value
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AdefaultValue%3AEvalEvent"><span class="hs-identifier hs-var hs-var">defaultValue</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Aversion%3AEvalEvent"><span class="annot"><span class="annottext">EvalEvent -&gt; Maybe Natural
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Aversion%3AEvalEvent"><span class="hs-identifier hs-var hs-var">version</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AprereqOf%3AEvalEvent"><span class="annot"><span class="annottext">EvalEvent -&gt; Maybe Text
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AprereqOf%3AEvalEvent"><span class="hs-identifier hs-var hs-var">prereqOf</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Areason%3AEvalEvent"><span class="annot"><span class="annottext">EvalEvent -&gt; EvaluationReason
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Areason%3AEvalEvent"><span class="hs-identifier hs-var hs-var">reason</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="LaunchDarkly.Server.Details.html#EvaluationReason"><span class="hs-identifier hs-type">EvaluationReason</span></a></span><span>
</span><span id="line-35"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AtrackEvents%3AEvalEvent"><span class="annot"><span class="annottext">EvalEvent -&gt; Bool
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AtrackEvents%3AEvalEvent"><span class="hs-identifier hs-var hs-var">trackEvents</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-36"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AforceIncludeReason%3AEvalEvent"><span class="annot"><span class="annottext">EvalEvent -&gt; Bool
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AforceIncludeReason%3AEvalEvent"><span class="hs-identifier hs-var hs-var">forceIncludeReason</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-37"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Adebug%3AEvalEvent"><span class="annot"><span class="annottext">EvalEvent -&gt; Bool
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Adebug%3AEvalEvent"><span class="hs-identifier hs-var hs-var">debug</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-38"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AdebugEventsUntilDate%3AEvalEvent"><span class="annot"><span class="annottext">EvalEvent -&gt; Maybe Natural
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AdebugEventsUntilDate%3AEvalEvent"><span class="hs-identifier hs-var hs-var">debugEventsUntilDate</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-40"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. EvalEvent -&gt; Rep EvalEvent x)
-&gt; (forall x. Rep EvalEvent x -&gt; EvalEvent) -&gt; Generic EvalEvent
forall x. Rep EvalEvent x -&gt; EvalEvent
forall x. EvalEvent -&gt; Rep EvalEvent x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep EvalEvent x -&gt; EvalEvent
$cfrom :: forall x. EvalEvent -&gt; Rep EvalEvent x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679669440"><span id="local-6989586621679669442"><span class="annot"><span class="annottext">EvalEvent -&gt; EvalEvent -&gt; Bool
(EvalEvent -&gt; EvalEvent -&gt; Bool)
-&gt; (EvalEvent -&gt; EvalEvent -&gt; Bool) -&gt; Eq EvalEvent
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: EvalEvent -&gt; EvalEvent -&gt; Bool
$c/= :: EvalEvent -&gt; EvalEvent -&gt; Bool
== :: EvalEvent -&gt; EvalEvent -&gt; Bool
$c== :: EvalEvent -&gt; EvalEvent -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679669433"><span id="local-6989586621679669435"><span id="local-6989586621679669437"><span class="annot"><span class="annottext">Int -&gt; EvalEvent -&gt; ShowS
[EvalEvent] -&gt; ShowS
EvalEvent -&gt; String
(Int -&gt; EvalEvent -&gt; ShowS)
-&gt; (EvalEvent -&gt; String)
-&gt; ([EvalEvent] -&gt; ShowS)
-&gt; Show EvalEvent
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [EvalEvent] -&gt; ShowS
$cshowList :: [EvalEvent] -&gt; ShowS
show :: EvalEvent -&gt; String
$cshow :: EvalEvent -&gt; String
showsPrec :: Int -&gt; EvalEvent -&gt; ShowS
$cshowsPrec :: Int -&gt; EvalEvent -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span id="local-6989586621679669430"><span id="local-6989586621679669431"></span></span><span class="hs-keyword">data</span><span> </span><span id="EventState"><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventState"><span class="hs-identifier hs-var">EventState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="EventState"><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventState"><span class="hs-identifier hs-var">EventState</span></a></span></span><span>
</span><span id="line-43"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Aevents%3AEventState"><span class="annot"><span class="annottext">EventState -&gt; MVar [EventType]
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Aevents%3AEventState"><span class="hs-identifier hs-var hs-var">events</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MVar</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventType"><span class="hs-identifier hs-type">EventType</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AlastKnownServerTime%3AEventState"><span class="annot"><span class="annottext">EventState -&gt; MVar Integer
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AlastKnownServerTime%3AEventState"><span class="hs-identifier hs-var hs-var">lastKnownServerTime</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MVar</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Aflush%3AEventState"><span class="annot"><span class="annottext">EventState -&gt; MVar ()
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Aflush%3AEventState"><span class="hs-identifier hs-var hs-var">flush</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MVar</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Asummary%3AEventState"><span class="annot"><span class="annottext">EventState -&gt; MVar (KeyMap FlagSummaryContext)
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Asummary%3AEventState"><span class="hs-identifier hs-var hs-var">summary</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MVar</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="LaunchDarkly.AesonCompat.html#KeyMap"><span class="hs-identifier hs-type">KeyMap</span></a></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#FlagSummaryContext"><span class="hs-identifier hs-type">FlagSummaryContext</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AstartDate%3AEventState"><span class="annot"><span class="annottext">EventState -&gt; MVar Natural
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AstartDate%3AEventState"><span class="hs-identifier hs-var hs-var">startDate</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MVar</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AcontextKeyLRU%3AEventState"><span class="annot"><span class="annottext">EventState -&gt; MVar (LRU Text ())
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AcontextKeyLRU%3AEventState"><span class="hs-identifier hs-var hs-var">contextKeyLRU</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MVar</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LRU</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. EventState -&gt; Rep EventState x)
-&gt; (forall x. Rep EventState x -&gt; EventState) -&gt; Generic EventState
forall x. Rep EventState x -&gt; EventState
forall x. EventState -&gt; Rep EventState x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep EventState x -&gt; EventState
$cfrom :: forall x. EventState -&gt; Rep EventState x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="annot"><a href="LaunchDarkly.Server.Events.html#makeEventState"><span class="hs-identifier hs-type">makeEventState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Config.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventState"><span class="hs-identifier hs-type">EventState</span></a></span><span>
</span><span id="line-53"></span><span id="makeEventState"><span class="annot"><span class="annottext">makeEventState :: Config -&gt; IO EventState
</span><a href="LaunchDarkly.Server.Events.html#makeEventState"><span class="hs-identifier hs-var hs-var">makeEventState</span></a></span></span><span> </span><span id="local-6989586621679669419"><span class="annot"><span class="annottext">config :: Config
</span><a href="#local-6989586621679669419"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-54"></span><span>    </span><span id="local-6989586621679669418"><span class="annot"><span class="annottext">MVar [EventType]
</span><a href="#local-6989586621679669418"><span class="hs-identifier hs-var">events</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[EventType] -&gt; IO (MVar [EventType])
forall a. a -&gt; IO (MVar a)
</span><span class="hs-identifier hs-var">newMVar</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-55"></span><span>    </span><span id="local-6989586621679669417"><span class="annot"><span class="annottext">MVar Integer
</span><a href="#local-6989586621679669417"><span class="hs-identifier hs-var">lastKnownServerTime</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; IO (MVar Integer)
forall a. a -&gt; IO (MVar a)
</span><span class="hs-identifier hs-var">newMVar</span></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span>
</span><span id="line-56"></span><span>    </span><span id="local-6989586621679669416"><span class="annot"><span class="annottext">MVar ()
</span><a href="#local-6989586621679669416"><span class="hs-identifier hs-var">flush</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (MVar ())
forall a. IO (MVar a)
</span><span class="hs-identifier hs-var">newEmptyMVar</span></span><span>
</span><span id="line-57"></span><span>    </span><span id="local-6989586621679669415"><span class="annot"><span class="annottext">MVar (KeyMap FlagSummaryContext)
</span><a href="#local-6989586621679669415"><span class="hs-identifier hs-var">summary</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">KeyMap FlagSummaryContext -&gt; IO (MVar (KeyMap FlagSummaryContext))
forall a. a -&gt; IO (MVar a)
</span><span class="hs-identifier hs-var">newMVar</span></span><span> </span><span class="annot"><span class="annottext">KeyMap FlagSummaryContext
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-58"></span><span>    </span><span id="local-6989586621679669414"><span class="annot"><span class="annottext">MVar Natural
</span><a href="#local-6989586621679669414"><span class="hs-identifier hs-var">startDate</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (MVar Natural)
forall a. IO (MVar a)
</span><span class="hs-identifier hs-var">newEmptyMVar</span></span><span>
</span><span id="line-59"></span><span>    </span><span id="local-6989586621679669413"><span class="annot"><span class="annottext">MVar (LRU Text ())
</span><a href="#local-6989586621679669413"><span class="hs-identifier hs-var">contextKeyLRU</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LRU Text () -&gt; IO (MVar (LRU Text ()))
forall a. a -&gt; IO (MVar a)
</span><span class="hs-identifier hs-var">newMVar</span></span><span> </span><span class="annot"><span class="annottext">(LRU Text () -&gt; IO (MVar (LRU Text ())))
-&gt; LRU Text () -&gt; IO (MVar (LRU Text ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe Integer -&gt; LRU Text ()
forall key val. Ord key =&gt; Maybe Integer -&gt; LRU key val
</span><span class="hs-identifier hs-var">newLRU</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Integer -&gt; LRU Text ()) -&gt; Maybe Integer -&gt; LRU Text ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Maybe Integer
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Maybe Integer) -&gt; Integer -&gt; Maybe Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; Integer) -&gt; Natural -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Config -&gt; Natural
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;contextKeyLRUCapacity&quot;</span></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679669419"><span class="hs-identifier hs-var">config</span></a></span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><span class="annottext">EventState -&gt; IO EventState
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">$WEventState :: MVar [EventType]
-&gt; MVar Integer
-&gt; MVar ()
-&gt; MVar (KeyMap FlagSummaryContext)
-&gt; MVar Natural
-&gt; MVar (LRU Text ())
-&gt; EventState
</span><a href="LaunchDarkly.Server.Events.html#%24WEventState"><span class="hs-identifier hs-type hs-type">EventState</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span class="annot"><a href="LaunchDarkly.Server.Events.html#queueEvent"><span class="hs-identifier hs-type">queueEvent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Config.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventState"><span class="hs-identifier hs-type">EventState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventType"><span class="hs-identifier hs-type">EventType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span id="queueEvent"><span class="annot"><span class="annottext">queueEvent :: Config -&gt; EventState -&gt; EventType -&gt; IO ()
</span><a href="LaunchDarkly.Server.Events.html#queueEvent"><span class="hs-identifier hs-var hs-var">queueEvent</span></a></span></span><span> </span><span id="local-6989586621679669410"><span class="annot"><span class="annottext">config :: Config
</span><a href="#local-6989586621679669410"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span id="local-6989586621679669409"><span class="annot"><span class="annottext">state :: EventState
</span><a href="#local-6989586621679669409"><span class="hs-identifier hs-var">state</span></a></span></span><span> </span><span id="local-6989586621679669408"><span class="annot"><span class="annottext">event :: EventType
</span><a href="#local-6989586621679669408"><span class="hs-identifier hs-var">event</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-64"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Config -&gt; Bool
</span><a href="LaunchDarkly.Server.Config.Internal.html#shouldSendEvents"><span class="hs-identifier hs-var">shouldSendEvents</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679669410"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">MVar [EventType] -&gt; ([EventType] -&gt; IO [EventType]) -&gt; IO ()
forall a. MVar a -&gt; (a -&gt; IO a) -&gt; IO ()
</span><span class="hs-identifier hs-var">modifyMVar_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EventState -&gt; MVar [EventType]
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;events&quot;</span></span><span> </span><span class="annot"><span class="annottext">EventState
</span><a href="#local-6989586621679669409"><span class="hs-identifier hs-var">state</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(([EventType] -&gt; IO [EventType]) -&gt; IO ())
-&gt; ([EventType] -&gt; IO [EventType]) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679669406"><span class="annot"><span class="annottext">events :: [EventType]
</span><a href="#local-6989586621679669406"><span class="hs-identifier hs-var">events</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-67"></span><span>            </span><span class="annot"><span class="annottext">[EventType] -&gt; IO [EventType]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">([EventType] -&gt; IO [EventType]) -&gt; [EventType] -&gt; IO [EventType]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">EventType
</span><a href="#local-6989586621679669408"><span class="hs-identifier hs-var">event</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-68"></span><span>                </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventTypeSummary"><span class="hs-identifier hs-type">EventTypeSummary</span></a></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EventType
</span><a href="#local-6989586621679669408"><span class="hs-identifier hs-var">event</span></a></span><span> </span><span class="annot"><span class="annottext">EventType -&gt; [EventType] -&gt; [EventType]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[EventType]
</span><a href="#local-6989586621679669406"><span class="hs-identifier hs-var">events</span></a></span><span>
</span><span id="line-69"></span><span>                </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[EventType] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[EventType]
</span><a href="#local-6989586621679669406"><span class="hs-identifier hs-var">events</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Config -&gt; Natural
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;eventsCapacity&quot;</span></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679669410"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EventType
</span><a href="#local-6989586621679669408"><span class="hs-identifier hs-var">event</span></a></span><span> </span><span class="annot"><span class="annottext">EventType -&gt; [EventType] -&gt; [EventType]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[EventType]
</span><a href="#local-6989586621679669406"><span class="hs-identifier hs-var">events</span></a></span><span>
</span><span id="line-70"></span><span>                </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[EventType]
</span><a href="#local-6989586621679669406"><span class="hs-identifier hs-var">events</span></a></span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="annot"><a href="LaunchDarkly.Server.Events.html#unixMilliseconds"><span class="hs-identifier hs-type">unixMilliseconds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span>
</span><span id="line-73"></span><span id="unixMilliseconds"><span class="annot"><span class="annottext">unixMilliseconds :: IO Natural
</span><a href="LaunchDarkly.Server.Events.html#unixMilliseconds"><span class="hs-identifier hs-var hs-var">unixMilliseconds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">POSIXTime -&gt; Natural
forall a b. (RealFrac a, Integral b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">round</span></span><span> </span><span class="annot"><span class="annottext">(POSIXTime -&gt; Natural)
-&gt; (POSIXTime -&gt; POSIXTime) -&gt; POSIXTime -&gt; Natural
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">POSIXTime -&gt; POSIXTime -&gt; POSIXTime
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="hs-number">1000</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(POSIXTime -&gt; Natural) -&gt; IO POSIXTime -&gt; IO Natural
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">IO POSIXTime
</span><span class="hs-identifier hs-var">getPOSIXTime</span></span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span id="local-6989586621679669397"><span class="annot"><a href="LaunchDarkly.Server.Events.html#makeBaseEvent"><span class="hs-identifier hs-type">makeBaseEvent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679669397"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="LaunchDarkly.Server.Events.html#BaseEvent"><span class="hs-identifier hs-type">BaseEvent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679669397"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-76"></span><span id="makeBaseEvent"><span class="annot"><span class="annottext">makeBaseEvent :: a -&gt; IO (BaseEvent a)
</span><a href="LaunchDarkly.Server.Events.html#makeBaseEvent"><span class="hs-identifier hs-var hs-var">makeBaseEvent</span></a></span></span><span> </span><span id="local-6989586621679669395"><span class="annot"><span class="annottext">child :: a
</span><a href="#local-6989586621679669395"><span class="hs-identifier hs-var">child</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO Natural
</span><a href="LaunchDarkly.Server.Events.html#unixMilliseconds"><span class="hs-identifier hs-var">unixMilliseconds</span></a></span><span> </span><span class="annot"><span class="annottext">IO Natural -&gt; (Natural -&gt; IO (BaseEvent a)) -&gt; IO (BaseEvent a)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679669394"><span class="annot"><span class="annottext">now :: Natural
</span><a href="#local-6989586621679669394"><span class="hs-identifier hs-var">now</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BaseEvent a -&gt; IO (BaseEvent a)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(BaseEvent a -&gt; IO (BaseEvent a))
-&gt; BaseEvent a -&gt; IO (BaseEvent a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BaseEvent :: forall event. Natural -&gt; event -&gt; BaseEvent event
</span><a href="LaunchDarkly.Server.Events.html#BaseEvent"><span class="hs-identifier hs-type hs-type">BaseEvent</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:creationDate:BaseEvent :: Natural
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AcreationDate%3ABaseEvent"><span class="hs-identifier hs-var">creationDate</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679669394"><span class="hs-identifier hs-var">now</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:event:BaseEvent :: a
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Aevent%3ABaseEvent"><span class="hs-identifier hs-var">event</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679669395"><span class="hs-identifier hs-var">child</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span class="annot"><a href="LaunchDarkly.Server.Events.html#processSummary"><span class="hs-identifier hs-type">processSummary</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Config.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventState"><span class="hs-identifier hs-type">EventState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span id="processSummary"><span class="annot"><span class="annottext">processSummary :: Config -&gt; EventState -&gt; IO ()
</span><a href="LaunchDarkly.Server.Events.html#processSummary"><span class="hs-identifier hs-var hs-var">processSummary</span></a></span></span><span> </span><span id="local-6989586621679669388"><span class="annot"><span class="annottext">config :: Config
</span><a href="#local-6989586621679669388"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span id="local-6989586621679669387"><span class="annot"><span class="annottext">state :: EventState
</span><a href="#local-6989586621679669387"><span class="hs-identifier hs-var">state</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-80"></span><span>    </span><span class="annot"><span class="annottext">MVar Natural -&gt; IO (Maybe Natural)
forall a. MVar a -&gt; IO (Maybe a)
</span><span class="hs-identifier hs-var">tryTakeMVar</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EventState -&gt; MVar Natural
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;startDate&quot;</span></span><span> </span><span class="annot"><span class="annottext">EventState
</span><a href="#local-6989586621679669387"><span class="hs-identifier hs-var">state</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IO (Maybe Natural) -&gt; (Maybe Natural -&gt; IO ()) -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-81"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679669386"><span class="annot"><span class="annottext">startDate :: Natural
</span><a href="#local-6989586621679669386"><span class="hs-identifier hs-var">startDate</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-83"></span><span>            </span><span id="local-6989586621679669385"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679669385"><span class="hs-identifier hs-var">endDate</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Natural
</span><a href="LaunchDarkly.Server.Events.html#unixMilliseconds"><span class="hs-identifier hs-var">unixMilliseconds</span></a></span><span>
</span><span id="line-84"></span><span>            </span><span id="local-6989586621679669384"><span class="annot"><span class="annottext">KeyMap FlagSummaryContext
</span><a href="#local-6989586621679669384"><span class="hs-identifier hs-var">features</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MVar (KeyMap FlagSummaryContext)
-&gt; KeyMap FlagSummaryContext -&gt; IO (KeyMap FlagSummaryContext)
forall a. MVar a -&gt; a -&gt; IO a
</span><span class="hs-identifier hs-var">swapMVar</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EventState -&gt; MVar (KeyMap FlagSummaryContext)
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;summary&quot;</span></span><span> </span><span class="annot"><span class="annottext">EventState
</span><a href="#local-6989586621679669387"><span class="hs-identifier hs-var">state</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">KeyMap FlagSummaryContext
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-85"></span><span>            </span><span class="annot"><span class="annottext">Config -&gt; EventState -&gt; EventType -&gt; IO ()
</span><a href="LaunchDarkly.Server.Events.html#queueEvent"><span class="hs-identifier hs-var">queueEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679669388"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">EventState
</span><a href="#local-6989586621679669387"><span class="hs-identifier hs-var">state</span></a></span><span> </span><span class="annot"><span class="annottext">(EventType -&gt; IO ()) -&gt; EventType -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SummaryEvent -&gt; EventType
</span><a href="LaunchDarkly.Server.Events.html#EventTypeSummary"><span class="hs-identifier hs-var">EventTypeSummary</span></a></span><span> </span><span class="annot"><span class="annottext">(SummaryEvent -&gt; EventType) -&gt; SummaryEvent -&gt; EventType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">$WSummaryEvent :: Natural -&gt; Natural -&gt; KeyMap FlagSummaryContext -&gt; SummaryEvent
</span><a href="LaunchDarkly.Server.Events.html#%24WSummaryEvent"><span class="hs-identifier hs-type hs-type">SummaryEvent</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="hs-keyword">class</span><span> </span><span id="EventKind"><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventKind"><span class="hs-identifier hs-var">EventKind</span></a></span></span><span> </span><span id="local-6989586621679669580"><span class="annot"><a href="#local-6989586621679669580"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-88"></span><span>    </span><span id="eventKind"><span class="annot"><a href="LaunchDarkly.Server.Events.html#eventKind"><span class="hs-identifier hs-type">eventKind</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679669580"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span id="local-6989586621679669376"><span id="local-6989586621679669377"></span></span><span class="hs-keyword">data</span><span> </span><span id="SummaryEvent"><span class="annot"><a href="LaunchDarkly.Server.Events.html#SummaryEvent"><span class="hs-identifier hs-var">SummaryEvent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SummaryEvent"><span class="annot"><a href="LaunchDarkly.Server.Events.html#SummaryEvent"><span class="hs-identifier hs-var">SummaryEvent</span></a></span></span><span>
</span><span id="line-91"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AstartDate%3ASummaryEvent"><span class="annot"><span class="annottext">SummaryEvent -&gt; Natural
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AstartDate%3ASummaryEvent"><span class="hs-identifier hs-var hs-var">startDate</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span>
</span><span id="line-92"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AendDate%3ASummaryEvent"><span class="annot"><span class="annottext">SummaryEvent -&gt; Natural
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AendDate%3ASummaryEvent"><span class="hs-identifier hs-var hs-var">endDate</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span>
</span><span id="line-93"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Afeatures%3ASummaryEvent"><span class="annot"><span class="annottext">SummaryEvent -&gt; KeyMap FlagSummaryContext
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Afeatures%3ASummaryEvent"><span class="hs-identifier hs-var hs-var">features</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="LaunchDarkly.AesonCompat.html#KeyMap"><span class="hs-identifier hs-type">KeyMap</span></a></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#FlagSummaryContext"><span class="hs-identifier hs-type">FlagSummaryContext</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-95"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. SummaryEvent -&gt; Rep SummaryEvent x)
-&gt; (forall x. Rep SummaryEvent x -&gt; SummaryEvent)
-&gt; Generic SummaryEvent
forall x. Rep SummaryEvent x -&gt; SummaryEvent
forall x. SummaryEvent -&gt; Rep SummaryEvent x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep SummaryEvent x -&gt; SummaryEvent
$cfrom :: forall x. SummaryEvent -&gt; Rep SummaryEvent x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679669368"><span id="local-6989586621679669370"><span id="local-6989586621679669372"><span class="annot"><span class="annottext">Int -&gt; SummaryEvent -&gt; ShowS
[SummaryEvent] -&gt; ShowS
SummaryEvent -&gt; String
(Int -&gt; SummaryEvent -&gt; ShowS)
-&gt; (SummaryEvent -&gt; String)
-&gt; ([SummaryEvent] -&gt; ShowS)
-&gt; Show SummaryEvent
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [SummaryEvent] -&gt; ShowS
$cshowList :: [SummaryEvent] -&gt; ShowS
show :: SummaryEvent -&gt; String
$cshow :: SummaryEvent -&gt; String
showsPrec :: Int -&gt; SummaryEvent -&gt; ShowS
$cshowsPrec :: Int -&gt; SummaryEvent -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679669360"><span id="local-6989586621679669362"><span id="local-6989586621679669364"><span id="local-6989586621679669366"><span class="annot"><span class="annottext">[SummaryEvent] -&gt; Encoding
[SummaryEvent] -&gt; Value
SummaryEvent -&gt; Encoding
SummaryEvent -&gt; Value
(SummaryEvent -&gt; Value)
-&gt; (SummaryEvent -&gt; Encoding)
-&gt; ([SummaryEvent] -&gt; Value)
-&gt; ([SummaryEvent] -&gt; Encoding)
-&gt; ToJSON SummaryEvent
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [SummaryEvent] -&gt; Encoding
$ctoEncodingList :: [SummaryEvent] -&gt; Encoding
toJSONList :: [SummaryEvent] -&gt; Value
$ctoJSONList :: [SummaryEvent] -&gt; Value
toEncoding :: SummaryEvent -&gt; Encoding
$ctoEncoding :: SummaryEvent -&gt; Encoding
toJSON :: SummaryEvent -&gt; Value
$ctoJSON :: SummaryEvent -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventKind"><span class="hs-identifier hs-type">EventKind</span></a></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#SummaryEvent"><span class="hs-identifier hs-type">SummaryEvent</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-98"></span><span>    </span><span id="local-6989586621679669356"><span class="annot"><span class="annottext">eventKind :: SummaryEvent -&gt; Text
</span><a href="#local-6989586621679669356"><span class="hs-identifier hs-var hs-var hs-var hs-var">eventKind</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;summary&quot;</span></span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span id="local-6989586621679669354"><span id="local-6989586621679669355"></span></span><span class="hs-keyword">data</span><span> </span><span id="FlagSummaryContext"><span class="annot"><a href="LaunchDarkly.Server.Events.html#FlagSummaryContext"><span class="hs-identifier hs-var">FlagSummaryContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="FlagSummaryContext"><span class="annot"><a href="LaunchDarkly.Server.Events.html#FlagSummaryContext"><span class="hs-identifier hs-var">FlagSummaryContext</span></a></span></span><span>
</span><span id="line-101"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AdefaultValue%3AFlagSummaryContext"><span class="annot"><span class="annottext">FlagSummaryContext -&gt; Maybe Value
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AdefaultValue%3AFlagSummaryContext"><span class="hs-identifier hs-var hs-var">defaultValue</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span>
</span><span id="line-102"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Acounters%3AFlagSummaryContext"><span class="annot"><span class="annottext">FlagSummaryContext -&gt; KeyMap CounterContext
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Acounters%3AFlagSummaryContext"><span class="hs-identifier hs-var hs-var">counters</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="LaunchDarkly.AesonCompat.html#KeyMap"><span class="hs-identifier hs-type">KeyMap</span></a></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#CounterContext"><span class="hs-identifier hs-type">CounterContext</span></a></span><span>
</span><span id="line-103"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AcontextKinds%3AFlagSummaryContext"><span class="annot"><span class="annottext">FlagSummaryContext -&gt; HashSet Text
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AcontextKinds%3AFlagSummaryContext"><span class="hs-identifier hs-var hs-var">contextKinds</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HS.HashSet</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-104"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. FlagSummaryContext -&gt; Rep FlagSummaryContext x)
-&gt; (forall x. Rep FlagSummaryContext x -&gt; FlagSummaryContext)
-&gt; Generic FlagSummaryContext
forall x. Rep FlagSummaryContext x -&gt; FlagSummaryContext
forall x. FlagSummaryContext -&gt; Rep FlagSummaryContext x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep FlagSummaryContext x -&gt; FlagSummaryContext
$cfrom :: forall x. FlagSummaryContext -&gt; Rep FlagSummaryContext x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679669342"><span id="local-6989586621679669344"><span id="local-6989586621679669346"><span class="annot"><span class="annottext">Int -&gt; FlagSummaryContext -&gt; ShowS
[FlagSummaryContext] -&gt; ShowS
FlagSummaryContext -&gt; String
(Int -&gt; FlagSummaryContext -&gt; ShowS)
-&gt; (FlagSummaryContext -&gt; String)
-&gt; ([FlagSummaryContext] -&gt; ShowS)
-&gt; Show FlagSummaryContext
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [FlagSummaryContext] -&gt; ShowS
$cshowList :: [FlagSummaryContext] -&gt; ShowS
show :: FlagSummaryContext -&gt; String
$cshow :: FlagSummaryContext -&gt; String
showsPrec :: Int -&gt; FlagSummaryContext -&gt; ShowS
$cshowsPrec :: Int -&gt; FlagSummaryContext -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-106"></span><span>
</span><span id="line-107"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679669335"><span id="local-6989586621679669337"><span id="local-6989586621679669339"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#FlagSummaryContext"><span class="hs-identifier hs-type">FlagSummaryContext</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-108"></span><span>    </span><span id="local-6989586621679669334"><span class="annot"><span class="annottext">toJSON :: FlagSummaryContext -&gt; Value
</span><a href="#local-6989586621679669334"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span id="local-6989586621679669333"><span class="annot"><span class="annottext">ctx :: FlagSummaryContext
</span><a href="#local-6989586621679669333"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-109"></span><span>        </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="annot"><span class="annottext">([Pair] -&gt; Value) -&gt; [Pair] -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-110"></span><span>            </span><span class="annot"><span class="annottext">(Pair -&gt; Bool) -&gt; [Pair] -&gt; [Pair]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span>
</span><span id="line-111"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; Value -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">(/=)</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier hs-var">Null</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Bool) -&gt; (Pair -&gt; Value) -&gt; Pair -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pair -&gt; Value
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span>
</span><span id="line-112"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;default&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Value -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Value -&gt; Value) -&gt; Maybe Value -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FlagSummaryContext -&gt; Maybe Value
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;defaultValue&quot;</span></span><span> </span><span class="annot"><span class="annottext">FlagSummaryContext
</span><a href="#local-6989586621679669333"><span class="hs-identifier hs-var">ctx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;counters&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[CounterContext] -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">([CounterContext] -&gt; Value) -&gt; [CounterContext] -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">KeyMap CounterContext -&gt; [CounterContext]
forall v. HashMap Text v -&gt; [v]
</span><a href="LaunchDarkly.AesonCompat.html#objectValues"><span class="hs-identifier hs-var">objectValues</span></a></span><span> </span><span class="annot"><span class="annottext">(KeyMap CounterContext -&gt; [CounterContext])
-&gt; KeyMap CounterContext -&gt; [CounterContext]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FlagSummaryContext -&gt; KeyMap CounterContext
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;counters&quot;</span></span><span> </span><span class="annot"><span class="annottext">FlagSummaryContext
</span><a href="#local-6989586621679669333"><span class="hs-identifier hs-var">ctx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;contextKinds&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HashSet Text -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">(HashSet Text -&gt; Value) -&gt; HashSet Text -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FlagSummaryContext -&gt; HashSet Text
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;contextKinds&quot;</span></span><span> </span><span class="annot"><span class="annottext">FlagSummaryContext
</span><a href="#local-6989586621679669333"><span class="hs-identifier hs-var">ctx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span id="local-6989586621679669329"><span id="local-6989586621679669330"></span></span><span class="hs-keyword">data</span><span> </span><span id="CounterContext"><span class="annot"><a href="LaunchDarkly.Server.Events.html#CounterContext"><span class="hs-identifier hs-var">CounterContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CounterContext"><span class="annot"><a href="LaunchDarkly.Server.Events.html#CounterContext"><span class="hs-identifier hs-var">CounterContext</span></a></span></span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Acount%3ACounterContext"><span class="annot"><span class="annottext">CounterContext -&gt; Natural
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Acount%3ACounterContext"><span class="hs-identifier hs-var hs-var">count</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Aversion%3ACounterContext"><span class="annot"><span class="annottext">CounterContext -&gt; Maybe Natural
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Aversion%3ACounterContext"><span class="hs-identifier hs-var hs-var">version</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Avariation%3ACounterContext"><span class="annot"><span class="annottext">CounterContext -&gt; Maybe Integer
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Avariation%3ACounterContext"><span class="hs-identifier hs-var hs-var">variation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Avalue%3ACounterContext"><span class="annot"><span class="annottext">CounterContext -&gt; Value
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Avalue%3ACounterContext"><span class="hs-identifier hs-var hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span>
</span><span id="line-122"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Aunknown%3ACounterContext"><span class="annot"><span class="annottext">CounterContext -&gt; Bool
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Aunknown%3ACounterContext"><span class="hs-identifier hs-var hs-var">unknown</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-123"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-124"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. CounterContext -&gt; Rep CounterContext x)
-&gt; (forall x. Rep CounterContext x -&gt; CounterContext)
-&gt; Generic CounterContext
forall x. Rep CounterContext x -&gt; CounterContext
forall x. CounterContext -&gt; Rep CounterContext x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep CounterContext x -&gt; CounterContext
$cfrom :: forall x. CounterContext -&gt; Rep CounterContext x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679669315"><span id="local-6989586621679669317"><span id="local-6989586621679669319"><span class="annot"><span class="annottext">Int -&gt; CounterContext -&gt; ShowS
[CounterContext] -&gt; ShowS
CounterContext -&gt; String
(Int -&gt; CounterContext -&gt; ShowS)
-&gt; (CounterContext -&gt; String)
-&gt; ([CounterContext] -&gt; ShowS)
-&gt; Show CounterContext
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [CounterContext] -&gt; ShowS
$cshowList :: [CounterContext] -&gt; ShowS
show :: CounterContext -&gt; String
$cshow :: CounterContext -&gt; String
showsPrec :: Int -&gt; CounterContext -&gt; ShowS
$cshowsPrec :: Int -&gt; CounterContext -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679669308"><span id="local-6989586621679669310"><span id="local-6989586621679669312"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#CounterContext"><span class="hs-identifier hs-type">CounterContext</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-127"></span><span>    </span><span id="local-6989586621679669307"><span class="annot"><span class="annottext">toJSON :: CounterContext -&gt; Value
</span><a href="#local-6989586621679669307"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span id="local-6989586621679669306"><span class="annot"><span class="annottext">context :: CounterContext
</span><a href="#local-6989586621679669306"><span class="hs-identifier hs-var">context</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-128"></span><span>        </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="annot"><span class="annottext">([Pair] -&gt; Value) -&gt; [Pair] -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-129"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-string">&quot;count&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Natural -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">CounterContext -&gt; Natural
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;count&quot;</span></span><span> </span><span class="annot"><span class="annottext">CounterContext
</span><a href="#local-6989586621679669306"><span class="hs-identifier hs-var">context</span></a></span><span>
</span><span id="line-130"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;value&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">CounterContext -&gt; Value
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;value&quot;</span></span><span> </span><span class="annot"><span class="annottext">CounterContext
</span><a href="#local-6989586621679669306"><span class="hs-identifier hs-var">context</span></a></span><span>
</span><span id="line-131"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-132"></span><span>                </span><span class="annot"><span class="annottext">[Pair] -&gt; [Pair] -&gt; [Pair]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Pair -&gt; Bool) -&gt; [Pair] -&gt; [Pair]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span>
</span><span id="line-133"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; Value -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">(/=)</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier hs-var">Null</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Bool) -&gt; (Pair -&gt; Value) -&gt; Pair -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pair -&gt; Value
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>                    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-string">&quot;version&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Natural -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">CounterContext -&gt; Maybe Natural
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;version&quot;</span></span><span> </span><span class="annot"><span class="annottext">CounterContext
</span><a href="#local-6989586621679669306"><span class="hs-identifier hs-var">context</span></a></span><span>
</span><span id="line-135"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;variation&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Integer -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">CounterContext -&gt; Maybe Integer
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;variation&quot;</span></span><span> </span><span class="annot"><span class="annottext">CounterContext
</span><a href="#local-6989586621679669306"><span class="hs-identifier hs-var">context</span></a></span><span>
</span><span id="line-136"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;unknown&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Bool -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">CounterContext -&gt; Bool
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;unknown&quot;</span></span><span> </span><span class="annot"><span class="annottext">CounterContext
</span><a href="#local-6989586621679669306"><span class="hs-identifier hs-var">context</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Maybe Bool
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-137"></span><span>                    </span><span class="hs-special">]</span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span id="local-6989586621679669304"><span id="local-6989586621679669305"></span></span><span class="hs-keyword">data</span><span> </span><span id="IdentifyEvent"><span class="annot"><a href="LaunchDarkly.Server.Events.html#IdentifyEvent"><span class="hs-identifier hs-var">IdentifyEvent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="IdentifyEvent"><span class="annot"><a href="LaunchDarkly.Server.Events.html#IdentifyEvent"><span class="hs-identifier hs-var">IdentifyEvent</span></a></span></span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Akey%3AIdentifyEvent"><span class="annot"><span class="annottext">IdentifyEvent -&gt; Text
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Akey%3AIdentifyEvent"><span class="hs-identifier hs-var hs-var">key</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-141"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Acontext%3AIdentifyEvent"><span class="annot"><span class="annottext">IdentifyEvent -&gt; Value
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Acontext%3AIdentifyEvent"><span class="hs-identifier hs-var hs-var">context</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span>
</span><span id="line-142"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-143"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. IdentifyEvent -&gt; Rep IdentifyEvent x)
-&gt; (forall x. Rep IdentifyEvent x -&gt; IdentifyEvent)
-&gt; Generic IdentifyEvent
forall x. Rep IdentifyEvent x -&gt; IdentifyEvent
forall x. IdentifyEvent -&gt; Rep IdentifyEvent x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep IdentifyEvent x -&gt; IdentifyEvent
$cfrom :: forall x. IdentifyEvent -&gt; Rep IdentifyEvent x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679669291"><span id="local-6989586621679669293"><span id="local-6989586621679669295"><span id="local-6989586621679669297"><span class="annot"><span class="annottext">[IdentifyEvent] -&gt; Encoding
[IdentifyEvent] -&gt; Value
IdentifyEvent -&gt; Encoding
IdentifyEvent -&gt; Value
(IdentifyEvent -&gt; Value)
-&gt; (IdentifyEvent -&gt; Encoding)
-&gt; ([IdentifyEvent] -&gt; Value)
-&gt; ([IdentifyEvent] -&gt; Encoding)
-&gt; ToJSON IdentifyEvent
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [IdentifyEvent] -&gt; Encoding
$ctoEncodingList :: [IdentifyEvent] -&gt; Encoding
toJSONList :: [IdentifyEvent] -&gt; Value
$ctoJSONList :: [IdentifyEvent] -&gt; Value
toEncoding :: IdentifyEvent -&gt; Encoding
$ctoEncoding :: IdentifyEvent -&gt; Encoding
toJSON :: IdentifyEvent -&gt; Value
$ctoJSON :: IdentifyEvent -&gt; Value
</span><a href="#local-6989586621679669291"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679669285"><span id="local-6989586621679669287"><span id="local-6989586621679669289"><span class="annot"><span class="annottext">Int -&gt; IdentifyEvent -&gt; ShowS
[IdentifyEvent] -&gt; ShowS
IdentifyEvent -&gt; String
(Int -&gt; IdentifyEvent -&gt; ShowS)
-&gt; (IdentifyEvent -&gt; String)
-&gt; ([IdentifyEvent] -&gt; ShowS)
-&gt; Show IdentifyEvent
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [IdentifyEvent] -&gt; ShowS
$cshowList :: [IdentifyEvent] -&gt; ShowS
show :: IdentifyEvent -&gt; String
$cshow :: IdentifyEvent -&gt; String
showsPrec :: Int -&gt; IdentifyEvent -&gt; ShowS
$cshowsPrec :: Int -&gt; IdentifyEvent -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventKind"><span class="hs-identifier hs-type">EventKind</span></a></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#IdentifyEvent"><span class="hs-identifier hs-type">IdentifyEvent</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-146"></span><span>    </span><span id="local-6989586621679669283"><span class="annot"><span class="annottext">eventKind :: IdentifyEvent -&gt; Text
</span><a href="#local-6989586621679669283"><span class="hs-identifier hs-var hs-var hs-var hs-var">eventKind</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;identify&quot;</span></span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span id="local-6989586621679669281"><span id="local-6989586621679669282"></span></span><span class="hs-keyword">data</span><span> </span><span id="IndexEvent"><span class="annot"><a href="LaunchDarkly.Server.Events.html#IndexEvent"><span class="hs-identifier hs-var">IndexEvent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="IndexEvent"><span class="annot"><a href="LaunchDarkly.Server.Events.html#IndexEvent"><span class="hs-identifier hs-var">IndexEvent</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3Acontext%3AIndexEvent"><span class="annot"><span class="annottext">IndexEvent -&gt; Value
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Acontext%3AIndexEvent"><span class="hs-identifier hs-var hs-var">context</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. IndexEvent -&gt; Rep IndexEvent x)
-&gt; (forall x. Rep IndexEvent x -&gt; IndexEvent) -&gt; Generic IndexEvent
forall x. Rep IndexEvent x -&gt; IndexEvent
forall x. IndexEvent -&gt; Rep IndexEvent x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep IndexEvent x -&gt; IndexEvent
$cfrom :: forall x. IndexEvent -&gt; Rep IndexEvent x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679669269"><span id="local-6989586621679669271"><span id="local-6989586621679669273"><span id="local-6989586621679669275"><span class="annot"><span class="annottext">[IndexEvent] -&gt; Encoding
[IndexEvent] -&gt; Value
IndexEvent -&gt; Encoding
IndexEvent -&gt; Value
(IndexEvent -&gt; Value)
-&gt; (IndexEvent -&gt; Encoding)
-&gt; ([IndexEvent] -&gt; Value)
-&gt; ([IndexEvent] -&gt; Encoding)
-&gt; ToJSON IndexEvent
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [IndexEvent] -&gt; Encoding
$ctoEncodingList :: [IndexEvent] -&gt; Encoding
toJSONList :: [IndexEvent] -&gt; Value
$ctoJSONList :: [IndexEvent] -&gt; Value
toEncoding :: IndexEvent -&gt; Encoding
$ctoEncoding :: IndexEvent -&gt; Encoding
toJSON :: IndexEvent -&gt; Value
$ctoJSON :: IndexEvent -&gt; Value
</span><a href="#local-6989586621679669269"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679669263"><span id="local-6989586621679669265"><span id="local-6989586621679669267"><span class="annot"><span class="annottext">Int -&gt; IndexEvent -&gt; ShowS
[IndexEvent] -&gt; ShowS
IndexEvent -&gt; String
(Int -&gt; IndexEvent -&gt; ShowS)
-&gt; (IndexEvent -&gt; String)
-&gt; ([IndexEvent] -&gt; ShowS)
-&gt; Show IndexEvent
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [IndexEvent] -&gt; ShowS
$cshowList :: [IndexEvent] -&gt; ShowS
show :: IndexEvent -&gt; String
$cshow :: IndexEvent -&gt; String
showsPrec :: Int -&gt; IndexEvent -&gt; ShowS
$cshowsPrec :: Int -&gt; IndexEvent -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventKind"><span class="hs-identifier hs-type">EventKind</span></a></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#IndexEvent"><span class="hs-identifier hs-type">IndexEvent</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-151"></span><span>    </span><span id="local-6989586621679669261"><span class="annot"><span class="annottext">eventKind :: IndexEvent -&gt; Text
</span><a href="#local-6989586621679669261"><span class="hs-identifier hs-var hs-var hs-var hs-var">eventKind</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;index&quot;</span></span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span id="local-6989586621679669259"><span id="local-6989586621679669260"></span></span><span class="hs-keyword">data</span><span> </span><span id="FeatureEvent"><span class="annot"><a href="LaunchDarkly.Server.Events.html#FeatureEvent"><span class="hs-identifier hs-var">FeatureEvent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="FeatureEvent"><span class="annot"><a href="LaunchDarkly.Server.Events.html#FeatureEvent"><span class="hs-identifier hs-var">FeatureEvent</span></a></span></span><span>
</span><span id="line-154"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Akey%3AFeatureEvent"><span class="annot"><span class="annottext">FeatureEvent -&gt; Text
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Akey%3AFeatureEvent"><span class="hs-identifier hs-var hs-var">key</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-155"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Acontext%3AFeatureEvent"><span class="annot"><span class="annottext">FeatureEvent -&gt; Value
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Acontext%3AFeatureEvent"><span class="hs-identifier hs-var hs-var">context</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span>
</span><span id="line-156"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Avalue%3AFeatureEvent"><span class="annot"><span class="annottext">FeatureEvent -&gt; Value
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Avalue%3AFeatureEvent"><span class="hs-identifier hs-var hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span>
</span><span id="line-157"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AdefaultValue%3AFeatureEvent"><span class="annot"><span class="annottext">FeatureEvent -&gt; Maybe Value
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AdefaultValue%3AFeatureEvent"><span class="hs-identifier hs-var hs-var">defaultValue</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Aversion%3AFeatureEvent"><span class="annot"><span class="annottext">FeatureEvent -&gt; Maybe Natural
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Aversion%3AFeatureEvent"><span class="hs-identifier hs-var hs-var">version</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span class="hs-special">)</span><span>
</span><span id="line-159"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AprereqOf%3AFeatureEvent"><span class="annot"><span class="annottext">FeatureEvent -&gt; Maybe Text
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AprereqOf%3AFeatureEvent"><span class="hs-identifier hs-var hs-var">prereqOf</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Avariation%3AFeatureEvent"><span class="annot"><span class="annottext">FeatureEvent -&gt; Maybe Integer
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Avariation%3AFeatureEvent"><span class="hs-identifier hs-var hs-var">variation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Areason%3AFeatureEvent"><span class="annot"><span class="annottext">FeatureEvent -&gt; Maybe EvaluationReason
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Areason%3AFeatureEvent"><span class="hs-identifier hs-var hs-var">reason</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Details.html#EvaluationReason"><span class="hs-identifier hs-type">EvaluationReason</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-163"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. FeatureEvent -&gt; Rep FeatureEvent x)
-&gt; (forall x. Rep FeatureEvent x -&gt; FeatureEvent)
-&gt; Generic FeatureEvent
forall x. Rep FeatureEvent x -&gt; FeatureEvent
forall x. FeatureEvent -&gt; Rep FeatureEvent x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep FeatureEvent x -&gt; FeatureEvent
$cfrom :: forall x. FeatureEvent -&gt; Rep FeatureEvent x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679669242"><span id="local-6989586621679669244"><span id="local-6989586621679669246"><span class="annot"><span class="annottext">Int -&gt; FeatureEvent -&gt; ShowS
[FeatureEvent] -&gt; ShowS
FeatureEvent -&gt; String
(Int -&gt; FeatureEvent -&gt; ShowS)
-&gt; (FeatureEvent -&gt; String)
-&gt; ([FeatureEvent] -&gt; ShowS)
-&gt; Show FeatureEvent
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [FeatureEvent] -&gt; ShowS
$cshowList :: [FeatureEvent] -&gt; ShowS
show :: FeatureEvent -&gt; String
$cshow :: FeatureEvent -&gt; String
showsPrec :: Int -&gt; FeatureEvent -&gt; ShowS
$cshowsPrec :: Int -&gt; FeatureEvent -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679669235"><span id="local-6989586621679669237"><span id="local-6989586621679669239"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#FeatureEvent"><span class="hs-identifier hs-type">FeatureEvent</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-166"></span><span>    </span><span id="local-6989586621679669234"><span class="annot"><span class="annottext">toJSON :: FeatureEvent -&gt; Value
</span><a href="#local-6989586621679669234"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span id="local-6989586621679669233"><span class="annot"><span class="annottext">event :: FeatureEvent
</span><a href="#local-6989586621679669233"><span class="hs-identifier hs-var">event</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-167"></span><span>        </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="annot"><span class="annottext">([Pair] -&gt; Value) -&gt; [Pair] -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-168"></span><span>            </span><span class="annot"><span class="annottext">(Pair -&gt; Bool) -&gt; [Pair] -&gt; [Pair]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span>
</span><span id="line-169"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; Value -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">(/=)</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier hs-var">Null</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Bool) -&gt; (Pair -&gt; Value) -&gt; Pair -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pair -&gt; Value
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;key&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Value) -&gt; Text -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FeatureEvent -&gt; Text
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;key&quot;</span></span><span> </span><span class="annot"><span class="annottext">FeatureEvent
</span><a href="#local-6989586621679669233"><span class="hs-identifier hs-var">event</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;context&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Value) -&gt; Value -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FeatureEvent -&gt; Value
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;context&quot;</span></span><span> </span><span class="annot"><span class="annottext">FeatureEvent
</span><a href="#local-6989586621679669233"><span class="hs-identifier hs-var">event</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-172"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;value&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Value) -&gt; Value -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FeatureEvent -&gt; Value
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;value&quot;</span></span><span> </span><span class="annot"><span class="annottext">FeatureEvent
</span><a href="#local-6989586621679669233"><span class="hs-identifier hs-var">event</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;default&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Value -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Value -&gt; Value) -&gt; Maybe Value -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FeatureEvent -&gt; Maybe Value
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;defaultValue&quot;</span></span><span> </span><span class="annot"><span class="annottext">FeatureEvent
</span><a href="#local-6989586621679669233"><span class="hs-identifier hs-var">event</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-174"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;version&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Natural -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Natural -&gt; Value) -&gt; Maybe Natural -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FeatureEvent -&gt; Maybe Natural
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;version&quot;</span></span><span> </span><span class="annot"><span class="annottext">FeatureEvent
</span><a href="#local-6989586621679669233"><span class="hs-identifier hs-var">event</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;prereqOf&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Text -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Text -&gt; Value) -&gt; Maybe Text -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FeatureEvent -&gt; Maybe Text
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;prereqOf&quot;</span></span><span> </span><span class="annot"><span class="annottext">FeatureEvent
</span><a href="#local-6989586621679669233"><span class="hs-identifier hs-var">event</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;variation&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Integer -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Integer -&gt; Value) -&gt; Maybe Integer -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FeatureEvent -&gt; Maybe Integer
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;variation&quot;</span></span><span> </span><span class="annot"><span class="annottext">FeatureEvent
</span><a href="#local-6989586621679669233"><span class="hs-identifier hs-var">event</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;reason&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe EvaluationReason -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">(Maybe EvaluationReason -&gt; Value)
-&gt; Maybe EvaluationReason -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FeatureEvent -&gt; Maybe EvaluationReason
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;reason&quot;</span></span><span> </span><span class="annot"><span class="annottext">FeatureEvent
</span><a href="#local-6989586621679669233"><span class="hs-identifier hs-var">event</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventKind"><span class="hs-identifier hs-type">EventKind</span></a></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#FeatureEvent"><span class="hs-identifier hs-type">FeatureEvent</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-181"></span><span>    </span><span id="local-6989586621679669231"><span class="annot"><span class="annottext">eventKind :: FeatureEvent -&gt; Text
</span><a href="#local-6989586621679669231"><span class="hs-identifier hs-var hs-var hs-var hs-var">eventKind</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;feature&quot;</span></span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span class="hs-keyword">newtype</span><span> </span><span id="DebugEvent"><span class="annot"><a href="LaunchDarkly.Server.Events.html#DebugEvent"><span class="hs-identifier hs-var">DebugEvent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DebugEvent"><span class="annot"><a href="LaunchDarkly.Server.Events.html#DebugEvent"><span class="hs-identifier hs-var">DebugEvent</span></a></span></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#FeatureEvent"><span class="hs-identifier hs-type">FeatureEvent</span></a></span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventKind"><span class="hs-identifier hs-type">EventKind</span></a></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#DebugEvent"><span class="hs-identifier hs-type">DebugEvent</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-186"></span><span>    </span><span id="local-6989586621679669228"><span class="annot"><span class="annottext">eventKind :: DebugEvent -&gt; Text
</span><a href="#local-6989586621679669228"><span class="hs-identifier hs-var hs-var hs-var hs-var">eventKind</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;debug&quot;</span></span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679669221"><span id="local-6989586621679669223"><span id="local-6989586621679669225"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#DebugEvent"><span class="hs-identifier hs-type">DebugEvent</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-189"></span><span>    </span><span id="local-6989586621679669220"><span class="annot"><span class="annottext">toJSON :: DebugEvent -&gt; Value
</span><a href="#local-6989586621679669220"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="LaunchDarkly.Server.Events.html#DebugEvent"><span class="hs-identifier hs-type">DebugEvent</span></a></span><span> </span><span id="local-6989586621679669219"><span class="annot"><span class="annottext">x :: FeatureEvent
</span><a href="#local-6989586621679669219"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FeatureEvent -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">FeatureEvent
</span><a href="#local-6989586621679669219"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span class="annot"><a href="LaunchDarkly.Server.Events.html#makeDebugEvent"><span class="hs-identifier hs-type">makeDebugEvent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Config.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Context.Internal.html#Context"><span class="hs-identifier hs-type">Context</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EvalEvent"><span class="hs-identifier hs-type">EvalEvent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#DebugEvent"><span class="hs-identifier hs-type">DebugEvent</span></a></span><span>
</span><span id="line-192"></span><span id="makeDebugEvent"><span class="annot"><span class="annottext">makeDebugEvent :: Config -&gt; Context -&gt; Bool -&gt; EvalEvent -&gt; DebugEvent
</span><a href="LaunchDarkly.Server.Events.html#makeDebugEvent"><span class="hs-identifier hs-var hs-var">makeDebugEvent</span></a></span></span><span> </span><span id="local-6989586621679669217"><span class="annot"><span class="annottext">config :: Config
</span><a href="#local-6989586621679669217"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span id="local-6989586621679669216"><span class="annot"><span class="annottext">context :: Context
</span><a href="#local-6989586621679669216"><span class="hs-identifier hs-var">context</span></a></span></span><span> </span><span id="local-6989586621679669215"><span class="annot"><span class="annottext">includeReason :: Bool
</span><a href="#local-6989586621679669215"><span class="hs-identifier hs-var">includeReason</span></a></span></span><span> </span><span id="local-6989586621679669214"><span class="annot"><span class="annottext">event :: EvalEvent
</span><a href="#local-6989586621679669214"><span class="hs-identifier hs-var">event</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-193"></span><span>    </span><span class="annot"><span class="annottext">FeatureEvent -&gt; DebugEvent
</span><a href="LaunchDarkly.Server.Events.html#DebugEvent"><span class="hs-identifier hs-var">DebugEvent</span></a></span><span> </span><span class="annot"><span class="annottext">(FeatureEvent -&gt; DebugEvent) -&gt; FeatureEvent -&gt; DebugEvent
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Bool -&gt; EvalEvent -&gt; FeatureEvent
</span><a href="LaunchDarkly.Server.Events.html#makeFeatureEventWithContextPayload"><span class="hs-identifier hs-var">makeFeatureEventWithContextPayload</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Config -&gt; Context -&gt; Value
</span><a href="LaunchDarkly.Server.Context.Internal.html#redactContext"><span class="hs-identifier hs-var">redactContext</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679669217"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679669216"><span class="hs-identifier hs-var">context</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679669215"><span class="hs-identifier hs-var">includeReason</span></a></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669214"><span class="hs-identifier hs-var">event</span></a></span><span>
</span><span id="line-194"></span><span>
</span><span id="line-195"></span><span class="annot"><a href="LaunchDarkly.Server.Events.html#makeFeatureEvent"><span class="hs-identifier hs-type">makeFeatureEvent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Config.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Context.Internal.html#Context"><span class="hs-identifier hs-type">Context</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EvalEvent"><span class="hs-identifier hs-type">EvalEvent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#FeatureEvent"><span class="hs-identifier hs-type">FeatureEvent</span></a></span><span>
</span><span id="line-196"></span><span id="makeFeatureEvent"><span class="annot"><span class="annottext">makeFeatureEvent :: Config -&gt; Context -&gt; Bool -&gt; EvalEvent -&gt; FeatureEvent
</span><a href="LaunchDarkly.Server.Events.html#makeFeatureEvent"><span class="hs-identifier hs-var hs-var">makeFeatureEvent</span></a></span></span><span> </span><span id="local-6989586621679669211"><span class="annot"><span class="annottext">config :: Config
</span><a href="#local-6989586621679669211"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span id="local-6989586621679669210"><span class="annot"><span class="annottext">context :: Context
</span><a href="#local-6989586621679669210"><span class="hs-identifier hs-var">context</span></a></span></span><span> </span><span id="local-6989586621679669209"><span class="annot"><span class="annottext">includeReason :: Bool
</span><a href="#local-6989586621679669209"><span class="hs-identifier hs-var">includeReason</span></a></span></span><span> </span><span id="local-6989586621679669208"><span class="annot"><span class="annottext">event :: EvalEvent
</span><a href="#local-6989586621679669208"><span class="hs-identifier hs-var">event</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-197"></span><span>    </span><span class="annot"><span class="annottext">Value -&gt; Bool -&gt; EvalEvent -&gt; FeatureEvent
</span><a href="LaunchDarkly.Server.Events.html#makeFeatureEventWithContextPayload"><span class="hs-identifier hs-var">makeFeatureEventWithContextPayload</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Config -&gt; Context -&gt; Value
</span><a href="LaunchDarkly.Server.Context.Internal.html#redactContextRedactAnonymous"><span class="hs-identifier hs-var">redactContextRedactAnonymous</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679669211"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679669210"><span class="hs-identifier hs-var">context</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679669209"><span class="hs-identifier hs-var">includeReason</span></a></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669208"><span class="hs-identifier hs-var">event</span></a></span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span class="annot"><a href="LaunchDarkly.Server.Events.html#makeFeatureEventWithContextPayload"><span class="hs-identifier hs-type">makeFeatureEventWithContextPayload</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EvalEvent"><span class="hs-identifier hs-type">EvalEvent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#FeatureEvent"><span class="hs-identifier hs-type">FeatureEvent</span></a></span><span>
</span><span id="line-200"></span><span id="makeFeatureEventWithContextPayload"><span class="annot"><span class="annottext">makeFeatureEventWithContextPayload :: Value -&gt; Bool -&gt; EvalEvent -&gt; FeatureEvent
</span><a href="LaunchDarkly.Server.Events.html#makeFeatureEventWithContextPayload"><span class="hs-identifier hs-var hs-var">makeFeatureEventWithContextPayload</span></a></span></span><span> </span><span id="local-6989586621679669207"><span class="annot"><span class="annottext">context :: Value
</span><a href="#local-6989586621679669207"><span class="hs-identifier hs-var">context</span></a></span></span><span> </span><span id="local-6989586621679669206"><span class="annot"><span class="annottext">includeReason :: Bool
</span><a href="#local-6989586621679669206"><span class="hs-identifier hs-var">includeReason</span></a></span></span><span> </span><span id="local-6989586621679669205"><span class="annot"><span class="annottext">event :: EvalEvent
</span><a href="#local-6989586621679669205"><span class="hs-identifier hs-var">event</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-201"></span><span>    </span><span class="annot"><span class="annottext">$WFeatureEvent :: Text
-&gt; Value
-&gt; Value
-&gt; Maybe Value
-&gt; Maybe Natural
-&gt; Maybe Text
-&gt; Maybe Integer
-&gt; Maybe EvaluationReason
-&gt; FeatureEvent
</span><a href="LaunchDarkly.Server.Events.html#%24WFeatureEvent"><span class="hs-identifier hs-type hs-type">FeatureEvent</span></a></span><span>
</span><span id="line-202"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:key:FeatureEvent :: Text
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Akey%3AFeatureEvent"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvalEvent -&gt; Text
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;key&quot;</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669205"><span class="hs-identifier hs-var">event</span></a></span><span>
</span><span id="line-203"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:context:FeatureEvent :: Value
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Acontext%3AFeatureEvent"><span class="hs-identifier hs-var">context</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679669207"><span class="hs-identifier hs-var">context</span></a></span><span>
</span><span id="line-204"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:value:FeatureEvent :: Value
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Avalue%3AFeatureEvent"><span class="hs-identifier hs-var">value</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvalEvent -&gt; Value
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;value&quot;</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669205"><span class="hs-identifier hs-var">event</span></a></span><span>
</span><span id="line-205"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:defaultValue:FeatureEvent :: Maybe Value
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AdefaultValue%3AFeatureEvent"><span class="hs-identifier hs-var">defaultValue</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvalEvent -&gt; Maybe Value
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;defaultValue&quot;</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669205"><span class="hs-identifier hs-var">event</span></a></span><span>
</span><span id="line-206"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:version:FeatureEvent :: Maybe Natural
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Aversion%3AFeatureEvent"><span class="hs-identifier hs-var">version</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvalEvent -&gt; Maybe Natural
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;version&quot;</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669205"><span class="hs-identifier hs-var">event</span></a></span><span>
</span><span id="line-207"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:prereqOf:FeatureEvent :: Maybe Text
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AprereqOf%3AFeatureEvent"><span class="hs-identifier hs-var">prereqOf</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvalEvent -&gt; Maybe Text
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;prereqOf&quot;</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669205"><span class="hs-identifier hs-var">event</span></a></span><span>
</span><span id="line-208"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:variation:FeatureEvent :: Maybe Integer
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Avariation%3AFeatureEvent"><span class="hs-identifier hs-var">variation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvalEvent -&gt; Maybe Integer
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;variation&quot;</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669205"><span class="hs-identifier hs-var">event</span></a></span><span>
</span><span id="line-209"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:reason:FeatureEvent :: Maybe EvaluationReason
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Areason%3AFeatureEvent"><span class="hs-identifier hs-var">reason</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-210"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679669206"><span class="hs-identifier hs-var">includeReason</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent -&gt; Bool
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;forceIncludeReason&quot;</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669205"><span class="hs-identifier hs-var">event</span></a></span><span>
</span><span id="line-211"></span><span>                </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">EvaluationReason -&gt; Maybe EvaluationReason
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(EvaluationReason -&gt; Maybe EvaluationReason)
-&gt; EvaluationReason -&gt; Maybe EvaluationReason
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent -&gt; EvaluationReason
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;reason&quot;</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669205"><span class="hs-identifier hs-var">event</span></a></span><span>
</span><span id="line-212"></span><span>                </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Maybe EvaluationReason
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-213"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span id="local-6989586621679669201"><span id="local-6989586621679669202"></span></span><span class="hs-keyword">data</span><span> </span><span id="CustomEvent"><span class="annot"><a href="LaunchDarkly.Server.Events.html#CustomEvent"><span class="hs-identifier hs-var">CustomEvent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CustomEvent"><span class="annot"><a href="LaunchDarkly.Server.Events.html#CustomEvent"><span class="hs-identifier hs-var">CustomEvent</span></a></span></span><span>
</span><span id="line-216"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Akey%3ACustomEvent"><span class="annot"><span class="annottext">CustomEvent -&gt; Text
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Akey%3ACustomEvent"><span class="hs-identifier hs-var hs-var">key</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-217"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AcontextKeys%3ACustomEvent"><span class="annot"><span class="annottext">CustomEvent -&gt; KeyMap Text
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AcontextKeys%3ACustomEvent"><span class="hs-identifier hs-var hs-var">contextKeys</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="LaunchDarkly.AesonCompat.html#KeyMap"><span class="hs-identifier hs-type">KeyMap</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AmetricValue%3ACustomEvent"><span class="annot"><span class="annottext">CustomEvent -&gt; Maybe Double
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AmetricValue%3ACustomEvent"><span class="hs-identifier hs-var hs-var">metricValue</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Double</span></span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Avalue%3ACustomEvent"><span class="annot"><span class="annottext">CustomEvent -&gt; Maybe Value
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Avalue%3ACustomEvent"><span class="hs-identifier hs-var hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span class="hs-special">)</span><span>
</span><span id="line-220"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-221"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. CustomEvent -&gt; Rep CustomEvent x)
-&gt; (forall x. Rep CustomEvent x -&gt; CustomEvent)
-&gt; Generic CustomEvent
forall x. Rep CustomEvent x -&gt; CustomEvent
forall x. CustomEvent -&gt; Rep CustomEvent x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep CustomEvent x -&gt; CustomEvent
$cfrom :: forall x. CustomEvent -&gt; Rep CustomEvent x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679669188"><span id="local-6989586621679669190"><span id="local-6989586621679669192"><span class="annot"><span class="annottext">Int -&gt; CustomEvent -&gt; ShowS
[CustomEvent] -&gt; ShowS
CustomEvent -&gt; String
(Int -&gt; CustomEvent -&gt; ShowS)
-&gt; (CustomEvent -&gt; String)
-&gt; ([CustomEvent] -&gt; ShowS)
-&gt; Show CustomEvent
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [CustomEvent] -&gt; ShowS
$cshowList :: [CustomEvent] -&gt; ShowS
show :: CustomEvent -&gt; String
$cshow :: CustomEvent -&gt; String
showsPrec :: Int -&gt; CustomEvent -&gt; ShowS
$cshowsPrec :: Int -&gt; CustomEvent -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679669181"><span id="local-6989586621679669183"><span id="local-6989586621679669185"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#CustomEvent"><span class="hs-identifier hs-type">CustomEvent</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-224"></span><span>    </span><span id="local-6989586621679669180"><span class="annot"><span class="annottext">toJSON :: CustomEvent -&gt; Value
</span><a href="#local-6989586621679669180"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span id="local-6989586621679669179"><span class="annot"><span class="annottext">ctx :: CustomEvent
</span><a href="#local-6989586621679669179"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-225"></span><span>        </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="annot"><span class="annottext">([Pair] -&gt; Value) -&gt; [Pair] -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-226"></span><span>            </span><span class="annot"><span class="annottext">(Pair -&gt; Bool) -&gt; [Pair] -&gt; [Pair]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span>
</span><span id="line-227"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; Value -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">(/=)</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier hs-var">Null</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Bool) -&gt; (Pair -&gt; Value) -&gt; Pair -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pair -&gt; Value
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span>
</span><span id="line-228"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;key&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Value) -&gt; Text -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CustomEvent -&gt; Text
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;key&quot;</span></span><span> </span><span class="annot"><span class="annottext">CustomEvent
</span><a href="#local-6989586621679669179"><span class="hs-identifier hs-var">ctx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;contextKeys&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeyMap Text -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">(KeyMap Text -&gt; Value) -&gt; KeyMap Text -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CustomEvent -&gt; KeyMap Text
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;contextKeys&quot;</span></span><span> </span><span class="annot"><span class="annottext">CustomEvent
</span><a href="#local-6989586621679669179"><span class="hs-identifier hs-var">ctx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-230"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;metricValue&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Double -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Double -&gt; Value) -&gt; Maybe Double -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CustomEvent -&gt; Maybe Double
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;metricValue&quot;</span></span><span> </span><span class="annot"><span class="annottext">CustomEvent
</span><a href="#local-6989586621679669179"><span class="hs-identifier hs-var">ctx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-231"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;data&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Value -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Value -&gt; Value) -&gt; Maybe Value -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CustomEvent -&gt; Maybe Value
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;value&quot;</span></span><span> </span><span class="annot"><span class="annottext">CustomEvent
</span><a href="#local-6989586621679669179"><span class="hs-identifier hs-var">ctx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-232"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventKind"><span class="hs-identifier hs-type">EventKind</span></a></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#CustomEvent"><span class="hs-identifier hs-type">CustomEvent</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-235"></span><span>    </span><span id="local-6989586621679669177"><span class="annot"><span class="annottext">eventKind :: CustomEvent -&gt; Text
</span><a href="#local-6989586621679669177"><span class="hs-identifier hs-var hs-var hs-var hs-var">eventKind</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;custom&quot;</span></span><span>
</span><span id="line-236"></span><span>
</span><span id="line-237"></span><span id="local-6989586621679669175"><span id="local-6989586621679669176"></span></span><span class="hs-keyword">data</span><span> </span><span id="BaseEvent"><span class="annot"><a href="LaunchDarkly.Server.Events.html#BaseEvent"><span class="hs-identifier hs-var">BaseEvent</span></a></span></span><span> </span><span id="local-6989586621679669590"><span class="annot"><a href="#local-6989586621679669590"><span class="hs-identifier hs-type">event</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="BaseEvent"><span class="annot"><a href="LaunchDarkly.Server.Events.html#BaseEvent"><span class="hs-identifier hs-var">BaseEvent</span></a></span></span><span>
</span><span id="line-238"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AcreationDate%3ABaseEvent"><span class="annot"><span class="annottext">BaseEvent event -&gt; Natural
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AcreationDate%3ABaseEvent"><span class="hs-identifier hs-var hs-var">creationDate</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span>
</span><span id="line-239"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Aevent%3ABaseEvent"><span class="annot"><span class="annottext">BaseEvent event -&gt; event
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Aevent%3ABaseEvent"><span class="hs-identifier hs-var hs-var">event</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679669590"><span class="hs-identifier hs-type">event</span></a></span><span>
</span><span id="line-240"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-241"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. BaseEvent event -&gt; Rep (BaseEvent event) x)
-&gt; (forall x. Rep (BaseEvent event) x -&gt; BaseEvent event)
-&gt; Generic (BaseEvent event)
forall x. Rep (BaseEvent event) x -&gt; BaseEvent event
forall x. BaseEvent event -&gt; Rep (BaseEvent event) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall event x. Rep (BaseEvent event) x -&gt; BaseEvent event
forall event x. BaseEvent event -&gt; Rep (BaseEvent event) x
$cto :: forall event x. Rep (BaseEvent event) x -&gt; BaseEvent event
$cfrom :: forall event x. BaseEvent event -&gt; Rep (BaseEvent event) x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679669167"><span id="local-6989586621679669169"><span id="local-6989586621679669171"><span class="annot"><span class="annottext">Int -&gt; BaseEvent event -&gt; ShowS
[BaseEvent event] -&gt; ShowS
BaseEvent event -&gt; String
(Int -&gt; BaseEvent event -&gt; ShowS)
-&gt; (BaseEvent event -&gt; String)
-&gt; ([BaseEvent event] -&gt; ShowS)
-&gt; Show (BaseEvent event)
forall event. Show event =&gt; Int -&gt; BaseEvent event -&gt; ShowS
forall event. Show event =&gt; [BaseEvent event] -&gt; ShowS
forall event. Show event =&gt; BaseEvent event -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [BaseEvent event] -&gt; ShowS
$cshowList :: forall event. Show event =&gt; [BaseEvent event] -&gt; ShowS
show :: BaseEvent event -&gt; String
$cshow :: forall event. Show event =&gt; BaseEvent event -&gt; String
showsPrec :: Int -&gt; BaseEvent event -&gt; ShowS
$cshowsPrec :: forall event. Show event =&gt; Int -&gt; BaseEvent event -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span class="annot"><a href="LaunchDarkly.Server.Events.html#fromObject"><span class="hs-identifier hs-type">fromObject</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.AesonCompat.html#KeyMap"><span class="hs-identifier hs-type">KeyMap</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span>
</span><span id="line-244"></span><span id="fromObject"><span class="annot"><span class="annottext">fromObject :: Value -&gt; KeyMap Value
</span><a href="LaunchDarkly.Server.Events.html#fromObject"><span class="hs-identifier hs-var hs-var">fromObject</span></a></span></span><span> </span><span id="local-6989586621679669165"><span class="annot"><span class="annottext">x :: Value
</span><a href="#local-6989586621679669165"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679669165"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Object</span></span><span> </span><span id="local-6989586621679669163"><span class="annot"><span class="annottext">o :: KeyMap Value
</span><a href="#local-6989586621679669163"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">KeyMap Value
</span><a href="#local-6989586621679669163"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">;</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; KeyMap Value
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="hs-string">&quot;expected object&quot;</span></span><span>
</span><span id="line-245"></span><span>
</span><span id="line-246"></span><span id="local-6989586621679669161"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679669154"><span id="local-6989586621679669156"><span id="local-6989586621679669158"><span class="hs-special">(</span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventKind"><span class="hs-identifier hs-type">EventKind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679669161"><span class="hs-identifier hs-type">sub</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679669161"><span class="hs-identifier hs-type">sub</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="LaunchDarkly.Server.Events.html#BaseEvent"><span class="hs-identifier hs-type">BaseEvent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679669161"><span class="hs-identifier hs-type">sub</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-247"></span><span>    </span><span id="local-6989586621679669153"><span class="annot"><span class="annottext">toJSON :: BaseEvent sub -&gt; Value
</span><a href="#local-6989586621679669153"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span id="local-6989586621679669152"><span class="annot"><span class="annottext">event :: BaseEvent sub
</span><a href="#local-6989586621679669152"><span class="hs-identifier hs-var">event</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-248"></span><span>        </span><span class="annot"><span class="annottext">KeyMap Value -&gt; Value
</span><span class="hs-identifier hs-var">Object</span></span><span> </span><span class="annot"><span class="annottext">(KeyMap Value -&gt; Value) -&gt; KeyMap Value -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-249"></span><span>            </span><span class="annot"><span class="annottext">KeyMap Value -&gt; KeyMap Value -&gt; KeyMap Value
forall v. HashMap Text v -&gt; HashMap Text v -&gt; HashMap Text v
</span><a href="LaunchDarkly.AesonCompat.html#keyMapUnion"><span class="hs-identifier hs-var">keyMapUnion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; KeyMap Value
</span><a href="LaunchDarkly.Server.Events.html#fromObject"><span class="hs-identifier hs-var">fromObject</span></a></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; KeyMap Value) -&gt; Value -&gt; KeyMap Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">sub -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">(sub -&gt; Value) -&gt; sub -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BaseEvent sub -&gt; sub
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;event&quot;</span></span><span> </span><span class="annot"><span class="annottext">BaseEvent sub
</span><a href="#local-6989586621679669152"><span class="hs-identifier hs-var">event</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(KeyMap Value -&gt; KeyMap Value) -&gt; KeyMap Value -&gt; KeyMap Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-250"></span><span>                </span><span class="annot"><span class="annottext">[Item (KeyMap Value)] -&gt; KeyMap Value
forall l. IsList l =&gt; [Item l] -&gt; l
</span><span class="hs-identifier hs-var">fromList</span></span><span>
</span><span id="line-251"></span><span>                    </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;creationDate&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; Value) -&gt; Natural -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BaseEvent sub -&gt; Natural
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;creationDate&quot;</span></span><span> </span><span class="annot"><span class="annottext">BaseEvent sub
</span><a href="#local-6989586621679669152"><span class="hs-identifier hs-var">event</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;kind&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">String</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Value) -&gt; Text -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">sub -&gt; Text
forall a. EventKind a =&gt; a -&gt; Text
</span><a href="LaunchDarkly.Server.Events.html#eventKind"><span class="hs-identifier hs-var">eventKind</span></a></span><span> </span><span class="annot"><span class="annottext">(sub -&gt; Text) -&gt; sub -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BaseEvent sub -&gt; sub
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;event&quot;</span></span><span> </span><span class="annot"><span class="annottext">BaseEvent sub
</span><a href="#local-6989586621679669152"><span class="hs-identifier hs-var">event</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>                    </span><span class="hs-special">]</span></span><span>
</span><span id="line-254"></span><span>
</span><span id="line-255"></span><span class="hs-keyword">data</span><span> </span><span id="EventType"><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventType"><span class="hs-identifier hs-var">EventType</span></a></span></span><span>
</span><span id="line-256"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="EventTypeIdentify"><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventTypeIdentify"><span class="hs-identifier hs-var">EventTypeIdentify</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="LaunchDarkly.Server.Events.html#BaseEvent"><span class="hs-identifier hs-type">BaseEvent</span></a></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#IdentifyEvent"><span class="hs-identifier hs-type">IdentifyEvent</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-257"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="EventTypeFeature"><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventTypeFeature"><span class="hs-identifier hs-var">EventTypeFeature</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="LaunchDarkly.Server.Events.html#BaseEvent"><span class="hs-identifier hs-type">BaseEvent</span></a></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#FeatureEvent"><span class="hs-identifier hs-type">FeatureEvent</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-258"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="EventTypeSummary"><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventTypeSummary"><span class="hs-identifier hs-var">EventTypeSummary</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="LaunchDarkly.Server.Events.html#SummaryEvent"><span class="hs-identifier hs-type">SummaryEvent</span></a></span><span>
</span><span id="line-259"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="EventTypeCustom"><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventTypeCustom"><span class="hs-identifier hs-var">EventTypeCustom</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="LaunchDarkly.Server.Events.html#BaseEvent"><span class="hs-identifier hs-type">BaseEvent</span></a></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#CustomEvent"><span class="hs-identifier hs-type">CustomEvent</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-260"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="EventTypeIndex"><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventTypeIndex"><span class="hs-identifier hs-var">EventTypeIndex</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="LaunchDarkly.Server.Events.html#BaseEvent"><span class="hs-identifier hs-type">BaseEvent</span></a></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#IndexEvent"><span class="hs-identifier hs-type">IndexEvent</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-261"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="EventTypeDebug"><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventTypeDebug"><span class="hs-identifier hs-var">EventTypeDebug</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="LaunchDarkly.Server.Events.html#BaseEvent"><span class="hs-identifier hs-type">BaseEvent</span></a></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#DebugEvent"><span class="hs-identifier hs-type">DebugEvent</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-262"></span><span>
</span><span id="line-263"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679669139"><span id="local-6989586621679669141"><span id="local-6989586621679669143"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventType"><span class="hs-identifier hs-type">EventType</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-264"></span><span>    </span><span id="local-6989586621679669138"><span class="annot"><span class="annottext">toJSON :: EventType -&gt; Value
</span><a href="#local-6989586621679669138"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span id="local-6989586621679669137"><span class="annot"><span class="annottext">event :: EventType
</span><a href="#local-6989586621679669137"><span class="hs-identifier hs-var">event</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">EventType
</span><a href="#local-6989586621679669137"><span class="hs-identifier hs-var">event</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-265"></span><span>        </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventTypeIdentify"><span class="hs-identifier hs-type">EventTypeIdentify</span></a></span><span> </span><span id="local-6989586621679669136"><span class="annot"><span class="annottext">x :: BaseEvent IdentifyEvent
</span><a href="#local-6989586621679669136"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BaseEvent IdentifyEvent -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">BaseEvent IdentifyEvent
</span><a href="#local-6989586621679669136"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-266"></span><span>        </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventTypeFeature"><span class="hs-identifier hs-type">EventTypeFeature</span></a></span><span> </span><span id="local-6989586621679669135"><span class="annot"><span class="annottext">x :: BaseEvent FeatureEvent
</span><a href="#local-6989586621679669135"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BaseEvent FeatureEvent -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">BaseEvent FeatureEvent
</span><a href="#local-6989586621679669135"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-267"></span><span>        </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventTypeSummary"><span class="hs-identifier hs-type">EventTypeSummary</span></a></span><span> </span><span id="local-6989586621679669134"><span class="annot"><span class="annottext">x :: SummaryEvent
</span><a href="#local-6989586621679669134"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">KeyMap Value -&gt; Value
</span><span class="hs-identifier hs-var">Object</span></span><span> </span><span class="annot"><span class="annottext">(KeyMap Value -&gt; Value) -&gt; KeyMap Value -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; KeyMap Value -&gt; KeyMap Value
forall v. Text -&gt; v -&gt; HashMap Text v -&gt; HashMap Text v
</span><a href="LaunchDarkly.AesonCompat.html#insertKey"><span class="hs-identifier hs-var">insertKey</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;kind&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">String</span></span><span> </span><span class="annot"><span class="hs-string">&quot;summary&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; KeyMap Value
</span><a href="LaunchDarkly.Server.Events.html#fromObject"><span class="hs-identifier hs-var">fromObject</span></a></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; KeyMap Value) -&gt; Value -&gt; KeyMap Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SummaryEvent -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">SummaryEvent
</span><a href="#local-6989586621679669134"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-268"></span><span>        </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventTypeCustom"><span class="hs-identifier hs-type">EventTypeCustom</span></a></span><span> </span><span id="local-6989586621679669133"><span class="annot"><span class="annottext">x :: BaseEvent CustomEvent
</span><a href="#local-6989586621679669133"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BaseEvent CustomEvent -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">BaseEvent CustomEvent
</span><a href="#local-6989586621679669133"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-269"></span><span>        </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventTypeIndex"><span class="hs-identifier hs-type">EventTypeIndex</span></a></span><span> </span><span id="local-6989586621679669132"><span class="annot"><span class="annottext">x :: BaseEvent IndexEvent
</span><a href="#local-6989586621679669132"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BaseEvent IndexEvent -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">BaseEvent IndexEvent
</span><a href="#local-6989586621679669132"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-270"></span><span>        </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventTypeDebug"><span class="hs-identifier hs-type">EventTypeDebug</span></a></span><span> </span><span id="local-6989586621679669131"><span class="annot"><span class="annottext">x :: BaseEvent DebugEvent
</span><a href="#local-6989586621679669131"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BaseEvent DebugEvent -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">BaseEvent DebugEvent
</span><a href="#local-6989586621679669131"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span class="annot"><a href="LaunchDarkly.Server.Events.html#newUnknownFlagEvent"><span class="hs-identifier hs-type">newUnknownFlagEvent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Details.html#EvaluationReason"><span class="hs-identifier hs-type">EvaluationReason</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Context.Internal.html#Context"><span class="hs-identifier hs-type">Context</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EvalEvent"><span class="hs-identifier hs-type">EvalEvent</span></a></span><span>
</span><span id="line-273"></span><span id="newUnknownFlagEvent"><span class="annot"><span class="annottext">newUnknownFlagEvent :: Text -&gt; Value -&gt; EvaluationReason -&gt; Context -&gt; EvalEvent
</span><a href="LaunchDarkly.Server.Events.html#newUnknownFlagEvent"><span class="hs-identifier hs-var hs-var">newUnknownFlagEvent</span></a></span></span><span> </span><span id="local-6989586621679669129"><span class="annot"><span class="annottext">key :: Text
</span><a href="#local-6989586621679669129"><span class="hs-identifier hs-var">key</span></a></span></span><span> </span><span id="local-6989586621679669128"><span class="annot"><span class="annottext">defaultValue :: Value
</span><a href="#local-6989586621679669128"><span class="hs-identifier hs-var">defaultValue</span></a></span></span><span> </span><span id="local-6989586621679669127"><span class="annot"><span class="annottext">reason :: EvaluationReason
</span><a href="#local-6989586621679669127"><span class="hs-identifier hs-var">reason</span></a></span></span><span> </span><span id="local-6989586621679669126"><span class="annot"><span class="annottext">context :: Context
</span><a href="#local-6989586621679669126"><span class="hs-identifier hs-var">context</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-274"></span><span>    </span><span class="annot"><span class="annottext">$WEvalEvent :: Text
-&gt; Context
-&gt; Maybe Integer
-&gt; Value
-&gt; Maybe Value
-&gt; Maybe Natural
-&gt; Maybe Text
-&gt; EvaluationReason
-&gt; Bool
-&gt; Bool
-&gt; Bool
-&gt; Maybe Natural
-&gt; EvalEvent
</span><a href="LaunchDarkly.Server.Events.html#%24WEvalEvent"><span class="hs-identifier hs-type hs-type">EvalEvent</span></a></span><span>
</span><span id="line-275"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:key:EvalEvent :: Text
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Akey%3AEvalEvent"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679669129"><span class="hs-identifier hs-var">key</span></a></span><span>
</span><span id="line-276"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:context:EvalEvent :: Context
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Acontext%3AEvalEvent"><span class="hs-identifier hs-var">context</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679669126"><span class="hs-identifier hs-var">context</span></a></span><span>
</span><span id="line-277"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:variation:EvalEvent :: Maybe Integer
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Avariation%3AEvalEvent"><span class="hs-identifier hs-var">variation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Integer
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-278"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:value:EvalEvent :: Value
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Avalue%3AEvalEvent"><span class="hs-identifier hs-var">value</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679669128"><span class="hs-identifier hs-var">defaultValue</span></a></span><span>
</span><span id="line-279"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:defaultValue:EvalEvent :: Maybe Value
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AdefaultValue%3AEvalEvent"><span class="hs-identifier hs-var">defaultValue</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Maybe Value
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679669128"><span class="hs-identifier hs-var">defaultValue</span></a></span><span>
</span><span id="line-280"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:version:EvalEvent :: Maybe Natural
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Aversion%3AEvalEvent"><span class="hs-identifier hs-var">version</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Natural
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-281"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:prereqOf:EvalEvent :: Maybe Text
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AprereqOf%3AEvalEvent"><span class="hs-identifier hs-var">prereqOf</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-282"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:reason:EvalEvent :: EvaluationReason
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Areason%3AEvalEvent"><span class="hs-identifier hs-var">reason</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvaluationReason
</span><a href="#local-6989586621679669127"><span class="hs-identifier hs-var">reason</span></a></span><span>
</span><span id="line-283"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:trackEvents:EvalEvent :: Bool
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AtrackEvents%3AEvalEvent"><span class="hs-identifier hs-var">trackEvents</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-284"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:forceIncludeReason:EvalEvent :: Bool
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AforceIncludeReason%3AEvalEvent"><span class="hs-identifier hs-var">forceIncludeReason</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-285"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:debug:EvalEvent :: Bool
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Adebug%3AEvalEvent"><span class="hs-identifier hs-var">debug</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-286"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:debugEventsUntilDate:EvalEvent :: Maybe Natural
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AdebugEventsUntilDate%3AEvalEvent"><span class="hs-identifier hs-var">debugEventsUntilDate</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Natural
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-287"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-288"></span><span>
</span><span id="line-289"></span><span class="annot"><a href="LaunchDarkly.Server.Events.html#newSuccessfulEvalEvent"><span class="hs-identifier hs-type">newSuccessfulEvalEvent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Features.html#Flag"><span class="hs-identifier hs-type">Flag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Details.html#EvaluationReason"><span class="hs-identifier hs-type">EvaluationReason</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Context.Internal.html#Context"><span class="hs-identifier hs-type">Context</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EvalEvent"><span class="hs-identifier hs-type">EvalEvent</span></a></span><span>
</span><span id="line-290"></span><span id="newSuccessfulEvalEvent"><span class="annot"><span class="annottext">newSuccessfulEvalEvent :: Flag
-&gt; Maybe Integer
-&gt; Value
-&gt; Maybe Value
-&gt; EvaluationReason
-&gt; Maybe Text
-&gt; Context
-&gt; EvalEvent
</span><a href="LaunchDarkly.Server.Events.html#newSuccessfulEvalEvent"><span class="hs-identifier hs-var hs-var">newSuccessfulEvalEvent</span></a></span></span><span> </span><span id="local-6989586621679669123"><span class="annot"><span class="annottext">flag :: Flag
</span><a href="#local-6989586621679669123"><span class="hs-identifier hs-var">flag</span></a></span></span><span> </span><span id="local-6989586621679669122"><span class="annot"><span class="annottext">variation :: Maybe Integer
</span><a href="#local-6989586621679669122"><span class="hs-identifier hs-var">variation</span></a></span></span><span> </span><span id="local-6989586621679669121"><span class="annot"><span class="annottext">value :: Value
</span><a href="#local-6989586621679669121"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span id="local-6989586621679669120"><span class="annot"><span class="annottext">defaultValue :: Maybe Value
</span><a href="#local-6989586621679669120"><span class="hs-identifier hs-var">defaultValue</span></a></span></span><span> </span><span id="local-6989586621679669119"><span class="annot"><span class="annottext">reason :: EvaluationReason
</span><a href="#local-6989586621679669119"><span class="hs-identifier hs-var">reason</span></a></span></span><span> </span><span id="local-6989586621679669118"><span class="annot"><span class="annottext">prereqOf :: Maybe Text
</span><a href="#local-6989586621679669118"><span class="hs-identifier hs-var">prereqOf</span></a></span></span><span> </span><span id="local-6989586621679669117"><span class="annot"><span class="annottext">context :: Context
</span><a href="#local-6989586621679669117"><span class="hs-identifier hs-var">context</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-291"></span><span>    </span><span class="annot"><span class="annottext">$WEvalEvent :: Text
-&gt; Context
-&gt; Maybe Integer
-&gt; Value
-&gt; Maybe Value
-&gt; Maybe Natural
-&gt; Maybe Text
-&gt; EvaluationReason
-&gt; Bool
-&gt; Bool
-&gt; Bool
-&gt; Maybe Natural
-&gt; EvalEvent
</span><a href="LaunchDarkly.Server.Events.html#%24WEvalEvent"><span class="hs-identifier hs-type hs-type">EvalEvent</span></a></span><span>
</span><span id="line-292"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:key:EvalEvent :: Text
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Akey%3AEvalEvent"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Flag -&gt; Text
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;key&quot;</span></span><span> </span><span class="annot"><span class="annottext">Flag
</span><a href="#local-6989586621679669123"><span class="hs-identifier hs-var">flag</span></a></span><span>
</span><span id="line-293"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:context:EvalEvent :: Context
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Acontext%3AEvalEvent"><span class="hs-identifier hs-var">context</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679669117"><span class="hs-identifier hs-var">context</span></a></span><span>
</span><span id="line-294"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:variation:EvalEvent :: Maybe Integer
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Avariation%3AEvalEvent"><span class="hs-identifier hs-var">variation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Integer
</span><a href="#local-6989586621679669122"><span class="hs-identifier hs-var">variation</span></a></span><span>
</span><span id="line-295"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:value:EvalEvent :: Value
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Avalue%3AEvalEvent"><span class="hs-identifier hs-var">value</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679669121"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-296"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:defaultValue:EvalEvent :: Maybe Value
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AdefaultValue%3AEvalEvent"><span class="hs-identifier hs-var">defaultValue</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621679669120"><span class="hs-identifier hs-var">defaultValue</span></a></span><span>
</span><span id="line-297"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:version:EvalEvent :: Maybe Natural
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Aversion%3AEvalEvent"><span class="hs-identifier hs-var">version</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Maybe Natural
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; Maybe Natural) -&gt; Natural -&gt; Maybe Natural
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Flag -&gt; Natural
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;version&quot;</span></span><span> </span><span class="annot"><span class="annottext">Flag
</span><a href="#local-6989586621679669123"><span class="hs-identifier hs-var">flag</span></a></span><span>
</span><span id="line-298"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:prereqOf:EvalEvent :: Maybe Text
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AprereqOf%3AEvalEvent"><span class="hs-identifier hs-var">prereqOf</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679669118"><span class="hs-identifier hs-var">prereqOf</span></a></span><span>
</span><span id="line-299"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:reason:EvalEvent :: EvaluationReason
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Areason%3AEvalEvent"><span class="hs-identifier hs-var">reason</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvaluationReason
</span><a href="#local-6989586621679669119"><span class="hs-identifier hs-var">reason</span></a></span><span>
</span><span id="line-300"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:trackEvents:EvalEvent :: Bool
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AtrackEvents%3AEvalEvent"><span class="hs-identifier hs-var">trackEvents</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Flag -&gt; Bool
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;trackEvents&quot;</span></span><span> </span><span class="annot"><span class="annottext">Flag
</span><a href="#local-6989586621679669123"><span class="hs-identifier hs-var">flag</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679669116"><span class="hs-identifier hs-var">shouldForceReason</span></a></span><span>
</span><span id="line-301"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:forceIncludeReason:EvalEvent :: Bool
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AforceIncludeReason%3AEvalEvent"><span class="hs-identifier hs-var">forceIncludeReason</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679669116"><span class="hs-identifier hs-var">shouldForceReason</span></a></span><span>
</span><span id="line-302"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:debug:EvalEvent :: Bool
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Adebug%3AEvalEvent"><span class="hs-identifier hs-var">debug</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-303"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:debugEventsUntilDate:EvalEvent :: Maybe Natural
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AdebugEventsUntilDate%3AEvalEvent"><span class="hs-identifier hs-var">debugEventsUntilDate</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Flag -&gt; Maybe Natural
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;debugEventsUntilDate&quot;</span></span><span> </span><span class="annot"><span class="annottext">Flag
</span><a href="#local-6989586621679669123"><span class="hs-identifier hs-var">flag</span></a></span><span>
</span><span id="line-304"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-305"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-306"></span><span>    </span><span id="local-6989586621679669116"><span class="annot"><span class="annottext">shouldForceReason :: Bool
</span><a href="#local-6989586621679669116"><span class="hs-identifier hs-var hs-var">shouldForceReason</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">EvaluationReason
</span><a href="#local-6989586621679669119"><span class="hs-identifier hs-var">reason</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-307"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="LaunchDarkly.Server.Details.html#EvaluationReasonFallthrough"><span class="hs-identifier hs-type">EvaluationReasonFallthrough</span></a></span><span> </span><span id="local-6989586621679669114"><span class="annot"><span class="annottext">inExperiment :: Bool
</span><a href="#local-6989586621679669114"><span class="hs-identifier hs-var">inExperiment</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-308"></span><span>            </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679669114"><span class="hs-identifier hs-var">inExperiment</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Flag -&gt; Bool
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;trackEventsFallthrough&quot;</span></span><span> </span><span class="annot"><span class="annottext">Flag
</span><a href="#local-6989586621679669123"><span class="hs-identifier hs-var">flag</span></a></span><span>
</span><span id="line-309"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="LaunchDarkly.Server.Details.html#EvaluationReasonRuleMatch"><span class="hs-identifier hs-type">EvaluationReasonRuleMatch</span></a></span><span> </span><span id="local-6989586621679669112"><span class="annot"><span class="annottext">idx :: Natural
</span><a href="#local-6989586621679669112"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621679669111"><span class="annot"><span class="annottext">inExperiment :: Bool
</span><a href="#local-6989586621679669111"><span class="hs-identifier hs-var">inExperiment</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-310"></span><span>            </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679669111"><span class="hs-identifier hs-var">inExperiment</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Rule -&gt; Bool
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;trackEvents&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Flag -&gt; [Rule]
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;rules&quot;</span></span><span> </span><span class="annot"><span class="annottext">Flag
</span><a href="#local-6989586621679669123"><span class="hs-identifier hs-var">flag</span></a></span><span> </span><span class="annot"><span class="annottext">[Rule] -&gt; Int -&gt; Rule
forall a. [a] -&gt; Int -&gt; a
</span><span class="hs-operator hs-var">!!</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679669112"><span class="hs-identifier hs-var">idx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-311"></span><span>        </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-312"></span><span>
</span><span id="line-313"></span><span class="annot"><a href="LaunchDarkly.Server.Events.html#makeSummaryKey"><span class="hs-identifier hs-type">makeSummaryKey</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EvalEvent"><span class="hs-identifier hs-type">EvalEvent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-314"></span><span id="makeSummaryKey"><span class="annot"><span class="annottext">makeSummaryKey :: EvalEvent -&gt; Text
</span><a href="LaunchDarkly.Server.Events.html#makeSummaryKey"><span class="hs-identifier hs-var hs-var">makeSummaryKey</span></a></span></span><span> </span><span id="local-6989586621679669108"><span class="annot"><span class="annottext">event :: EvalEvent
</span><a href="#local-6989586621679669108"><span class="hs-identifier hs-var">event</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-315"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; Text
</span><span class="hs-identifier hs-var">T.intercalate</span></span><span>
</span><span id="line-316"></span><span>        </span><span class="annot"><span class="hs-string">&quot;-&quot;</span></span><span>
</span><span id="line-317"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Text -&gt; Text
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Text -&gt; Text) -&gt; Maybe Text -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; Text) -&gt; Maybe Natural -&gt; Maybe Text
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; (Natural -&gt; String) -&gt; Natural -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe Natural -&gt; Maybe Text) -&gt; Maybe Natural -&gt; Maybe Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent -&gt; Maybe Natural
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;version&quot;</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669108"><span class="hs-identifier hs-var">event</span></a></span><span>
</span><span id="line-318"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Text -&gt; Text
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Text -&gt; Text) -&gt; Maybe Text -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Text) -&gt; Maybe Integer -&gt; Maybe Text
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; (Integer -&gt; String) -&gt; Integer -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe Integer -&gt; Maybe Text) -&gt; Maybe Integer -&gt; Maybe Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent -&gt; Maybe Integer
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;variation&quot;</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669108"><span class="hs-identifier hs-var">event</span></a></span><span>
</span><span id="line-319"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-320"></span><span>
</span><span id="line-321"></span><span class="annot"><a href="LaunchDarkly.Server.Events.html#summarizeEvent"><span class="hs-identifier hs-type">summarizeEvent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="LaunchDarkly.AesonCompat.html#KeyMap"><span class="hs-identifier hs-type">KeyMap</span></a></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#FlagSummaryContext"><span class="hs-identifier hs-type">FlagSummaryContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EvalEvent"><span class="hs-identifier hs-type">EvalEvent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.AesonCompat.html#KeyMap"><span class="hs-identifier hs-type">KeyMap</span></a></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#FlagSummaryContext"><span class="hs-identifier hs-type">FlagSummaryContext</span></a></span><span>
</span><span id="line-322"></span><span id="summarizeEvent"><span class="annot"><span class="annottext">summarizeEvent :: KeyMap FlagSummaryContext
-&gt; EvalEvent -&gt; Bool -&gt; KeyMap FlagSummaryContext
</span><a href="LaunchDarkly.Server.Events.html#summarizeEvent"><span class="hs-identifier hs-var hs-var">summarizeEvent</span></a></span></span><span> </span><span id="local-6989586621679669103"><span class="annot"><span class="annottext">summaryContext :: KeyMap FlagSummaryContext
</span><a href="#local-6989586621679669103"><span class="hs-identifier hs-var">summaryContext</span></a></span></span><span> </span><span id="local-6989586621679669102"><span class="annot"><span class="annottext">event :: EvalEvent
</span><a href="#local-6989586621679669102"><span class="hs-identifier hs-var">event</span></a></span></span><span> </span><span id="local-6989586621679669101"><span class="annot"><span class="annottext">unknown :: Bool
</span><a href="#local-6989586621679669101"><span class="hs-identifier hs-var">unknown</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">KeyMap FlagSummaryContext
</span><a href="#local-6989586621679669100"><span class="hs-identifier hs-var">result</span></a></span><span>
</span><span id="line-323"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-324"></span><span>    </span><span id="local-6989586621679669099"><span class="annot"><span class="annottext">key :: Text
</span><a href="#local-6989586621679669099"><span class="hs-identifier hs-var hs-var">key</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvalEvent -&gt; Text
</span><a href="LaunchDarkly.Server.Events.html#makeSummaryKey"><span class="hs-identifier hs-var">makeSummaryKey</span></a></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669102"><span class="hs-identifier hs-var">event</span></a></span><span>
</span><span id="line-325"></span><span>    </span><span id="local-6989586621679669098"><span class="annot"><span class="annottext">contextKinds :: HashSet Text
</span><a href="#local-6989586621679669098"><span class="hs-identifier hs-var hs-var">contextKinds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; HashSet Text
forall a. (Eq a, Hashable a) =&gt; [a] -&gt; HashSet a
</span><span class="hs-identifier hs-var">HS.fromList</span></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; HashSet Text) -&gt; [Text] -&gt; HashSet Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Context -&gt; [Text]
</span><a href="LaunchDarkly.Server.Context.Internal.html#getKinds"><span class="hs-identifier hs-var">getKinds</span></a></span><span> </span><span class="annot"><span class="annottext">(Context -&gt; [Text]) -&gt; Context -&gt; [Text]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent -&gt; Context
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;context&quot;</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669102"><span class="hs-identifier hs-var">event</span></a></span><span>
</span><span id="line-326"></span><span>    </span><span id="local-6989586621679669096"><span class="annot"><span class="annottext">root :: FlagSummaryContext
</span><a href="#local-6989586621679669096"><span class="hs-identifier hs-var hs-var">root</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; KeyMap FlagSummaryContext -&gt; Maybe FlagSummaryContext
forall v. Text -&gt; HashMap Text v -&gt; Maybe v
</span><a href="LaunchDarkly.AesonCompat.html#lookupKey"><span class="hs-identifier hs-var">lookupKey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvalEvent -&gt; Text
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;key&quot;</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669102"><span class="hs-identifier hs-var">event</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">KeyMap FlagSummaryContext
</span><a href="#local-6989586621679669103"><span class="hs-identifier hs-var">summaryContext</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-327"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679669095"><span class="annot"><span class="annottext">x :: FlagSummaryContext
</span><a href="#local-6989586621679669095"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FlagSummaryContext
</span><a href="#local-6989586621679669095"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-328"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-329"></span><span>            </span><span class="annot"><span class="annottext">FlagSummaryContext :: Maybe Value
-&gt; KeyMap CounterContext -&gt; HashSet Text -&gt; FlagSummaryContext
</span><a href="LaunchDarkly.Server.Events.html#FlagSummaryContext"><span class="hs-identifier hs-type hs-type">FlagSummaryContext</span></a></span><span>
</span><span id="line-330"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:defaultValue:FlagSummaryContext :: Maybe Value
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AdefaultValue%3AFlagSummaryContext"><span class="hs-identifier hs-var">defaultValue</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvalEvent -&gt; Maybe Value
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;defaultValue&quot;</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669102"><span class="hs-identifier hs-var">event</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-331"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:counters:FlagSummaryContext :: KeyMap CounterContext
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Acounters%3AFlagSummaryContext"><span class="hs-identifier hs-var">counters</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">KeyMap CounterContext
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-332"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:contextKinds:FlagSummaryContext :: HashSet Text
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3AcontextKinds%3AFlagSummaryContext"><span class="hs-identifier hs-var">contextKinds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashSet Text
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-333"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-334"></span><span>    </span><span id="local-6989586621679669093"><span class="annot"><span class="annottext">leaf :: CounterContext
</span><a href="#local-6989586621679669093"><span class="hs-identifier hs-var hs-var">leaf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; KeyMap CounterContext -&gt; Maybe CounterContext
forall v. Text -&gt; HashMap Text v -&gt; Maybe v
</span><a href="LaunchDarkly.AesonCompat.html#lookupKey"><span class="hs-identifier hs-var">lookupKey</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679669099"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FlagSummaryContext -&gt; KeyMap CounterContext
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;counters&quot;</span></span><span> </span><span class="annot"><span class="annottext">FlagSummaryContext
</span><a href="#local-6989586621679669096"><span class="hs-identifier hs-var">root</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-335"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679669092"><span class="annot"><span class="annottext">x :: CounterContext
</span><a href="#local-6989586621679669092"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CounterContext
</span><a href="#local-6989586621679669092"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CounterContext
-&gt; (CounterContext -&gt; CounterContext) -&gt; CounterContext
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall s t a b. HasField &quot;count&quot; s t a b =&gt; Lens s t a b
forall (field :: Symbol) s t a b.
HasField field s t a b =&gt;
Lens s t a b
</span><span class="hs-identifier hs-var">field</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;count&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Natural -&gt; Identity Natural)
 -&gt; CounterContext -&gt; Identity CounterContext)
-&gt; (Natural -&gt; Natural) -&gt; CounterContext -&gt; CounterContext
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-operator hs-var">%~</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="hs-special">)</span><span>
</span><span id="line-336"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-337"></span><span>            </span><span class="annot"><span class="annottext">$WCounterContext :: Natural
-&gt; Maybe Natural
-&gt; Maybe Integer
-&gt; Value
-&gt; Bool
-&gt; CounterContext
</span><a href="LaunchDarkly.Server.Events.html#%24WCounterContext"><span class="hs-identifier hs-type hs-type">CounterContext</span></a></span><span>
</span><span id="line-338"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:count:CounterContext :: Natural
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Acount%3ACounterContext"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-number">1</span></span><span>
</span><span id="line-339"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:version:CounterContext :: Maybe Natural
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Aversion%3ACounterContext"><span class="hs-identifier hs-var">version</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvalEvent -&gt; Maybe Natural
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;version&quot;</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669102"><span class="hs-identifier hs-var">event</span></a></span><span>
</span><span id="line-340"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:variation:CounterContext :: Maybe Integer
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Avariation%3ACounterContext"><span class="hs-identifier hs-var">variation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvalEvent -&gt; Maybe Integer
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;variation&quot;</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669102"><span class="hs-identifier hs-var">event</span></a></span><span>
</span><span id="line-341"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:value:CounterContext :: Value
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Avalue%3ACounterContext"><span class="hs-identifier hs-var">value</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvalEvent -&gt; Value
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;value&quot;</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669102"><span class="hs-identifier hs-var">event</span></a></span><span>
</span><span id="line-342"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:unknown:CounterContext :: Bool
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Aunknown%3ACounterContext"><span class="hs-identifier hs-var">unknown</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679669101"><span class="hs-identifier hs-var">unknown</span></a></span><span>
</span><span id="line-343"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-344"></span><span>    </span><span id="local-6989586621679669100"><span class="annot"><span class="annottext">result :: KeyMap FlagSummaryContext
</span><a href="#local-6989586621679669100"><span class="hs-identifier hs-var hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(FlagSummaryContext
 -&gt; KeyMap FlagSummaryContext -&gt; KeyMap FlagSummaryContext)
-&gt; KeyMap FlagSummaryContext
-&gt; FlagSummaryContext
-&gt; KeyMap FlagSummaryContext
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
-&gt; FlagSummaryContext
-&gt; KeyMap FlagSummaryContext
-&gt; KeyMap FlagSummaryContext
forall v. Text -&gt; v -&gt; HashMap Text v -&gt; HashMap Text v
</span><a href="LaunchDarkly.AesonCompat.html#insertKey"><span class="hs-identifier hs-var">insertKey</span></a></span><span> </span><span class="annot"><span class="annottext">(Text
 -&gt; FlagSummaryContext
 -&gt; KeyMap FlagSummaryContext
 -&gt; KeyMap FlagSummaryContext)
-&gt; Text
-&gt; FlagSummaryContext
-&gt; KeyMap FlagSummaryContext
-&gt; KeyMap FlagSummaryContext
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent -&gt; Text
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;key&quot;</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669102"><span class="hs-identifier hs-var">event</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">KeyMap FlagSummaryContext
</span><a href="#local-6989586621679669103"><span class="hs-identifier hs-var">summaryContext</span></a></span><span> </span><span class="annot"><span class="annottext">(FlagSummaryContext -&gt; KeyMap FlagSummaryContext)
-&gt; FlagSummaryContext -&gt; KeyMap FlagSummaryContext
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FlagSummaryContext
</span><a href="#local-6989586621679669096"><span class="hs-identifier hs-var">root</span></a></span><span> </span><span class="annot"><span class="annottext">FlagSummaryContext
-&gt; (FlagSummaryContext -&gt; FlagSummaryContext) -&gt; FlagSummaryContext
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall s t a b. HasField &quot;counters&quot; s t a b =&gt; Lens s t a b
forall (field :: Symbol) s t a b.
HasField field s t a b =&gt;
Lens s t a b
</span><span class="hs-identifier hs-var">field</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;counters&quot;</span></span><span> </span><span class="annot"><span class="annottext">((KeyMap CounterContext -&gt; Identity (KeyMap CounterContext))
 -&gt; FlagSummaryContext -&gt; Identity FlagSummaryContext)
-&gt; (KeyMap CounterContext -&gt; KeyMap CounterContext)
-&gt; FlagSummaryContext
-&gt; FlagSummaryContext
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-operator hs-var">%~</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
-&gt; CounterContext -&gt; KeyMap CounterContext -&gt; KeyMap CounterContext
forall v. Text -&gt; v -&gt; HashMap Text v -&gt; HashMap Text v
</span><a href="LaunchDarkly.AesonCompat.html#insertKey"><span class="hs-identifier hs-var">insertKey</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679669099"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="annot"><span class="annottext">CounterContext
</span><a href="#local-6989586621679669093"><span class="hs-identifier hs-var">leaf</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FlagSummaryContext
-&gt; (FlagSummaryContext -&gt; FlagSummaryContext) -&gt; FlagSummaryContext
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall s t a b. HasField &quot;contextKinds&quot; s t a b =&gt; Lens s t a b
forall (field :: Symbol) s t a b.
HasField field s t a b =&gt;
Lens s t a b
</span><span class="hs-identifier hs-var">field</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;contextKinds&quot;</span></span><span> </span><span class="annot"><span class="annottext">((HashSet Text -&gt; Identity (HashSet Text))
 -&gt; FlagSummaryContext -&gt; Identity FlagSummaryContext)
-&gt; (HashSet Text -&gt; HashSet Text)
-&gt; FlagSummaryContext
-&gt; FlagSummaryContext
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-operator hs-var">%~</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashSet Text -&gt; HashSet Text -&gt; HashSet Text
forall a. (Eq a, Hashable a) =&gt; HashSet a -&gt; HashSet a -&gt; HashSet a
</span><span class="hs-identifier hs-var">HS.union</span></span><span> </span><span class="annot"><span class="annottext">HashSet Text
</span><a href="#local-6989586621679669098"><span class="hs-identifier hs-var">contextKinds</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-345"></span><span>
</span><span id="line-346"></span><span id="local-6989586621679669087"><span class="annot"><a href="LaunchDarkly.Server.Events.html#putIfEmptyMVar"><span class="hs-identifier hs-type">putIfEmptyMVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MVar</span></span><span> </span><span class="annot"><a href="#local-6989586621679669087"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679669087"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-347"></span><span id="putIfEmptyMVar"><span class="annot"><span class="annottext">putIfEmptyMVar :: MVar a -&gt; a -&gt; IO ()
</span><a href="LaunchDarkly.Server.Events.html#putIfEmptyMVar"><span class="hs-identifier hs-var hs-var">putIfEmptyMVar</span></a></span></span><span> </span><span id="local-6989586621679669085"><span class="annot"><span class="annottext">mvar :: MVar a
</span><a href="#local-6989586621679669085"><span class="hs-identifier hs-var">mvar</span></a></span></span><span> </span><span id="local-6989586621679669084"><span class="annot"><span class="annottext">value :: a
</span><a href="#local-6989586621679669084"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MVar a -&gt; IO (Maybe a)
forall a. MVar a -&gt; IO (Maybe a)
</span><span class="hs-identifier hs-var">tryTakeMVar</span></span><span> </span><span class="annot"><span class="annottext">MVar a
</span><a href="#local-6989586621679669085"><span class="hs-identifier hs-var">mvar</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Maybe a) -&gt; (Maybe a -&gt; IO ()) -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679669083"><span class="annot"><span class="annottext">x :: a
</span><a href="#local-6989586621679669083"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MVar a -&gt; a -&gt; IO ()
forall a. MVar a -&gt; a -&gt; IO ()
</span><span class="hs-identifier hs-var">putMVar</span></span><span> </span><span class="annot"><span class="annottext">MVar a
</span><a href="#local-6989586621679669085"><span class="hs-identifier hs-var">mvar</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679669083"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MVar a -&gt; a -&gt; IO ()
forall a. MVar a -&gt; a -&gt; IO ()
</span><span class="hs-identifier hs-var">putMVar</span></span><span> </span><span class="annot"><span class="annottext">MVar a
</span><a href="#local-6989586621679669085"><span class="hs-identifier hs-var">mvar</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679669084"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span class="annot"><a href="LaunchDarkly.Server.Events.html#runSummary"><span class="hs-identifier hs-type">runSummary</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventState"><span class="hs-identifier hs-type">EventState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EvalEvent"><span class="hs-identifier hs-type">EvalEvent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-350"></span><span id="runSummary"><span class="annot"><span class="annottext">runSummary :: Natural -&gt; EventState -&gt; EvalEvent -&gt; Bool -&gt; IO ()
</span><a href="LaunchDarkly.Server.Events.html#runSummary"><span class="hs-identifier hs-var hs-var">runSummary</span></a></span></span><span> </span><span id="local-6989586621679669081"><span class="annot"><span class="annottext">now :: Natural
</span><a href="#local-6989586621679669081"><span class="hs-identifier hs-var">now</span></a></span></span><span> </span><span id="local-6989586621679669080"><span class="annot"><span class="annottext">state :: EventState
</span><a href="#local-6989586621679669080"><span class="hs-identifier hs-var">state</span></a></span></span><span> </span><span id="local-6989586621679669079"><span class="annot"><span class="annottext">event :: EvalEvent
</span><a href="#local-6989586621679669079"><span class="hs-identifier hs-var">event</span></a></span></span><span> </span><span id="local-6989586621679669078"><span class="annot"><span class="annottext">unknown :: Bool
</span><a href="#local-6989586621679669078"><span class="hs-identifier hs-var">unknown</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-351"></span><span>    </span><span class="annot"><span class="annottext">MVar Natural -&gt; Natural -&gt; IO ()
forall a. MVar a -&gt; a -&gt; IO ()
</span><a href="LaunchDarkly.Server.Events.html#putIfEmptyMVar"><span class="hs-identifier hs-var">putIfEmptyMVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EventState -&gt; MVar Natural
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;startDate&quot;</span></span><span> </span><span class="annot"><span class="annottext">EventState
</span><a href="#local-6989586621679669080"><span class="hs-identifier hs-var">state</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679669081"><span class="hs-identifier hs-var">now</span></a></span><span>
</span><span id="line-352"></span><span>        </span><span class="annot"><span class="annottext">IO () -&gt; IO () -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">MVar (KeyMap FlagSummaryContext)
-&gt; (KeyMap FlagSummaryContext -&gt; IO (KeyMap FlagSummaryContext))
-&gt; IO ()
forall a. MVar a -&gt; (a -&gt; IO a) -&gt; IO ()
</span><span class="hs-identifier hs-var">modifyMVar_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EventState -&gt; MVar (KeyMap FlagSummaryContext)
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;summary&quot;</span></span><span> </span><span class="annot"><span class="annottext">EventState
</span><a href="#local-6989586621679669080"><span class="hs-identifier hs-var">state</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679669077"><span class="annot"><span class="annottext">summary :: KeyMap FlagSummaryContext
</span><a href="#local-6989586621679669077"><span class="hs-identifier hs-var">summary</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">KeyMap FlagSummaryContext -&gt; IO (KeyMap FlagSummaryContext)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(KeyMap FlagSummaryContext -&gt; IO (KeyMap FlagSummaryContext))
-&gt; KeyMap FlagSummaryContext -&gt; IO (KeyMap FlagSummaryContext)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">KeyMap FlagSummaryContext
-&gt; EvalEvent -&gt; Bool -&gt; KeyMap FlagSummaryContext
</span><a href="LaunchDarkly.Server.Events.html#summarizeEvent"><span class="hs-identifier hs-var">summarizeEvent</span></a></span><span> </span><span class="annot"><span class="annottext">KeyMap FlagSummaryContext
</span><a href="#local-6989586621679669077"><span class="hs-identifier hs-var">summary</span></a></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669079"><span class="hs-identifier hs-var">event</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679669078"><span class="hs-identifier hs-var">unknown</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-353"></span><span>
</span><span id="line-354"></span><span class="annot"><a href="LaunchDarkly.Server.Events.html#processEvalEvent"><span class="hs-identifier hs-type">processEvalEvent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Config.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventState"><span class="hs-identifier hs-type">EventState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Context.Internal.html#Context"><span class="hs-identifier hs-type">Context</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EvalEvent"><span class="hs-identifier hs-type">EvalEvent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-355"></span><span id="processEvalEvent"><span class="annot"><span class="annottext">processEvalEvent :: Natural
-&gt; Config
-&gt; EventState
-&gt; Context
-&gt; Bool
-&gt; Bool
-&gt; EvalEvent
-&gt; IO ()
</span><a href="LaunchDarkly.Server.Events.html#processEvalEvent"><span class="hs-identifier hs-var hs-var">processEvalEvent</span></a></span></span><span> </span><span id="local-6989586621679669075"><span class="annot"><span class="annottext">now :: Natural
</span><a href="#local-6989586621679669075"><span class="hs-identifier hs-var">now</span></a></span></span><span> </span><span id="local-6989586621679669074"><span class="annot"><span class="annottext">config :: Config
</span><a href="#local-6989586621679669074"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span id="local-6989586621679669073"><span class="annot"><span class="annottext">state :: EventState
</span><a href="#local-6989586621679669073"><span class="hs-identifier hs-var">state</span></a></span></span><span> </span><span id="local-6989586621679669072"><span class="annot"><span class="annottext">context :: Context
</span><a href="#local-6989586621679669072"><span class="hs-identifier hs-var">context</span></a></span></span><span> </span><span id="local-6989586621679669071"><span class="annot"><span class="annottext">includeReason :: Bool
</span><a href="#local-6989586621679669071"><span class="hs-identifier hs-var">includeReason</span></a></span></span><span> </span><span id="local-6989586621679669070"><span class="annot"><span class="annottext">unknown :: Bool
</span><a href="#local-6989586621679669070"><span class="hs-identifier hs-var">unknown</span></a></span></span><span> </span><span id="local-6989586621679669069"><span class="annot"><span class="annottext">event :: EvalEvent
</span><a href="#local-6989586621679669069"><span class="hs-identifier hs-var">event</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-356"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679669068"><span class="annot"><span class="annottext">featureEvent :: FeatureEvent
</span><a href="#local-6989586621679669068"><span class="hs-identifier hs-var hs-var">featureEvent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Config -&gt; Context -&gt; Bool -&gt; EvalEvent -&gt; FeatureEvent
</span><a href="LaunchDarkly.Server.Events.html#makeFeatureEvent"><span class="hs-identifier hs-var">makeFeatureEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679669074"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679669072"><span class="hs-identifier hs-var">context</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679669071"><span class="hs-identifier hs-var">includeReason</span></a></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669069"><span class="hs-identifier hs-var">event</span></a></span><span>
</span><span id="line-357"></span><span>        </span><span id="local-6989586621679669067"><span class="annot"><span class="annottext">trackEvents :: Bool
</span><a href="#local-6989586621679669067"><span class="hs-identifier hs-var hs-var">trackEvents</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvalEvent -&gt; Bool
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;trackEvents&quot;</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669069"><span class="hs-identifier hs-var">event</span></a></span><span>
</span><span id="line-358"></span><span>        </span><span id="local-6989586621679669066"><span class="annot"><span class="annottext">debugEventsUntilDate :: Natural
</span><a href="#local-6989586621679669066"><span class="hs-identifier hs-var hs-var">debugEventsUntilDate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Maybe Natural -&gt; Natural
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvalEvent -&gt; Maybe Natural
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;debugEventsUntilDate&quot;</span></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669069"><span class="hs-identifier hs-var">event</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-359"></span><span>    </span><span id="local-6989586621679669065"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679669065"><span class="hs-identifier hs-var">lastKnownServerTime</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Natural
</span><span class="hs-identifier hs-var">naturalFromInteger</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Natural) -&gt; (Integer -&gt; Integer) -&gt; Integer -&gt; Natural
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="hs-number">1000</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Natural) -&gt; IO Integer -&gt; IO Natural
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">MVar Integer -&gt; IO Integer
forall a. MVar a -&gt; IO a
</span><span class="hs-identifier hs-var">readMVar</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EventState -&gt; MVar Integer
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;lastKnownServerTime&quot;</span></span><span> </span><span class="annot"><span class="annottext">EventState
</span><a href="#local-6989586621679669073"><span class="hs-identifier hs-var">state</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-360"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679669067"><span class="hs-identifier hs-var">trackEvents</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-361"></span><span>        </span><span class="annot"><span class="annottext">Config -&gt; EventState -&gt; EventType -&gt; IO ()
</span><a href="LaunchDarkly.Server.Events.html#queueEvent"><span class="hs-identifier hs-var">queueEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679669074"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">EventState
</span><a href="#local-6989586621679669073"><span class="hs-identifier hs-var">state</span></a></span><span> </span><span class="annot"><span class="annottext">(EventType -&gt; IO ()) -&gt; EventType -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-362"></span><span>            </span><span class="annot"><span class="annottext">BaseEvent FeatureEvent -&gt; EventType
</span><a href="LaunchDarkly.Server.Events.html#EventTypeFeature"><span class="hs-identifier hs-var">EventTypeFeature</span></a></span><span> </span><span class="annot"><span class="annottext">(BaseEvent FeatureEvent -&gt; EventType)
-&gt; BaseEvent FeatureEvent -&gt; EventType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-363"></span><span>                </span><span class="annot"><span class="annottext">Natural -&gt; FeatureEvent -&gt; BaseEvent FeatureEvent
forall event. Natural -&gt; event -&gt; BaseEvent event
</span><a href="LaunchDarkly.Server.Events.html#BaseEvent"><span class="hs-identifier hs-var">BaseEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679669075"><span class="hs-identifier hs-var">now</span></a></span><span> </span><span class="annot"><span class="annottext">FeatureEvent
</span><a href="#local-6989586621679669068"><span class="hs-identifier hs-var">featureEvent</span></a></span><span>
</span><span id="line-364"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679669075"><span class="hs-identifier hs-var">now</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679669066"><span class="hs-identifier hs-var">debugEventsUntilDate</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679669065"><span class="hs-identifier hs-var">lastKnownServerTime</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679669066"><span class="hs-identifier hs-var">debugEventsUntilDate</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-365"></span><span>        </span><span class="annot"><span class="annottext">Config -&gt; EventState -&gt; EventType -&gt; IO ()
</span><a href="LaunchDarkly.Server.Events.html#queueEvent"><span class="hs-identifier hs-var">queueEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679669074"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">EventState
</span><a href="#local-6989586621679669073"><span class="hs-identifier hs-var">state</span></a></span><span> </span><span class="annot"><span class="annottext">(EventType -&gt; IO ()) -&gt; EventType -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-366"></span><span>            </span><span class="annot"><span class="annottext">BaseEvent DebugEvent -&gt; EventType
</span><a href="LaunchDarkly.Server.Events.html#EventTypeDebug"><span class="hs-identifier hs-var">EventTypeDebug</span></a></span><span> </span><span class="annot"><span class="annottext">(BaseEvent DebugEvent -&gt; EventType)
-&gt; BaseEvent DebugEvent -&gt; EventType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-367"></span><span>                </span><span class="annot"><span class="annottext">Natural -&gt; DebugEvent -&gt; BaseEvent DebugEvent
forall event. Natural -&gt; event -&gt; BaseEvent event
</span><a href="LaunchDarkly.Server.Events.html#BaseEvent"><span class="hs-identifier hs-var">BaseEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679669075"><span class="hs-identifier hs-var">now</span></a></span><span> </span><span class="annot"><span class="annottext">(DebugEvent -&gt; BaseEvent DebugEvent)
-&gt; DebugEvent -&gt; BaseEvent DebugEvent
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-368"></span><span>                    </span><span class="annot"><span class="annottext">Config -&gt; Context -&gt; Bool -&gt; EvalEvent -&gt; DebugEvent
</span><a href="LaunchDarkly.Server.Events.html#makeDebugEvent"><span class="hs-identifier hs-var">makeDebugEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679669074"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679669072"><span class="hs-identifier hs-var">context</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679669071"><span class="hs-identifier hs-var">includeReason</span></a></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669069"><span class="hs-identifier hs-var">event</span></a></span><span>
</span><span id="line-369"></span><span>    </span><span class="annot"><span class="annottext">Natural -&gt; EventState -&gt; EvalEvent -&gt; Bool -&gt; IO ()
</span><a href="LaunchDarkly.Server.Events.html#runSummary"><span class="hs-identifier hs-var">runSummary</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679669075"><span class="hs-identifier hs-var">now</span></a></span><span> </span><span class="annot"><span class="annottext">EventState
</span><a href="#local-6989586621679669073"><span class="hs-identifier hs-var">state</span></a></span><span> </span><span class="annot"><span class="annottext">EvalEvent
</span><a href="#local-6989586621679669069"><span class="hs-identifier hs-var">event</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679669070"><span class="hs-identifier hs-var">unknown</span></a></span><span>
</span><span id="line-370"></span><span>    </span><span class="annot"><span class="annottext">Natural -&gt; Config -&gt; Context -&gt; EventState -&gt; IO ()
</span><a href="LaunchDarkly.Server.Events.html#maybeIndexContext"><span class="hs-identifier hs-var">maybeIndexContext</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679669075"><span class="hs-identifier hs-var">now</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679669074"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679669072"><span class="hs-identifier hs-var">context</span></a></span><span> </span><span class="annot"><span class="annottext">EventState
</span><a href="#local-6989586621679669073"><span class="hs-identifier hs-var">state</span></a></span><span>
</span><span id="line-371"></span><span>
</span><span id="line-372"></span><span class="annot"><a href="LaunchDarkly.Server.Events.html#processEvalEvents"><span class="hs-identifier hs-type">processEvalEvents</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Config.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventState"><span class="hs-identifier hs-type">EventState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Context.Internal.html#Context"><span class="hs-identifier hs-type">Context</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EvalEvent"><span class="hs-identifier hs-type">EvalEvent</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-373"></span><span id="processEvalEvents"><span class="annot"><span class="annottext">processEvalEvents :: Config
-&gt; EventState -&gt; Context -&gt; Bool -&gt; [EvalEvent] -&gt; Bool -&gt; IO ()
</span><a href="LaunchDarkly.Server.Events.html#processEvalEvents"><span class="hs-identifier hs-var hs-var">processEvalEvents</span></a></span></span><span> </span><span id="local-6989586621679669061"><span class="annot"><span class="annottext">config :: Config
</span><a href="#local-6989586621679669061"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span id="local-6989586621679669060"><span class="annot"><span class="annottext">state :: EventState
</span><a href="#local-6989586621679669060"><span class="hs-identifier hs-var">state</span></a></span></span><span> </span><span id="local-6989586621679669059"><span class="annot"><span class="annottext">context :: Context
</span><a href="#local-6989586621679669059"><span class="hs-identifier hs-var">context</span></a></span></span><span> </span><span id="local-6989586621679669058"><span class="annot"><span class="annottext">includeReason :: Bool
</span><a href="#local-6989586621679669058"><span class="hs-identifier hs-var">includeReason</span></a></span></span><span> </span><span id="local-6989586621679669057"><span class="annot"><span class="annottext">events :: [EvalEvent]
</span><a href="#local-6989586621679669057"><span class="hs-identifier hs-var">events</span></a></span></span><span> </span><span id="local-6989586621679669056"><span class="annot"><span class="annottext">unknown :: Bool
</span><a href="#local-6989586621679669056"><span class="hs-identifier hs-var">unknown</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-374"></span><span>    </span><span class="annot"><span class="annottext">IO Natural
</span><a href="LaunchDarkly.Server.Events.html#unixMilliseconds"><span class="hs-identifier hs-var">unixMilliseconds</span></a></span><span> </span><span class="annot"><span class="annottext">IO Natural -&gt; (Natural -&gt; IO ()) -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679669055"><span class="annot"><span class="annottext">now :: Natural
</span><a href="#local-6989586621679669055"><span class="hs-identifier hs-var">now</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(EvalEvent -&gt; IO ()) -&gt; [EvalEvent] -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
-&gt; Config
-&gt; EventState
-&gt; Context
-&gt; Bool
-&gt; Bool
-&gt; EvalEvent
-&gt; IO ()
</span><a href="LaunchDarkly.Server.Events.html#processEvalEvent"><span class="hs-identifier hs-var">processEvalEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679669055"><span class="hs-identifier hs-var">now</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679669061"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">EventState
</span><a href="#local-6989586621679669060"><span class="hs-identifier hs-var">state</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679669059"><span class="hs-identifier hs-var">context</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679669058"><span class="hs-identifier hs-var">includeReason</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679669056"><span class="hs-identifier hs-var">unknown</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[EvalEvent]
</span><a href="#local-6989586621679669057"><span class="hs-identifier hs-var">events</span></a></span><span>
</span><span id="line-375"></span><span>
</span><span id="line-376"></span><span class="annot"><a href="LaunchDarkly.Server.Events.html#maybeIndexContext"><span class="hs-identifier hs-type">maybeIndexContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Config.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Context.Internal.html#Context"><span class="hs-identifier hs-type">Context</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventState"><span class="hs-identifier hs-type">EventState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-377"></span><span id="maybeIndexContext"><span class="annot"><span class="annottext">maybeIndexContext :: Natural -&gt; Config -&gt; Context -&gt; EventState -&gt; IO ()
</span><a href="LaunchDarkly.Server.Events.html#maybeIndexContext"><span class="hs-identifier hs-var hs-var">maybeIndexContext</span></a></span></span><span> </span><span id="local-6989586621679669053"><span class="annot"><span class="annottext">now :: Natural
</span><a href="#local-6989586621679669053"><span class="hs-identifier hs-var">now</span></a></span></span><span> </span><span id="local-6989586621679669052"><span class="annot"><span class="annottext">config :: Config
</span><a href="#local-6989586621679669052"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span id="local-6989586621679669051"><span class="annot"><span class="annottext">context :: Context
</span><a href="#local-6989586621679669051"><span class="hs-identifier hs-var">context</span></a></span></span><span> </span><span id="local-6989586621679669050"><span class="annot"><span class="annottext">state :: EventState
</span><a href="#local-6989586621679669050"><span class="hs-identifier hs-var">state</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-378"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Config -&gt; Context -&gt; Context
</span><a href="LaunchDarkly.Server.Context.Internal.html#optionallyRedactAnonymous"><span class="hs-identifier hs-var">optionallyRedactAnonymous</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679669052"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679669051"><span class="hs-identifier hs-var">context</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-379"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="LaunchDarkly.Server.Context.Internal.html#Invalid"><span class="hs-identifier hs-type">Invalid</span></a></span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-380"></span><span>        </span><span id="local-6989586621679669049"><span class="annot"><span class="annottext">ctx :: Context
</span><a href="#local-6989586621679669049"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-381"></span><span>            </span><span id="local-6989586621679669048"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679669048"><span class="hs-identifier hs-var">noticedContext</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">EventState -&gt; Context -&gt; IO Bool
</span><a href="LaunchDarkly.Server.Events.html#noticeContext"><span class="hs-identifier hs-var">noticeContext</span></a></span><span> </span><span class="annot"><span class="annottext">EventState
</span><a href="#local-6989586621679669050"><span class="hs-identifier hs-var">state</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679669049"><span class="hs-identifier hs-var">ctx</span></a></span><span>
</span><span id="line-382"></span><span>            </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679669048"><span class="hs-identifier hs-var">noticedContext</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-383"></span><span>                </span><span class="annot"><span class="annottext">Config -&gt; EventState -&gt; EventType -&gt; IO ()
</span><a href="LaunchDarkly.Server.Events.html#queueEvent"><span class="hs-identifier hs-var">queueEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679669052"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">EventState
</span><a href="#local-6989586621679669050"><span class="hs-identifier hs-var">state</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BaseEvent IndexEvent -&gt; EventType
</span><a href="LaunchDarkly.Server.Events.html#EventTypeIndex"><span class="hs-identifier hs-var">EventTypeIndex</span></a></span><span> </span><span class="annot"><span class="annottext">(BaseEvent IndexEvent -&gt; EventType)
-&gt; BaseEvent IndexEvent -&gt; EventType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; IndexEvent -&gt; BaseEvent IndexEvent
forall event. Natural -&gt; event -&gt; BaseEvent event
</span><a href="LaunchDarkly.Server.Events.html#BaseEvent"><span class="hs-identifier hs-var">BaseEvent</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679669053"><span class="hs-identifier hs-var">now</span></a></span><span> </span><span class="annot"><span class="annottext">(IndexEvent -&gt; BaseEvent IndexEvent)
-&gt; IndexEvent -&gt; BaseEvent IndexEvent
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IndexEvent :: Value -&gt; IndexEvent
</span><a href="LaunchDarkly.Server.Events.html#IndexEvent"><span class="hs-identifier hs-type hs-type">IndexEvent</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:context:IndexEvent :: Value
</span><a href="LaunchDarkly.Server.Events.html#%24sel%3Acontext%3AIndexEvent"><span class="hs-identifier hs-var">context</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Config -&gt; Context -&gt; Value
</span><a href="LaunchDarkly.Server.Context.Internal.html#redactContext"><span class="hs-identifier hs-var">redactContext</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679669052"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679669049"><span class="hs-identifier hs-var">ctx</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-384"></span><span>
</span><span id="line-385"></span><span class="annot"><a href="LaunchDarkly.Server.Events.html#noticeContext"><span class="hs-identifier hs-type">noticeContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Events.html#EventState"><span class="hs-identifier hs-type">EventState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Context.Internal.html#Context"><span class="hs-identifier hs-type">Context</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-386"></span><span id="noticeContext"><span class="annot"><span class="annottext">noticeContext :: EventState -&gt; Context -&gt; IO Bool
</span><a href="LaunchDarkly.Server.Events.html#noticeContext"><span class="hs-identifier hs-var hs-var">noticeContext</span></a></span></span><span> </span><span id="local-6989586621679669045"><span class="annot"><span class="annottext">state :: EventState
</span><a href="#local-6989586621679669045"><span class="hs-identifier hs-var">state</span></a></span></span><span> </span><span id="local-6989586621679669044"><span class="annot"><span class="annottext">context :: Context
</span><a href="#local-6989586621679669044"><span class="hs-identifier hs-var">context</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MVar (LRU Text ())
-&gt; (LRU Text () -&gt; IO (LRU Text (), Bool)) -&gt; IO Bool
forall a b. MVar a -&gt; (a -&gt; IO (a, b)) -&gt; IO b
</span><span class="hs-identifier hs-var">modifyMVar</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EventState -&gt; MVar (LRU Text ())
forall (f :: Symbol) a s. HasField' f s a =&gt; s -&gt; a
</span><span class="hs-identifier hs-var">getField</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;contextKeyLRU&quot;</span></span><span> </span><span class="annot"><span class="annottext">EventState
</span><a href="#local-6989586621679669045"><span class="hs-identifier hs-var">state</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((LRU Text () -&gt; IO (LRU Text (), Bool)) -&gt; IO Bool)
-&gt; (LRU Text () -&gt; IO (LRU Text (), Bool)) -&gt; IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679669043"><span class="annot"><span class="annottext">cache :: LRU Text ()
</span><a href="#local-6989586621679669043"><span class="hs-identifier hs-var">cache</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-387"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679669042"><span class="annot"><span class="annottext">key :: Text
</span><a href="#local-6989586621679669042"><span class="hs-identifier hs-var hs-var">key</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Context -&gt; Text
</span><a href="LaunchDarkly.Server.Context.Internal.html#getCanonicalKey"><span class="hs-identifier hs-var">getCanonicalKey</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679669044"><span class="hs-identifier hs-var">context</span></a></span><span>
</span><span id="line-388"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; LRU Text () -&gt; (LRU Text (), Maybe ())
forall key val.
Ord key =&gt;
key -&gt; LRU key val -&gt; (LRU key val, Maybe val)
</span><span class="hs-identifier hs-var">LRU.lookup</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679669042"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="annot"><span class="annottext">LRU Text ()
</span><a href="#local-6989586621679669043"><span class="hs-identifier hs-var">cache</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-389"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679669040"><span class="annot"><span class="annottext">cache' :: LRU Text ()
</span><a href="#local-6989586621679669040"><span class="hs-identifier hs-var">cache'</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(LRU Text (), Bool) -&gt; IO (LRU Text (), Bool)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LRU Text ()
</span><a href="#local-6989586621679669040"><span class="hs-identifier hs-var">cache'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-390"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679669039"><span class="annot"><span class="annottext">cache' :: LRU Text ()
</span><a href="#local-6989586621679669039"><span class="hs-identifier hs-var">cache'</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(LRU Text (), Bool) -&gt; IO (LRU Text (), Bool)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; () -&gt; LRU Text () -&gt; LRU Text ()
forall key val. Ord key =&gt; key -&gt; val -&gt; LRU key val -&gt; LRU key val
</span><span class="hs-identifier hs-var">LRU.insert</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679669042"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LRU Text ()
</span><a href="#local-6989586621679669039"><span class="hs-identifier hs-var">cache'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-391"></span></pre></body></html>
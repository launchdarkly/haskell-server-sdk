<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">LaunchDarkly.Server.Integrations.TestData.FlagBuilder</span><span>
</span><span id="line-4"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier">FlagBuilder</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-5"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#VariationIndex"><span class="hs-identifier">VariationIndex</span></a></span><span>
</span><span id="line-6"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#newFlagBuilder"><span class="hs-identifier">newFlagBuilder</span></a></span><span>
</span><span id="line-7"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#booleanFlag"><span class="hs-identifier">booleanFlag</span></a></span><span>
</span><span id="line-8"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#on"><span class="hs-identifier">on</span></a></span><span>
</span><span id="line-9"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#fallthroughVariation"><span class="hs-identifier">fallthroughVariation</span></a></span><span>
</span><span id="line-10"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#offVariation"><span class="hs-identifier">offVariation</span></a></span><span>
</span><span id="line-11"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForAll"><span class="hs-identifier">variationForAll</span></a></span><span>
</span><span id="line-12"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForAllUsers"><span class="hs-identifier">variationForAllUsers</span></a></span><span>
</span><span id="line-13"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#valueForAll"><span class="hs-identifier">valueForAll</span></a></span><span>
</span><span id="line-14"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#valueForAllUsers"><span class="hs-identifier">valueForAllUsers</span></a></span><span>
</span><span id="line-15"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForKey"><span class="hs-identifier">variationForKey</span></a></span><span>
</span><span id="line-16"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForUser"><span class="hs-identifier">variationForUser</span></a></span><span>
</span><span id="line-17"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variations"><span class="hs-identifier">variations</span></a></span><span>
</span><span id="line-18"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#buildFlag"><span class="hs-identifier">buildFlag</span></a></span><span>
</span><span id="line-19"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#ifMatch"><span class="hs-identifier">ifMatch</span></a></span><span>
</span><span id="line-20"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#ifMatchContext"><span class="hs-identifier">ifMatchContext</span></a></span><span>
</span><span id="line-21"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#ifNotMatch"><span class="hs-identifier">ifNotMatch</span></a></span><span>
</span><span id="line-22"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#ifNotMatchContext"><span class="hs-identifier">ifNotMatchContext</span></a></span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagRuleBuilder"><span class="hs-identifier">FlagRuleBuilder</span></a></span><span>
</span><span id="line-24"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#andMatch"><span class="hs-identifier">andMatch</span></a></span><span>
</span><span id="line-25"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#andMatchContext"><span class="hs-identifier">andMatchContext</span></a></span><span>
</span><span id="line-26"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#andNotMatch"><span class="hs-identifier">andNotMatch</span></a></span><span>
</span><span id="line-27"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#andNotMatchContext"><span class="hs-identifier">andNotMatchContext</span></a></span><span>
</span><span id="line-28"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#thenReturn"><span class="hs-identifier">thenReturn</span></a></span><span>
</span><span id="line-29"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#Variation"><span class="hs-identifier">Variation</span></a></span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">where</span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Aeson</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Function</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(&amp;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashSet</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">HashSet</span></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashSet</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HS</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Map</span></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Natural</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Natural</span></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Features.html"><span class="hs-identifier">LaunchDarkly.Server.Features</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">F</span></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Operators.html"><span class="hs-identifier">LaunchDarkly.Server.Operators</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Op</span></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Reference.html"><span class="hs-identifier">LaunchDarkly.Server.Reference</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="LaunchDarkly.Server.Reference.html#makeReference"><span class="hs-identifier">makeReference</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="hs-keyword">type</span><span> </span><span id="VariationIndex"><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#VariationIndex"><span class="hs-identifier hs-var">VariationIndex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#trueVariationForBoolean"><span class="hs-identifier hs-type">trueVariationForBoolean</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#falseVariationForBoolean"><span class="hs-identifier hs-type">falseVariationForBoolean</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#VariationIndex"><span class="hs-identifier hs-type">VariationIndex</span></a></span><span>
</span><span id="line-49"></span><span id="trueVariationForBoolean"><span class="annot"><span class="annottext">trueVariationForBoolean :: VariationIndex
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#trueVariationForBoolean"><span class="hs-identifier hs-var hs-var">trueVariationForBoolean</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-number">0</span></span><span>
</span><span id="line-50"></span><span id="falseVariationForBoolean"><span class="annot"><span class="annottext">falseVariationForBoolean :: VariationIndex
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#falseVariationForBoolean"><span class="hs-identifier hs-var hs-var">falseVariationForBoolean</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-number">1</span></span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForBoolean"><span class="hs-identifier hs-type">variationForBoolean</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#VariationIndex"><span class="hs-identifier hs-type">VariationIndex</span></a></span><span>
</span><span id="line-53"></span><span id="variationForBoolean"><span class="annot"><span class="annottext">variationForBoolean :: Bool -&gt; VariationIndex
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForBoolean"><span class="hs-identifier hs-var hs-var">variationForBoolean</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VariationIndex
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#trueVariationForBoolean"><span class="hs-identifier hs-var">trueVariationForBoolean</span></a></span><span>
</span><span id="line-54"></span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForBoolean"><span class="hs-identifier hs-var">variationForBoolean</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VariationIndex
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#falseVariationForBoolean"><span class="hs-identifier hs-var">falseVariationForBoolean</span></a></span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-57"></span><span class="hs-comment">-- A builder for feature flag configurations to be used with</span><span>
</span><span id="line-58"></span><span class="hs-comment">-- &quot;LaunchDarkly.Server.Integrations.TestData&quot;.</span><span>
</span><span id="line-59"></span><span class="hs-comment">--</span><span>
</span><span id="line-60"></span><span class="hs-comment">-- see 'LaunchDarkly.Server.Integrations.TestData.flag' and</span><span>
</span><span id="line-61"></span><span class="hs-comment">-- 'LaunchDarkly.Server.Integrations.TestData.update'</span><span>
</span><span id="line-62"></span><span class="hs-keyword">data</span><span> </span><span id="FlagBuilder"><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-var">FlagBuilder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="FlagBuilder"><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-var">FlagBuilder</span></a></span></span><span>
</span><span id="line-63"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AfbKey%3AFlagBuilder"><span class="annot"><span class="annottext">FlagBuilder -&gt; Text
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbKey%3AFlagBuilder"><span class="hs-identifier hs-var hs-var">fbKey</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-64"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AfbOffVariation%3AFlagBuilder"><span class="annot"><span class="annottext">FlagBuilder -&gt; Maybe VariationIndex
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbOffVariation%3AFlagBuilder"><span class="hs-identifier hs-var hs-var">fbOffVariation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#VariationIndex"><span class="hs-identifier hs-type">VariationIndex</span></a></span><span>
</span><span id="line-65"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AfbOn%3AFlagBuilder"><span class="annot"><span class="annottext">FlagBuilder -&gt; Bool
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbOn%3AFlagBuilder"><span class="hs-identifier hs-var hs-var">fbOn</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-66"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AfbFallthroughVariation%3AFlagBuilder"><span class="annot"><span class="annottext">FlagBuilder -&gt; Maybe VariationIndex
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbFallthroughVariation%3AFlagBuilder"><span class="hs-identifier hs-var hs-var">fbFallthroughVariation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#VariationIndex"><span class="hs-identifier hs-type">VariationIndex</span></a></span><span>
</span><span id="line-67"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AfbVariations%3AFlagBuilder"><span class="annot"><span class="annottext">FlagBuilder -&gt; [Value]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbVariations%3AFlagBuilder"><span class="hs-identifier hs-var hs-var">fbVariations</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span class="hs-special">]</span><span>
</span><span id="line-68"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AfbTargetMap%3AFlagBuilder"><span class="annot"><span class="annottext">FlagBuilder -&gt; Map Text (Map VariationIndex (HashSet Text))
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbTargetMap%3AFlagBuilder"><span class="hs-identifier hs-var hs-var">fbTargetMap</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#VariationIndex"><span class="hs-identifier hs-type">VariationIndex</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HashSet</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AfbRules%3AFlagBuilder"><span class="annot"><span class="annottext">FlagBuilder -&gt; [FlagRule]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbRules%3AFlagBuilder"><span class="hs-identifier hs-var hs-var">fbRules</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagRule"><span class="hs-identifier hs-type">FlagRule</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-70"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-71"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679667279"><span id="local-6989586621679667281"><span id="local-6989586621679667283"><span class="annot"><span class="annottext">Int -&gt; FlagBuilder -&gt; ShowS
[FlagBuilder] -&gt; ShowS
FlagBuilder -&gt; String
(Int -&gt; FlagBuilder -&gt; ShowS)
-&gt; (FlagBuilder -&gt; String)
-&gt; ([FlagBuilder] -&gt; ShowS)
-&gt; Show FlagBuilder
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [FlagBuilder] -&gt; ShowS
$cshowList :: [FlagBuilder] -&gt; ShowS
show :: FlagBuilder -&gt; String
$cshow :: FlagBuilder -&gt; String
showsPrec :: Int -&gt; FlagBuilder -&gt; ShowS
$cshowsPrec :: Int -&gt; FlagBuilder -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#fbTargets"><span class="hs-identifier hs-type">fbTargets</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="LaunchDarkly.Server.Features.html#Target"><span class="hs-identifier hs-type">F.Target</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="LaunchDarkly.Server.Features.html#Target"><span class="hs-identifier hs-type">F.Target</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span id="fbTargets"><span class="annot"><span class="annottext">fbTargets :: FlagBuilder -&gt; ([Target], [Target])
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#fbTargets"><span class="hs-identifier hs-var hs-var">fbTargets</span></a></span></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:fbTargetMap:FlagBuilder :: FlagBuilder -&gt; Map Text (Map VariationIndex (HashSet Text))
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbTargetMap%3AFlagBuilder"><span class="hs-identifier hs-var">fbTargetMap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679667276"><span class="annot"><span class="annottext">Map Text (Map VariationIndex (HashSet Text))
</span><a href="#local-6989586621679667276"><span class="hs-identifier hs-var">targetMap</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-75"></span><span>    </span><span class="annot"><span class="annottext">(([Target], [Target])
 -&gt; Text
 -&gt; Map VariationIndex (HashSet Text)
 -&gt; ([Target], [Target]))
-&gt; ([Target], [Target])
-&gt; Map Text (Map VariationIndex (HashSet Text))
-&gt; ([Target], [Target])
forall a k b. (a -&gt; k -&gt; b -&gt; a) -&gt; a -&gt; Map k b -&gt; a
</span><span class="hs-identifier hs-var">Map.foldlWithKey</span></span><span> </span><span class="annot"><span class="annottext">([Target], [Target])
-&gt; Text
-&gt; Map VariationIndex (HashSet Text)
-&gt; ([Target], [Target])
</span><a href="#local-6989586621679667274"><span class="hs-identifier hs-var">splitIntoTargets</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Text (Map VariationIndex (HashSet Text))
</span><a href="#local-6989586621679667276"><span class="hs-identifier hs-var">targetMap</span></a></span><span>
</span><span id="line-76"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-77"></span><span>    </span><span class="annot"><a href="#local-6989586621679667274"><span class="hs-identifier hs-type">splitIntoTargets</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="LaunchDarkly.Server.Features.html#Target"><span class="hs-identifier hs-type">F.Target</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="LaunchDarkly.Server.Features.html#Target"><span class="hs-identifier hs-type">F.Target</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#VariationIndex"><span class="hs-identifier hs-type">VariationIndex</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HashSet</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="LaunchDarkly.Server.Features.html#Target"><span class="hs-identifier hs-type">F.Target</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="LaunchDarkly.Server.Features.html#Target"><span class="hs-identifier hs-type">F.Target</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span>    </span><span id="local-6989586621679667274"><span class="annot"><span class="annottext">splitIntoTargets :: ([Target], [Target])
-&gt; Text
-&gt; Map VariationIndex (HashSet Text)
-&gt; ([Target], [Target])
</span><a href="#local-6989586621679667274"><span class="hs-identifier hs-var hs-var">splitIntoTargets</span></a></span></span><span> </span><span id="local-6989586621679667273"><span class="annot"><span class="annottext">acc :: ([Target], [Target])
</span><a href="#local-6989586621679667273"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-string">&quot;user&quot;</span><span> </span><span id="local-6989586621679667272"><span class="annot"><span class="annottext">keyMap :: Map VariationIndex (HashSet Text)
</span><a href="#local-6989586621679667272"><span class="hs-identifier hs-var">keyMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(([Target], [Target])
 -&gt; VariationIndex -&gt; HashSet Text -&gt; ([Target], [Target]))
-&gt; ([Target], [Target])
-&gt; Map VariationIndex (HashSet Text)
-&gt; ([Target], [Target])
forall a k b. (a -&gt; k -&gt; b -&gt; a) -&gt; a -&gt; Map k b -&gt; a
</span><span class="hs-identifier hs-var">Map.foldlWithKey</span></span><span> </span><span class="annot"><span class="annottext">([Target], [Target])
-&gt; VariationIndex -&gt; HashSet Text -&gt; ([Target], [Target])
</span><a href="#local-6989586621679667271"><span class="hs-identifier hs-var">foldForUserKind</span></a></span><span> </span><span class="annot"><span class="annottext">([Target], [Target])
</span><a href="#local-6989586621679667273"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">Map VariationIndex (HashSet Text)
</span><a href="#local-6989586621679667272"><span class="hs-identifier hs-var">keyMap</span></a></span><span>
</span><span id="line-79"></span><span>    </span><span class="annot"><a href="#local-6989586621679667274"><span class="hs-identifier hs-var">splitIntoTargets</span></a></span><span> </span><span id="local-6989586621679667270"><span class="annot"><span class="annottext">acc :: ([Target], [Target])
</span><a href="#local-6989586621679667270"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span id="local-6989586621679667269"><span class="annot"><span class="annottext">kind :: Text
</span><a href="#local-6989586621679667269"><span class="hs-identifier hs-var">kind</span></a></span></span><span> </span><span id="local-6989586621679667268"><span class="annot"><span class="annottext">keyMap :: Map VariationIndex (HashSet Text)
</span><a href="#local-6989586621679667268"><span class="hs-identifier hs-var">keyMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(([Target], [Target])
 -&gt; VariationIndex -&gt; HashSet Text -&gt; ([Target], [Target]))
-&gt; ([Target], [Target])
-&gt; Map VariationIndex (HashSet Text)
-&gt; ([Target], [Target])
forall a k b. (a -&gt; k -&gt; b -&gt; a) -&gt; a -&gt; Map k b -&gt; a
</span><span class="hs-identifier hs-var">Map.foldlWithKey</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
-&gt; ([Target], [Target])
-&gt; VariationIndex
-&gt; HashSet Text
-&gt; ([Target], [Target])
</span><a href="#local-6989586621679667267"><span class="hs-identifier hs-var">foldForOtherKind</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679667269"><span class="hs-identifier hs-var">kind</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Target], [Target])
</span><a href="#local-6989586621679667270"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">Map VariationIndex (HashSet Text)
</span><a href="#local-6989586621679667268"><span class="hs-identifier hs-var">keyMap</span></a></span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span>    </span><span class="hs-comment">-- When processing user kinds, we need to add a full target to the user targets, and a placeholder without the values in the context targets list</span><span>
</span><span id="line-82"></span><span>    </span><span class="annot"><a href="#local-6989586621679667271"><span class="hs-identifier hs-type">foldForUserKind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="LaunchDarkly.Server.Features.html#Target"><span class="hs-identifier hs-type">F.Target</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="LaunchDarkly.Server.Features.html#Target"><span class="hs-identifier hs-type">F.Target</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#VariationIndex"><span class="hs-identifier hs-type">VariationIndex</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashSet</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="LaunchDarkly.Server.Features.html#Target"><span class="hs-identifier hs-type">F.Target</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="LaunchDarkly.Server.Features.html#Target"><span class="hs-identifier hs-type">F.Target</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>    </span><span id="local-6989586621679667271"><span class="annot"><span class="annottext">foldForUserKind :: ([Target], [Target])
-&gt; VariationIndex -&gt; HashSet Text -&gt; ([Target], [Target])
</span><a href="#local-6989586621679667271"><span class="hs-identifier hs-var hs-var">foldForUserKind</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679667266"><span class="annot"><span class="annottext">userTargets :: [Target]
</span><a href="#local-6989586621679667266"><span class="hs-identifier hs-var">userTargets</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679667265"><span class="annot"><span class="annottext">allTargets :: [Target]
</span><a href="#local-6989586621679667265"><span class="hs-identifier hs-var">allTargets</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679667264"><span class="annot"><span class="annottext">variation :: VariationIndex
</span><a href="#local-6989586621679667264"><span class="hs-identifier hs-var">variation</span></a></span></span><span> </span><span id="local-6989586621679667263"><span class="annot"><span class="annottext">values :: HashSet Text
</span><a href="#local-6989586621679667263"><span class="hs-identifier hs-var">values</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-84"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">$WTarget :: HashSet Text -&gt; VariationIndex -&gt; Text -&gt; Target
</span><a href="LaunchDarkly.Server.Features.html#%24WTarget"><span class="hs-identifier hs-type hs-type">F.Target</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">HashSet Text
$sel:values:Target :: HashSet Text
values :: HashSet Text
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3Avalues%3ATarget"><span class="hs-identifier hs-var hs-var">values</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VariationIndex
$sel:variation:Target :: VariationIndex
variation :: VariationIndex
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3Avariation%3ATarget"><span class="hs-identifier hs-var hs-var">variation</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:contextKind:Target :: Text
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3AcontextKind%3ATarget"><span class="hs-identifier hs-var">contextKind</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;user&quot;</span></span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">Target -&gt; [Target] -&gt; [Target]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Target]
</span><a href="#local-6989586621679667266"><span class="hs-identifier hs-var">userTargets</span></a></span><span>
</span><span id="line-85"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$WTarget :: HashSet Text -&gt; VariationIndex -&gt; Text -&gt; Target
</span><a href="LaunchDarkly.Server.Features.html#%24WTarget"><span class="hs-identifier hs-type hs-type">F.Target</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:values:Target :: HashSet Text
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3Avalues%3ATarget"><span class="hs-identifier hs-var">values</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashSet Text
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VariationIndex
$sel:variation:Target :: VariationIndex
variation :: VariationIndex
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3Avariation%3ATarget"><span class="hs-identifier hs-var hs-var">variation</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:contextKind:Target :: Text
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3AcontextKind%3ATarget"><span class="hs-identifier hs-var">contextKind</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;user&quot;</span></span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">Target -&gt; [Target] -&gt; [Target]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Target]
</span><a href="#local-6989586621679667265"><span class="hs-identifier hs-var">allTargets</span></a></span><span>
</span><span id="line-86"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span>    </span><span class="annot"><a href="#local-6989586621679667267"><span class="hs-identifier hs-type">foldForOtherKind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="LaunchDarkly.Server.Features.html#Target"><span class="hs-identifier hs-type">F.Target</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="LaunchDarkly.Server.Features.html#Target"><span class="hs-identifier hs-type">F.Target</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#VariationIndex"><span class="hs-identifier hs-type">VariationIndex</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashSet</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="LaunchDarkly.Server.Features.html#Target"><span class="hs-identifier hs-type">F.Target</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="LaunchDarkly.Server.Features.html#Target"><span class="hs-identifier hs-type">F.Target</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span>    </span><span id="local-6989586621679667267"><span class="annot"><span class="annottext">foldForOtherKind :: Text
-&gt; ([Target], [Target])
-&gt; VariationIndex
-&gt; HashSet Text
-&gt; ([Target], [Target])
</span><a href="#local-6989586621679667267"><span class="hs-identifier hs-var hs-var">foldForOtherKind</span></a></span></span><span> </span><span id="local-6989586621679667257"><span class="annot"><span class="annottext">kind :: Text
</span><a href="#local-6989586621679667257"><span class="hs-identifier hs-var">kind</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679667256"><span class="annot"><span class="annottext">userTargets :: [Target]
</span><a href="#local-6989586621679667256"><span class="hs-identifier hs-var">userTargets</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679667255"><span class="annot"><span class="annottext">allTargets :: [Target]
</span><a href="#local-6989586621679667255"><span class="hs-identifier hs-var">allTargets</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679667254"><span class="annot"><span class="annottext">variation :: VariationIndex
</span><a href="#local-6989586621679667254"><span class="hs-identifier hs-var">variation</span></a></span></span><span> </span><span id="local-6989586621679667253"><span class="annot"><span class="annottext">values :: HashSet Text
</span><a href="#local-6989586621679667253"><span class="hs-identifier hs-var">values</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-90"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">[Target]
</span><a href="#local-6989586621679667256"><span class="hs-identifier hs-var">userTargets</span></a></span><span>
</span><span id="line-91"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$WTarget :: HashSet Text -&gt; VariationIndex -&gt; Text -&gt; Target
</span><a href="LaunchDarkly.Server.Features.html#%24WTarget"><span class="hs-identifier hs-type hs-type">F.Target</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:values:Target :: HashSet Text
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3Avalues%3ATarget"><span class="hs-identifier hs-var">values</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashSet Text
</span><a href="#local-6989586621679667253"><span class="hs-identifier hs-var">values</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VariationIndex
variation :: VariationIndex
$sel:variation:Target :: VariationIndex
</span><a href="#local-6989586621679667254"><span class="hs-identifier hs-var hs-var">variation</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:contextKind:Target :: Text
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3AcontextKind%3ATarget"><span class="hs-identifier hs-var">contextKind</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679667257"><span class="hs-identifier hs-var">kind</span></a></span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">Target -&gt; [Target] -&gt; [Target]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Target]
</span><a href="#local-6989586621679667255"><span class="hs-identifier hs-var">allTargets</span></a></span><span>
</span><span id="line-92"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#buildFlag"><span class="hs-identifier hs-type">buildFlag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Features.html#Flag"><span class="hs-identifier hs-type">F.Flag</span></a></span><span>
</span><span id="line-95"></span><span id="buildFlag"><span class="annot"><span class="annottext">buildFlag :: Natural -&gt; FlagBuilder -&gt; Flag
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#buildFlag"><span class="hs-identifier hs-var hs-var">buildFlag</span></a></span></span><span> </span><span id="local-6989586621679667252"><span class="annot"><span class="annottext">version :: Natural
</span><a href="#local-6989586621679667252"><span class="hs-identifier hs-var">version</span></a></span></span><span> </span><span id="local-6989586621679667251"><span class="annot"><span class="annottext">flagBuilder :: FlagBuilder
</span><a href="#local-6989586621679667251"><span class="hs-identifier hs-var">flagBuilder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-96"></span><span>    </span><span class="annot"><span class="annottext">$WFlag :: Text
-&gt; Natural
-&gt; Bool
-&gt; Bool
-&gt; Bool
-&gt; Bool
-&gt; [Prerequisite]
-&gt; Text
-&gt; [Target]
-&gt; [Target]
-&gt; [Rule]
-&gt; VariationOrRollout
-&gt; Maybe VariationIndex
-&gt; [Value]
-&gt; Maybe Natural
-&gt; ClientSideAvailability
-&gt; Flag
</span><a href="LaunchDarkly.Server.Features.html#%24WFlag"><span class="hs-identifier hs-type hs-type">F.Flag</span></a></span><span>
</span><span id="line-97"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:key:Flag :: Text
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3Akey%3AFlag"><span class="hs-identifier hs-var">F.key</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FlagBuilder -&gt; Text
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbKey%3AFlagBuilder"><span class="hs-identifier hs-var hs-var">fbKey</span></a></span><span> </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667251"><span class="hs-identifier hs-var">flagBuilder</span></a></span><span>
</span><span id="line-98"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:version:Flag :: Natural
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3Aversion%3AFlag"><span class="hs-identifier hs-var">F.version</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679667252"><span class="hs-identifier hs-var">version</span></a></span><span>
</span><span id="line-99"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:on:Flag :: Bool
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3Aon%3AFlag"><span class="hs-identifier hs-var">F.on</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FlagBuilder -&gt; Bool
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbOn%3AFlagBuilder"><span class="hs-identifier hs-var hs-var">fbOn</span></a></span><span> </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667251"><span class="hs-identifier hs-var">flagBuilder</span></a></span><span>
</span><span id="line-100"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:trackEvents:Flag :: Bool
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3AtrackEvents%3AFlag"><span class="hs-identifier hs-var">F.trackEvents</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-101"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:trackEventsFallthrough:Flag :: Bool
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3AtrackEventsFallthrough%3AFlag"><span class="hs-identifier hs-var">F.trackEventsFallthrough</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-102"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:deleted:Flag :: Bool
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3Adeleted%3AFlag"><span class="hs-identifier hs-var">F.deleted</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-103"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:prerequisites:Flag :: [Prerequisite]
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3Aprerequisites%3AFlag"><span class="hs-identifier hs-var">F.prerequisites</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-104"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:salt:Flag :: Text
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3Asalt%3AFlag"><span class="hs-identifier hs-var">F.salt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;salt&quot;</span></span><span>
</span><span id="line-105"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:targets:Flag :: [Target]
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3Atargets%3AFlag"><span class="hs-identifier hs-var">F.targets</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Target]
</span><a href="#local-6989586621679667239"><span class="hs-identifier hs-var">userTargets</span></a></span><span>
</span><span id="line-106"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:contextTargets:Flag :: [Target]
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3AcontextTargets%3AFlag"><span class="hs-identifier hs-var">F.contextTargets</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Target]
</span><a href="#local-6989586621679667237"><span class="hs-identifier hs-var">allTargets</span></a></span><span>
</span><span id="line-107"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:rules:Flag :: [Rule]
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3Arules%3AFlag"><span class="hs-identifier hs-var">F.rules</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(VariationIndex -&gt; FlagRule -&gt; Rule) -&gt; [FlagRule] -&gt; [Rule]
forall num a b. Integral num =&gt; (num -&gt; a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#mapWithIndex"><span class="hs-identifier hs-var">mapWithIndex</span></a></span><span> </span><span class="annot"><span class="annottext">VariationIndex -&gt; FlagRule -&gt; Rule
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#convertFlagRule"><span class="hs-identifier hs-var">convertFlagRule</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FlagBuilder -&gt; [FlagRule]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbRules%3AFlagBuilder"><span class="hs-identifier hs-var hs-var">fbRules</span></a></span><span> </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667251"><span class="hs-identifier hs-var">flagBuilder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:fallthrough:Flag :: VariationOrRollout
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3Afallthrough%3AFlag"><span class="hs-identifier hs-var">F.fallthrough</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe VariationIndex -&gt; Maybe Rollout -&gt; VariationOrRollout
</span><a href="LaunchDarkly.Server.Features.html#VariationOrRollout"><span class="hs-identifier hs-var">F.VariationOrRollout</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FlagBuilder -&gt; Maybe VariationIndex
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbFallthroughVariation%3AFlagBuilder"><span class="hs-identifier hs-var hs-var">fbFallthroughVariation</span></a></span><span> </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667251"><span class="hs-identifier hs-var">flagBuilder</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Rollout
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-109"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:offVariation:Flag :: Maybe VariationIndex
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3AoffVariation%3AFlag"><span class="hs-identifier hs-var">F.offVariation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FlagBuilder -&gt; Maybe VariationIndex
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbOffVariation%3AFlagBuilder"><span class="hs-identifier hs-var hs-var">fbOffVariation</span></a></span><span> </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667251"><span class="hs-identifier hs-var">flagBuilder</span></a></span><span>
</span><span id="line-110"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:variations:Flag :: [Value]
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3Avariations%3AFlag"><span class="hs-identifier hs-var">F.variations</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FlagBuilder -&gt; [Value]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbVariations%3AFlagBuilder"><span class="hs-identifier hs-var hs-var">fbVariations</span></a></span><span> </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667251"><span class="hs-identifier hs-var">flagBuilder</span></a></span><span>
</span><span id="line-111"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:debugEventsUntilDate:Flag :: Maybe Natural
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3AdebugEventsUntilDate%3AFlag"><span class="hs-identifier hs-var">F.debugEventsUntilDate</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Natural
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-112"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:clientSideAvailability:Flag :: ClientSideAvailability
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3AclientSideAvailability%3AFlag"><span class="hs-identifier hs-var">F.clientSideAvailability</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool -&gt; ClientSideAvailability
</span><a href="LaunchDarkly.Server.Features.html#ClientSideAvailability"><span class="hs-identifier hs-var">F.ClientSideAvailability</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-113"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-114"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679667239"><span class="annot"><span class="annottext">userTargets :: [Target]
</span><a href="#local-6989586621679667239"><span class="hs-identifier hs-var">userTargets</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679667237"><span class="annot"><span class="annottext">allTargets :: [Target]
</span><a href="#local-6989586621679667237"><span class="hs-identifier hs-var">allTargets</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FlagBuilder -&gt; ([Target], [Target])
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#fbTargets"><span class="hs-identifier hs-var">fbTargets</span></a></span><span> </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667251"><span class="hs-identifier hs-var">flagBuilder</span></a></span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span id="local-6989586621679667360"><span id="local-6989586621679667361"><span id="local-6989586621679667362"><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#mapWithIndex"><span class="hs-identifier hs-type">mapWithIndex</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integral</span></span><span> </span><span class="annot"><a href="#local-6989586621679667362"><span class="hs-identifier hs-type">num</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679667362"><span class="hs-identifier hs-type">num</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679667361"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679667360"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679667361"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679667360"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span></span></span></span><span>
</span><span id="line-118"></span><span id="mapWithIndex"><span class="annot"><span class="annottext">mapWithIndex :: (num -&gt; a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#mapWithIndex"><span class="hs-identifier hs-var hs-var">mapWithIndex</span></a></span></span><span> </span><span id="local-6989586621679667226"><span class="annot"><span class="annottext">f :: num -&gt; a -&gt; b
</span><a href="#local-6989586621679667226"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679667225"><span class="annot"><span class="annottext">l :: [a]
</span><a href="#local-6989586621679667225"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-119"></span><span>    </span><span class="annot"><span class="annottext">((num, a) -&gt; b) -&gt; [(num, a)] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(num -&gt; a -&gt; b) -&gt; (num, a) -&gt; b
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">num -&gt; a -&gt; b
</span><a href="#local-6989586621679667226"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[num] -&gt; [a] -&gt; [(num, a)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">..</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679667225"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#newFlagBuilder"><span class="hs-identifier hs-type">newFlagBuilder</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span>
</span><span id="line-122"></span><span id="newFlagBuilder"><span class="annot"><span class="annottext">newFlagBuilder :: Text -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#newFlagBuilder"><span class="hs-identifier hs-var hs-var">newFlagBuilder</span></a></span></span><span> </span><span id="local-6989586621679667223"><span class="annot"><span class="annottext">key :: Text
</span><a href="#local-6989586621679667223"><span class="hs-identifier hs-var">key</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-123"></span><span>    </span><span class="annot"><span class="annottext">FlagBuilder :: Text
-&gt; Maybe VariationIndex
-&gt; Bool
-&gt; Maybe VariationIndex
-&gt; [Value]
-&gt; Map Text (Map VariationIndex (HashSet Text))
-&gt; [FlagRule]
-&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type hs-type">FlagBuilder</span></a></span><span>
</span><span id="line-124"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:fbKey:FlagBuilder :: Text
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbKey%3AFlagBuilder"><span class="hs-identifier hs-var">fbKey</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679667223"><span class="hs-identifier hs-var">key</span></a></span><span>
</span><span id="line-125"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:fbOffVariation:FlagBuilder :: Maybe VariationIndex
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbOffVariation%3AFlagBuilder"><span class="hs-identifier hs-var">fbOffVariation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe VariationIndex
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-126"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:fbOn:FlagBuilder :: Bool
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbOn%3AFlagBuilder"><span class="hs-identifier hs-var">fbOn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-127"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:fbFallthroughVariation:FlagBuilder :: Maybe VariationIndex
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbFallthroughVariation%3AFlagBuilder"><span class="hs-identifier hs-var">fbFallthroughVariation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe VariationIndex
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-128"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:fbVariations:FlagBuilder :: [Value]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbVariations%3AFlagBuilder"><span class="hs-identifier hs-var">fbVariations</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Value]
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-129"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:fbTargetMap:FlagBuilder :: Map Text (Map VariationIndex (HashSet Text))
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbTargetMap%3AFlagBuilder"><span class="hs-identifier hs-var">fbTargetMap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Text (Map VariationIndex (HashSet Text))
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-130"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:fbRules:FlagBuilder :: [FlagRule]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbRules%3AFlagBuilder"><span class="hs-identifier hs-var">fbRules</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FlagRule]
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-131"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#booleanFlagVariations"><span class="hs-identifier hs-type">booleanFlagVariations</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span class="hs-special">]</span><span>
</span><span id="line-134"></span><span id="booleanFlagVariations"><span class="annot"><span class="annottext">booleanFlagVariations :: [Value]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#booleanFlagVariations"><span class="hs-identifier hs-var hs-var">booleanFlagVariations</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Bool -&gt; Value
</span><span class="hs-identifier hs-var">Aeson.Bool</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Value
</span><span class="hs-identifier hs-var">Aeson.Bool</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">]</span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#isBooleanFlag"><span class="hs-identifier hs-type">isBooleanFlag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-137"></span><span id="isBooleanFlag"><span class="annot"><span class="annottext">isBooleanFlag :: FlagBuilder -&gt; Bool
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#isBooleanFlag"><span class="hs-identifier hs-var hs-var">isBooleanFlag</span></a></span></span><span> </span><span id="local-6989586621679667218"><span class="annot"><span class="annottext">flagBuilder :: FlagBuilder
</span><a href="#local-6989586621679667218"><span class="hs-identifier hs-var">flagBuilder</span></a></span></span><span>
</span><span id="line-138"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#booleanFlagVariations"><span class="hs-identifier hs-var">booleanFlagVariations</span></a></span><span> </span><span class="annot"><span class="annottext">[Value] -&gt; [Value] -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">FlagBuilder -&gt; [Value]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbVariations%3AFlagBuilder"><span class="hs-identifier hs-var hs-var">fbVariations</span></a></span><span> </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667218"><span class="hs-identifier hs-var">flagBuilder</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-139"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-142"></span><span class="hs-comment">-- A shortcut for setting the flag to use the standard boolean configuration.</span><span>
</span><span id="line-143"></span><span class="hs-comment">--</span><span>
</span><span id="line-144"></span><span class="hs-comment">-- This is the default for all new flags created with</span><span>
</span><span id="line-145"></span><span class="hs-comment">-- 'LaunchDarkly.Server.Integrations.TestData.flag'. The flag will have two</span><span>
</span><span id="line-146"></span><span class="hs-comment">-- variations, @True@ and @False@ (in that order); it will return @False@</span><span>
</span><span id="line-147"></span><span class="hs-comment">-- whenever targeting is off, and @True@ when targeting is on if no other</span><span>
</span><span id="line-148"></span><span class="hs-comment">-- settings specify otherwise.</span><span>
</span><span id="line-149"></span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#booleanFlag"><span class="hs-identifier hs-type">booleanFlag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span>
</span><span id="line-150"></span><span id="booleanFlag"><span class="annot"><span class="annottext">booleanFlag :: FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#booleanFlag"><span class="hs-identifier hs-var hs-var">booleanFlag</span></a></span></span><span> </span><span id="local-6989586621679667217"><span class="annot"><span class="annottext">flagBuilder :: FlagBuilder
</span><a href="#local-6989586621679667217"><span class="hs-identifier hs-var">flagBuilder</span></a></span></span><span>
</span><span id="line-151"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">FlagBuilder -&gt; Bool
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#isBooleanFlag"><span class="hs-identifier hs-var">isBooleanFlag</span></a></span><span> </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667217"><span class="hs-identifier hs-var">flagBuilder</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-152"></span><span>        </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667217"><span class="hs-identifier hs-var">flagBuilder</span></a></span><span>
</span><span id="line-153"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-154"></span><span>        </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667217"><span class="hs-identifier hs-var">flagBuilder</span></a></span><span>
</span><span id="line-155"></span><span>            </span><span class="annot"><span class="annottext">FlagBuilder -&gt; (FlagBuilder -&gt; FlagBuilder) -&gt; FlagBuilder
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">[Value] -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variations"><span class="hs-identifier hs-var">variations</span></a></span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#booleanFlagVariations"><span class="hs-identifier hs-var">booleanFlagVariations</span></a></span><span>
</span><span id="line-156"></span><span>            </span><span class="annot"><span class="annottext">FlagBuilder -&gt; (FlagBuilder -&gt; FlagBuilder) -&gt; FlagBuilder
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">VariationIndex -&gt; FlagBuilder -&gt; FlagBuilder
forall val. Variation val =&gt; val -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#fallthroughVariation"><span class="hs-identifier hs-var">fallthroughVariation</span></a></span><span> </span><span class="annot"><span class="annottext">VariationIndex
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#trueVariationForBoolean"><span class="hs-identifier hs-var">trueVariationForBoolean</span></a></span><span>
</span><span id="line-157"></span><span>            </span><span class="annot"><span class="annottext">FlagBuilder -&gt; (FlagBuilder -&gt; FlagBuilder) -&gt; FlagBuilder
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">VariationIndex -&gt; FlagBuilder -&gt; FlagBuilder
forall val. Variation val =&gt; val -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#offVariation"><span class="hs-identifier hs-var">offVariation</span></a></span><span> </span><span class="annot"><span class="annottext">VariationIndex
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#falseVariationForBoolean"><span class="hs-identifier hs-var">falseVariationForBoolean</span></a></span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-160"></span><span class="hs-comment">-- Sets targeting to be on or off for this flag.</span><span>
</span><span id="line-161"></span><span class="hs-comment">--</span><span>
</span><span id="line-162"></span><span class="hs-comment">-- The effect of this depends on the rest of the flag configuration, just as it</span><span>
</span><span id="line-163"></span><span class="hs-comment">-- does on the real LaunchDarkly dashboard. In the default configuration that</span><span>
</span><span id="line-164"></span><span class="hs-comment">-- you get from calling 'LaunchDarkly.Server.Integrations.TestData.flag' with a</span><span>
</span><span id="line-165"></span><span class="hs-comment">-- new flag key, the flag will return @False@ whenever targeting is off, and</span><span>
</span><span id="line-166"></span><span class="hs-comment">-- @True@ when targeting is on.</span><span>
</span><span id="line-167"></span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#on"><span class="hs-identifier hs-type">on</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-168"></span><span>    </span><span class="hs-comment">-- | isOn @True@ if targeting should be on</span><span>
</span><span id="line-169"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-170"></span><span>    </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-171"></span><span>    </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span>
</span><span id="line-172"></span><span id="on"><span class="annot"><span class="annottext">on :: Bool -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#on"><span class="hs-identifier hs-var hs-var">on</span></a></span></span><span> </span><span id="local-6989586621679667216"><span class="annot"><span class="annottext">isOn :: Bool
</span><a href="#local-6989586621679667216"><span class="hs-identifier hs-var">isOn</span></a></span></span><span> </span><span id="local-6989586621679667215"><span class="annot"><span class="annottext">fb :: FlagBuilder
</span><a href="#local-6989586621679667215"><span class="hs-identifier hs-var">fb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-173"></span><span>    </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667215"><span class="hs-identifier hs-var">fb</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:fbOn:FlagBuilder :: Bool
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbOn%3AFlagBuilder"><span class="hs-identifier hs-var">fbOn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679667216"><span class="hs-identifier hs-var">isOn</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-174"></span><span>
</span><span id="line-175"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-176"></span><span class="hs-comment">-- Removes any existing rules from the flag.</span><span>
</span><span id="line-177"></span><span class="hs-comment">-- This undoes the effect of methods like 'ifMatch' or 'ifNotMatch'</span><span>
</span><span id="line-178"></span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#clearRules"><span class="hs-identifier hs-type">clearRules</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span>
</span><span id="line-179"></span><span id="clearRules"><span class="annot"><span class="annottext">clearRules :: FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#clearRules"><span class="hs-identifier hs-var hs-var">clearRules</span></a></span></span><span> </span><span id="local-6989586621679667213"><span class="annot"><span class="annottext">fb :: FlagBuilder
</span><a href="#local-6989586621679667213"><span class="hs-identifier hs-var">fb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-180"></span><span>    </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667213"><span class="hs-identifier hs-var">fb</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:fbRules:FlagBuilder :: [FlagRule]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbRules%3AFlagBuilder"><span class="hs-identifier hs-var">fbRules</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FlagRule]
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">}</span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-183"></span><span class="hs-comment">-- Removes any existing targets from the flag.</span><span>
</span><span id="line-184"></span><span class="hs-comment">-- This undoes the effect of methods like 'variationForKey'</span><span>
</span><span id="line-185"></span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#clearTargets"><span class="hs-identifier hs-type">clearTargets</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span>
</span><span id="line-186"></span><span id="clearTargets"><span class="annot"><span class="annottext">clearTargets :: FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#clearTargets"><span class="hs-identifier hs-var hs-var">clearTargets</span></a></span></span><span> </span><span id="local-6989586621679667211"><span class="annot"><span class="annottext">fb :: FlagBuilder
</span><a href="#local-6989586621679667211"><span class="hs-identifier hs-var">fb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-187"></span><span>    </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667211"><span class="hs-identifier hs-var">fb</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:fbTargetMap:FlagBuilder :: Map Text (Map VariationIndex (HashSet Text))
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbTargetMap%3AFlagBuilder"><span class="hs-identifier hs-var">fbTargetMap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Text (Map VariationIndex (HashSet Text))
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">}</span><span>
</span><span id="line-188"></span><span>
</span><span id="line-189"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-190"></span><span class="hs-comment">-- Sets the flag to always return the specified variation value for all</span><span>
</span><span id="line-191"></span><span class="hs-comment">-- contexts.</span><span>
</span><span id="line-192"></span><span class="hs-comment">--</span><span>
</span><span id="line-193"></span><span class="hs-comment">-- The value may be of any type that implements 'Aeson.ToJSON'. This method</span><span>
</span><span id="line-194"></span><span class="hs-comment">-- changes the flag to have only a single variation, which is this value, and</span><span>
</span><span id="line-195"></span><span class="hs-comment">-- to return the same variation regardless of whether targeting is on or off.</span><span>
</span><span id="line-196"></span><span class="hs-comment">-- Any existing targets or rules are removed.</span><span>
</span><span id="line-197"></span><span id="local-6989586621679667338"><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#valueForAll"><span class="hs-identifier hs-type">valueForAll</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-198"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Aeson.ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679667338"><span class="hs-identifier hs-type">value</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-199"></span><span>    </span><span class="annot"><a href="#local-6989586621679667338"><span class="hs-identifier hs-type">value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-comment">-- the desired value to be returned for all contexts</span><span>
</span><span id="line-200"></span><span>    </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-201"></span><span>    </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span></span><span>
</span><span id="line-202"></span><span id="valueForAll"><span class="annot"><span class="annottext">valueForAll :: value -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#valueForAll"><span class="hs-identifier hs-var hs-var">valueForAll</span></a></span></span><span> </span><span id="local-6989586621679667210"><span class="annot"><span class="annottext">val :: value
</span><a href="#local-6989586621679667210"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span id="local-6989586621679667209"><span class="annot"><span class="annottext">fb :: FlagBuilder
</span><a href="#local-6989586621679667209"><span class="hs-identifier hs-var">fb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-203"></span><span>    </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667209"><span class="hs-identifier hs-var">fb</span></a></span><span>
</span><span id="line-204"></span><span>        </span><span class="annot"><span class="annottext">FlagBuilder -&gt; (FlagBuilder -&gt; FlagBuilder) -&gt; FlagBuilder
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">[Value] -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variations"><span class="hs-identifier hs-var">variations</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">value -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">Aeson.toJSON</span></span><span> </span><span class="annot"><span class="annottext">value
</span><a href="#local-6989586621679667210"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-205"></span><span>        </span><span class="annot"><span class="annottext">FlagBuilder -&gt; (FlagBuilder -&gt; FlagBuilder) -&gt; FlagBuilder
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">VariationIndex -&gt; FlagBuilder -&gt; FlagBuilder
forall val. Variation val =&gt; val -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForAll"><span class="hs-identifier hs-var">variationForAll</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#VariationIndex"><span class="hs-identifier hs-type">VariationIndex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">valueForAllUsers</span><span> </span><span class="hs-pragma">&quot;Use valueForAll instead&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-210"></span><span class="hs-comment">-- Sets the flag to always return the specified variation value for all users.</span><span>
</span><span id="line-211"></span><span class="hs-comment">--</span><span>
</span><span id="line-212"></span><span class="hs-comment">-- This function is an alias to 'valueForAll'.</span><span>
</span><span id="line-213"></span><span class="hs-comment">--</span><span>
</span><span id="line-214"></span><span class="hs-comment">-- The value may be of any type that implements 'Aeson.ToJSON'. This method</span><span>
</span><span id="line-215"></span><span class="hs-comment">-- changes the flag to have only a single variation, which is this value, and</span><span>
</span><span id="line-216"></span><span class="hs-comment">-- to return the same variation regardless of whether targeting is on or off.</span><span>
</span><span id="line-217"></span><span class="hs-comment">-- Any existing targets or rules are removed.</span><span>
</span><span id="line-218"></span><span id="local-6989586621679667207"><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#valueForAllUsers"><span class="hs-identifier hs-type">valueForAllUsers</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-219"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Aeson.ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679667207"><span class="hs-identifier hs-type">value</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-220"></span><span>    </span><span class="annot"><a href="#local-6989586621679667207"><span class="hs-identifier hs-type">value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-comment">-- the desired value to be returned for all users</span><span>
</span><span id="line-221"></span><span>    </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-222"></span><span>    </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span></span><span>
</span><span id="line-223"></span><span id="valueForAllUsers"><span class="annot"><span class="annottext">valueForAllUsers :: value -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#valueForAllUsers"><span class="hs-identifier hs-var hs-var">valueForAllUsers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">value -&gt; FlagBuilder -&gt; FlagBuilder
forall value. ToJSON value =&gt; value -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#valueForAll"><span class="hs-identifier hs-var">valueForAll</span></a></span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-226"></span><span class="hs-comment">-- Changes the allowable variation values for the flag.</span><span>
</span><span id="line-227"></span><span class="hs-comment">--</span><span>
</span><span id="line-228"></span><span class="hs-comment">-- The value may be of any JSON type, as defined by 'Aeson.Value'. For</span><span>
</span><span id="line-229"></span><span class="hs-comment">-- instance, a boolean flag normally has [toJSON True, toJSON False]; a</span><span>
</span><span id="line-230"></span><span class="hs-comment">-- string-valued flag might have [toJSON &quot;red&quot;, toJSON &quot;green&quot;]; etc.</span><span>
</span><span id="line-231"></span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variations"><span class="hs-identifier hs-type">variations</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-232"></span><span>    </span><span class="hs-comment">-- | the desired variations</span><span>
</span><span id="line-233"></span><span>    </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-234"></span><span>    </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-235"></span><span>    </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span>
</span><span id="line-236"></span><span id="variations"><span class="annot"><span class="annottext">variations :: [Value] -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variations"><span class="hs-identifier hs-var hs-var">variations</span></a></span></span><span> </span><span id="local-6989586621679667206"><span class="annot"><span class="annottext">values :: [Value]
</span><a href="#local-6989586621679667206"><span class="hs-identifier hs-var">values</span></a></span></span><span> </span><span id="local-6989586621679667205"><span class="annot"><span class="annottext">fb :: FlagBuilder
</span><a href="#local-6989586621679667205"><span class="hs-identifier hs-var">fb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-237"></span><span>    </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667205"><span class="hs-identifier hs-var">fb</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:fbVariations:FlagBuilder :: [Value]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbVariations%3AFlagBuilder"><span class="hs-identifier hs-var">fbVariations</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679667206"><span class="hs-identifier hs-var">values</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="hs-comment">-- Should this actually use overloaded function names?</span><span>
</span><span id="line-240"></span><span class="hs-keyword">class</span><span> </span><span id="Variation"><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#Variation"><span class="hs-identifier hs-var">Variation</span></a></span></span><span> </span><span id="local-6989586621679667344"><span class="annot"><a href="#local-6989586621679667344"><span class="hs-identifier hs-type">val</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-241"></span><span>    </span><span class="hs-comment">-- |</span><span>
</span><span id="line-242"></span><span>    </span><span class="hs-comment">-- Specifies the fallthrough variation. The fallthrough is the value that</span><span>
</span><span id="line-243"></span><span>    </span><span class="hs-comment">-- is returned if targeting is on and the context was not matched by a more</span><span>
</span><span id="line-244"></span><span>    </span><span class="hs-comment">-- specific target or rule.</span><span>
</span><span id="line-245"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-246"></span><span>    </span><span class="hs-comment">-- If the flag was previously configured with other variations and the</span><span>
</span><span id="line-247"></span><span>    </span><span class="hs-comment">-- variation specified is a boolean, this also changes it to a boolean</span><span>
</span><span id="line-248"></span><span>    </span><span class="hs-comment">-- flag.</span><span>
</span><span id="line-249"></span><span>    </span><span id="fallthroughVariation"><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#fallthroughVariation"><span class="hs-identifier hs-type">fallthroughVariation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-250"></span><span>        </span><span class="hs-comment">-- | @True@ or @False@ or the desired fallthrough variation index: 0 for the first, 1 for the second, etc.</span><span>
</span><span id="line-251"></span><span>        </span><span class="annot"><a href="#local-6989586621679667344"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-252"></span><span>        </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-253"></span><span>        </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span>
</span><span id="line-254"></span><span>
</span><span id="line-255"></span><span>    </span><span class="hs-comment">-- |</span><span>
</span><span id="line-256"></span><span>    </span><span class="hs-comment">-- Specifies the off variation for a flag. This is the variation that is</span><span>
</span><span id="line-257"></span><span>    </span><span class="hs-comment">-- returned whenever targeting is off.</span><span>
</span><span id="line-258"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-259"></span><span>    </span><span class="hs-comment">-- If the flag was previously configured with other variations and the</span><span>
</span><span id="line-260"></span><span>    </span><span class="hs-comment">-- variation specified is a boolean, this also changes it to a boolean</span><span>
</span><span id="line-261"></span><span>    </span><span class="hs-comment">-- flag.</span><span>
</span><span id="line-262"></span><span>    </span><span id="offVariation"><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#offVariation"><span class="hs-identifier hs-type">offVariation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-263"></span><span>        </span><span class="hs-comment">-- | @True@ or @False@ or the desired fallthrough variation index: 0 for the first, 1 for the second, etc.</span><span>
</span><span id="line-264"></span><span>        </span><span class="annot"><a href="#local-6989586621679667344"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-265"></span><span>        </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-266"></span><span>        </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span>
</span><span id="line-267"></span><span>
</span><span id="line-268"></span><span>    </span><span class="hs-comment">-- |</span><span>
</span><span id="line-269"></span><span>    </span><span class="hs-comment">-- Sets the flag to always return the specified variation for all contexts.</span><span>
</span><span id="line-270"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-271"></span><span>    </span><span class="hs-comment">-- The variation is specified, Targeting is switched on, and any existing</span><span>
</span><span id="line-272"></span><span>    </span><span class="hs-comment">-- targets or rules are removed. The fallthrough variation is set to the</span><span>
</span><span id="line-273"></span><span>    </span><span class="hs-comment">-- specified value. The off variation is left unchanged.</span><span>
</span><span id="line-274"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-275"></span><span>    </span><span class="hs-comment">-- If the flag was previously configured with other variations and the</span><span>
</span><span id="line-276"></span><span>    </span><span class="hs-comment">-- variation specified is a boolean, this also changes it to a boolean</span><span>
</span><span id="line-277"></span><span>    </span><span class="hs-comment">-- flag.</span><span>
</span><span id="line-278"></span><span>    </span><span id="variationForAll"><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForAll"><span class="hs-identifier hs-type">variationForAll</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-279"></span><span>        </span><span class="hs-comment">-- | @True@ or @False@ or the desired fallthrough variation index: 0 for the first, 1 for the second, etc.</span><span>
</span><span id="line-280"></span><span>        </span><span class="annot"><a href="#local-6989586621679667344"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-281"></span><span>        </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-282"></span><span>        </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span>
</span><span id="line-283"></span><span>
</span><span id="line-284"></span><span>    </span><span class="hs-comment">-- |</span><span>
</span><span id="line-285"></span><span>    </span><span class="hs-comment">-- Sets the flag to always return the specified variation for all users.</span><span>
</span><span id="line-286"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-287"></span><span>    </span><span class="hs-comment">-- The variation is specified, Targeting is switched on, and any existing</span><span>
</span><span id="line-288"></span><span>    </span><span class="hs-comment">-- targets or rules are removed. The fallthrough variation is set to the</span><span>
</span><span id="line-289"></span><span>    </span><span class="hs-comment">-- specified value. The off variation is left unchanged.</span><span>
</span><span id="line-290"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-291"></span><span>    </span><span class="hs-comment">-- If the flag was previously configured with other variations and the</span><span>
</span><span id="line-292"></span><span>    </span><span class="hs-comment">-- variation specified is a boolean, this also changes it to a boolean</span><span>
</span><span id="line-293"></span><span>    </span><span class="hs-comment">-- flag.</span><span>
</span><span id="line-294"></span><span>    </span><span id="variationForAllUsers"><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForAllUsers"><span class="hs-identifier hs-type">variationForAllUsers</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-295"></span><span>        </span><span class="hs-comment">-- | @True@ or @False@ or the desired fallthrough variation index: 0 for the first, 1 for the second, etc.</span><span>
</span><span id="line-296"></span><span>        </span><span class="annot"><a href="#local-6989586621679667344"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-297"></span><span>        </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-298"></span><span>        </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span>
</span><span id="line-299"></span><span>
</span><span id="line-300"></span><span>    </span><span class="hs-comment">-- |</span><span>
</span><span id="line-301"></span><span>    </span><span class="hs-comment">-- Sets the flag to return the specified variation for a specific context</span><span>
</span><span id="line-302"></span><span>    </span><span class="hs-comment">-- kind and key when targeting is on.</span><span>
</span><span id="line-303"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-304"></span><span>    </span><span class="hs-comment">-- This has no effect when targeting is turned off for the flag.</span><span>
</span><span id="line-305"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-306"></span><span>    </span><span class="hs-comment">-- If the flag was previously configured with other variations and the</span><span>
</span><span id="line-307"></span><span>    </span><span class="hs-comment">-- variation specified is a boolean, this also changes it to a boolean</span><span>
</span><span id="line-308"></span><span>    </span><span class="hs-comment">-- flag.</span><span>
</span><span id="line-309"></span><span>    </span><span id="variationForKey"><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForKey"><span class="hs-identifier hs-type">variationForKey</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-310"></span><span>        </span><span class="hs-comment">-- | The context kind to match against</span><span>
</span><span id="line-311"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-312"></span><span>        </span><span class="hs-comment">-- | a key to target</span><span>
</span><span id="line-313"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-314"></span><span>        </span><span class="hs-comment">-- | @True@ or @False@ or the desired fallthrough variation index: 0 for the first, 1 for the second, etc.</span><span>
</span><span id="line-315"></span><span>        </span><span class="annot"><a href="#local-6989586621679667344"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-316"></span><span>        </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-317"></span><span>        </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span>
</span><span id="line-318"></span><span>
</span><span id="line-319"></span><span>    </span><span class="hs-comment">-- |</span><span>
</span><span id="line-320"></span><span>    </span><span class="hs-comment">-- Sets the flag to return the specified variation for a specific user key</span><span>
</span><span id="line-321"></span><span>    </span><span class="hs-comment">-- when targeting is on.</span><span>
</span><span id="line-322"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-323"></span><span>    </span><span class="hs-comment">-- This has no effect when targeting is turned off for the flag.</span><span>
</span><span id="line-324"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-325"></span><span>    </span><span class="hs-comment">-- If the flag was previously configured with other variations and the</span><span>
</span><span id="line-326"></span><span>    </span><span class="hs-comment">-- variation specified is a boolean, this also changes it to a boolean</span><span>
</span><span id="line-327"></span><span>    </span><span class="hs-comment">-- flag.</span><span>
</span><span id="line-328"></span><span>    </span><span id="variationForUser"><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForUser"><span class="hs-identifier hs-type">variationForUser</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-329"></span><span>        </span><span class="hs-comment">-- | a user key to target</span><span>
</span><span id="line-330"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-331"></span><span>        </span><span class="hs-comment">-- | @True@ or @False@ or the desired fallthrough variation index: 0 for the first, 1 for the second, etc.</span><span>
</span><span id="line-332"></span><span>        </span><span class="annot"><a href="#local-6989586621679667344"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-333"></span><span>        </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-334"></span><span>        </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span>
</span><span id="line-335"></span><span>
</span><span id="line-336"></span><span>    </span><span class="hs-comment">-- |</span><span>
</span><span id="line-337"></span><span>    </span><span class="hs-comment">-- Finishes defining the rule, specifying the result as either a boolean or</span><span>
</span><span id="line-338"></span><span>    </span><span class="hs-comment">-- a variation index.</span><span>
</span><span id="line-339"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-340"></span><span>    </span><span class="hs-comment">-- If the flag was previously configured with other variations and the</span><span>
</span><span id="line-341"></span><span>    </span><span class="hs-comment">-- variation specified is a boolean, this also changes it to a boolean</span><span>
</span><span id="line-342"></span><span>    </span><span class="hs-comment">-- flag.</span><span>
</span><span id="line-343"></span><span>    </span><span id="thenReturn"><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#thenReturn"><span class="hs-identifier hs-type">thenReturn</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-344"></span><span>        </span><span class="hs-comment">-- | @True@ or @False@ or the desired fallthrough variation index: 0 for the first, 1 for the second, etc.</span><span>
</span><span id="line-345"></span><span>        </span><span class="annot"><a href="#local-6989586621679667344"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-346"></span><span>        </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagRuleBuilder"><span class="hs-identifier hs-type">FlagRuleBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-347"></span><span>        </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#Variation"><span class="hs-identifier hs-type">Variation</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-350"></span><span>    </span><span id="local-6989586621679667196"><span class="annot"><span class="annottext">fallthroughVariation :: VariationIndex -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="#local-6989586621679667196"><span class="hs-identifier hs-var hs-var hs-var hs-var">fallthroughVariation</span></a></span></span><span> </span><span id="local-6989586621679667195"><span class="annot"><span class="annottext">variationIndex :: VariationIndex
</span><a href="#local-6989586621679667195"><span class="hs-identifier hs-var">variationIndex</span></a></span></span><span> </span><span id="local-6989586621679667194"><span class="annot"><span class="annottext">fb :: FlagBuilder
</span><a href="#local-6989586621679667194"><span class="hs-identifier hs-var">fb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-351"></span><span>        </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667194"><span class="hs-identifier hs-var">fb</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:fbFallthroughVariation:FlagBuilder :: Maybe VariationIndex
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbFallthroughVariation%3AFlagBuilder"><span class="hs-identifier hs-var">fbFallthroughVariation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VariationIndex -&gt; Maybe VariationIndex
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">VariationIndex
</span><a href="#local-6989586621679667195"><span class="hs-identifier hs-var">variationIndex</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-352"></span><span>
</span><span id="line-353"></span><span>    </span><span id="local-6989586621679667193"><span class="annot"><span class="annottext">offVariation :: VariationIndex -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="#local-6989586621679667193"><span class="hs-identifier hs-var hs-var hs-var hs-var">offVariation</span></a></span></span><span> </span><span id="local-6989586621679667192"><span class="annot"><span class="annottext">variationIndex :: VariationIndex
</span><a href="#local-6989586621679667192"><span class="hs-identifier hs-var">variationIndex</span></a></span></span><span> </span><span id="local-6989586621679667191"><span class="annot"><span class="annottext">fb :: FlagBuilder
</span><a href="#local-6989586621679667191"><span class="hs-identifier hs-var">fb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-354"></span><span>        </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667191"><span class="hs-identifier hs-var">fb</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:fbOffVariation:FlagBuilder :: Maybe VariationIndex
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbOffVariation%3AFlagBuilder"><span class="hs-identifier hs-var">fbOffVariation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VariationIndex -&gt; Maybe VariationIndex
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">VariationIndex
</span><a href="#local-6989586621679667192"><span class="hs-identifier hs-var">variationIndex</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-355"></span><span>
</span><span id="line-356"></span><span>    </span><span id="local-6989586621679667190"><span class="annot"><span class="annottext">variationForAll :: VariationIndex -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="#local-6989586621679667190"><span class="hs-identifier hs-var hs-var hs-var hs-var">variationForAll</span></a></span></span><span> </span><span id="local-6989586621679667189"><span class="annot"><span class="annottext">variationIndex :: VariationIndex
</span><a href="#local-6989586621679667189"><span class="hs-identifier hs-var">variationIndex</span></a></span></span><span> </span><span id="local-6989586621679667188"><span class="annot"><span class="annottext">fb :: FlagBuilder
</span><a href="#local-6989586621679667188"><span class="hs-identifier hs-var">fb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-357"></span><span>        </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667188"><span class="hs-identifier hs-var">fb</span></a></span><span>
</span><span id="line-358"></span><span>            </span><span class="annot"><span class="annottext">FlagBuilder -&gt; (FlagBuilder -&gt; FlagBuilder) -&gt; FlagBuilder
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#on"><span class="hs-identifier hs-var">on</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-359"></span><span>            </span><span class="annot"><span class="annottext">FlagBuilder -&gt; (FlagBuilder -&gt; FlagBuilder) -&gt; FlagBuilder
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#clearRules"><span class="hs-identifier hs-var">clearRules</span></a></span><span>
</span><span id="line-360"></span><span>            </span><span class="annot"><span class="annottext">FlagBuilder -&gt; (FlagBuilder -&gt; FlagBuilder) -&gt; FlagBuilder
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#clearTargets"><span class="hs-identifier hs-var">clearTargets</span></a></span><span>
</span><span id="line-361"></span><span>            </span><span class="annot"><span class="annottext">FlagBuilder -&gt; (FlagBuilder -&gt; FlagBuilder) -&gt; FlagBuilder
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">VariationIndex -&gt; FlagBuilder -&gt; FlagBuilder
forall val. Variation val =&gt; val -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#fallthroughVariation"><span class="hs-identifier hs-var">fallthroughVariation</span></a></span><span> </span><span class="annot"><span class="annottext">VariationIndex
</span><a href="#local-6989586621679667189"><span class="hs-identifier hs-var">variationIndex</span></a></span><span>
</span><span id="line-362"></span><span>
</span><span id="line-363"></span><span>    </span><span id="local-6989586621679667187"><span class="annot"><span class="annottext">variationForAllUsers :: VariationIndex -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="#local-6989586621679667187"><span class="hs-identifier hs-var hs-var hs-var hs-var">variationForAllUsers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VariationIndex -&gt; FlagBuilder -&gt; FlagBuilder
forall val. Variation val =&gt; val -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForAll"><span class="hs-identifier hs-var">variationForAll</span></a></span><span>
</span><span id="line-364"></span><span>
</span><span id="line-365"></span><span>    </span><span id="local-6989586621679667186"><span class="annot"><span class="annottext">variationForKey :: Text -&gt; Text -&gt; VariationIndex -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="#local-6989586621679667186"><span class="hs-identifier hs-var hs-var hs-var hs-var">variationForKey</span></a></span></span><span> </span><span id="local-6989586621679667185"><span class="annot"><span class="annottext">kind :: Text
</span><a href="#local-6989586621679667185"><span class="hs-identifier hs-var">kind</span></a></span></span><span> </span><span id="local-6989586621679667184"><span class="annot"><span class="annottext">key :: Text
</span><a href="#local-6989586621679667184"><span class="hs-identifier hs-var">key</span></a></span></span><span> </span><span id="local-6989586621679667183"><span class="annot"><span class="annottext">variationIndex :: VariationIndex
</span><a href="#local-6989586621679667183"><span class="hs-identifier hs-var">variationIndex</span></a></span></span><span> </span><span id="local-6989586621679667182"><span class="annot"><span class="annottext">fb :: FlagBuilder
</span><a href="#local-6989586621679667182"><span class="hs-identifier hs-var">fb</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:fbTargetMap:FlagBuilder :: FlagBuilder -&gt; Map Text (Map VariationIndex (HashSet Text))
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbTargetMap%3AFlagBuilder"><span class="hs-identifier hs-var">fbTargetMap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679667181"><span class="annot"><span class="annottext">Map Text (Map VariationIndex (HashSet Text))
</span><a href="#local-6989586621679667181"><span class="hs-identifier hs-var">targetMap</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-366"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; Map Text (Map VariationIndex (HashSet Text))
-&gt; Maybe (Map VariationIndex (HashSet Text))
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679667185"><span class="hs-identifier hs-var">kind</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text (Map VariationIndex (HashSet Text))
</span><a href="#local-6989586621679667181"><span class="hs-identifier hs-var">targetMap</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-367"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667182"><span class="hs-identifier hs-var">fb</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:fbTargetMap:FlagBuilder :: Map Text (Map VariationIndex (HashSet Text))
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbTargetMap%3AFlagBuilder"><span class="hs-identifier hs-var">fbTargetMap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; Map VariationIndex (HashSet Text)
-&gt; Map Text (Map VariationIndex (HashSet Text))
-&gt; Map Text (Map VariationIndex (HashSet Text))
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679667185"><span class="hs-identifier hs-var">kind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VariationIndex -&gt; HashSet Text -&gt; Map VariationIndex (HashSet Text)
forall k a. k -&gt; a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.singleton</span></span><span> </span><span class="annot"><span class="annottext">VariationIndex
</span><a href="#local-6989586621679667183"><span class="hs-identifier hs-var">variationIndex</span></a></span><span> </span><span class="annot"><span class="annottext">(HashSet Text -&gt; Map VariationIndex (HashSet Text))
-&gt; HashSet Text -&gt; Map VariationIndex (HashSet Text)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; HashSet Text
forall a. Hashable a =&gt; a -&gt; HashSet a
</span><span class="hs-identifier hs-var">HS.singleton</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679667184"><span class="hs-identifier hs-var">key</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Text (Map VariationIndex (HashSet Text))
</span><a href="#local-6989586621679667181"><span class="hs-identifier hs-var">targetMap</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-368"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679667176"><span class="annot"><span class="annottext">m :: Map VariationIndex (HashSet Text)
</span><a href="#local-6989586621679667176"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-369"></span><span>                </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">VariationIndex
-&gt; Map VariationIndex (HashSet Text) -&gt; Maybe (HashSet Text)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">VariationIndex
</span><a href="#local-6989586621679667183"><span class="hs-identifier hs-var">variationIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Map VariationIndex (HashSet Text)
</span><a href="#local-6989586621679667176"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-370"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667182"><span class="hs-identifier hs-var">fb</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:fbTargetMap:FlagBuilder :: Map Text (Map VariationIndex (HashSet Text))
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbTargetMap%3AFlagBuilder"><span class="hs-identifier hs-var">fbTargetMap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; Map VariationIndex (HashSet Text)
-&gt; Map Text (Map VariationIndex (HashSet Text))
-&gt; Map Text (Map VariationIndex (HashSet Text))
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679667185"><span class="hs-identifier hs-var">kind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VariationIndex
-&gt; HashSet Text
-&gt; Map VariationIndex (HashSet Text)
-&gt; Map VariationIndex (HashSet Text)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">VariationIndex
</span><a href="#local-6989586621679667183"><span class="hs-identifier hs-var">variationIndex</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; HashSet Text
forall a. Hashable a =&gt; a -&gt; HashSet a
</span><span class="hs-identifier hs-var">HS.singleton</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679667184"><span class="hs-identifier hs-var">key</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map VariationIndex (HashSet Text)
</span><a href="#local-6989586621679667176"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Text (Map VariationIndex (HashSet Text))
</span><a href="#local-6989586621679667181"><span class="hs-identifier hs-var">targetMap</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-371"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679667175"><span class="annot"><span class="annottext">keys :: HashSet Text
</span><a href="#local-6989586621679667175"><span class="hs-identifier hs-var">keys</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667182"><span class="hs-identifier hs-var">fb</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:fbTargetMap:FlagBuilder :: Map Text (Map VariationIndex (HashSet Text))
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbTargetMap%3AFlagBuilder"><span class="hs-identifier hs-var">fbTargetMap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; Map VariationIndex (HashSet Text)
-&gt; Map Text (Map VariationIndex (HashSet Text))
-&gt; Map Text (Map VariationIndex (HashSet Text))
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679667185"><span class="hs-identifier hs-var">kind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VariationIndex
-&gt; HashSet Text
-&gt; Map VariationIndex (HashSet Text)
-&gt; Map VariationIndex (HashSet Text)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">VariationIndex
</span><a href="#local-6989586621679667183"><span class="hs-identifier hs-var">variationIndex</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; HashSet Text -&gt; HashSet Text
forall a. (Eq a, Hashable a) =&gt; a -&gt; HashSet a -&gt; HashSet a
</span><span class="hs-identifier hs-var">HS.insert</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679667184"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="annot"><span class="annottext">HashSet Text
</span><a href="#local-6989586621679667175"><span class="hs-identifier hs-var">keys</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map VariationIndex (HashSet Text)
</span><a href="#local-6989586621679667176"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Text (Map VariationIndex (HashSet Text))
</span><a href="#local-6989586621679667181"><span class="hs-identifier hs-var">targetMap</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-372"></span><span>
</span><span id="line-373"></span><span>    </span><span id="local-6989586621679667173"><span class="annot"><span class="annottext">variationForUser :: Text -&gt; VariationIndex -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="#local-6989586621679667173"><span class="hs-identifier hs-var hs-var hs-var hs-var">variationForUser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; VariationIndex -&gt; FlagBuilder -&gt; FlagBuilder
forall val.
Variation val =&gt;
Text -&gt; Text -&gt; val -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForKey"><span class="hs-identifier hs-var">variationForKey</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;user&quot;</span></span><span>
</span><span id="line-374"></span><span>
</span><span id="line-375"></span><span>    </span><span id="local-6989586621679667172"><span class="annot"><span class="annottext">thenReturn :: VariationIndex -&gt; FlagRuleBuilder -&gt; FlagBuilder
</span><a href="#local-6989586621679667172"><span class="hs-identifier hs-var hs-var hs-var hs-var">thenReturn</span></a></span></span><span> </span><span id="local-6989586621679667171"><span class="annot"><span class="annottext">variationIndex :: VariationIndex
</span><a href="#local-6989586621679667171"><span class="hs-identifier hs-var">variationIndex</span></a></span></span><span> </span><span id="local-6989586621679667170"><span class="annot"><span class="annottext">ruleBuilder :: FlagRuleBuilder
</span><a href="#local-6989586621679667170"><span class="hs-identifier hs-var">ruleBuilder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-376"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679667169"><span class="annot"><span class="annottext">fb :: FlagBuilder
</span><a href="#local-6989586621679667169"><span class="hs-identifier hs-var hs-var">fb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FlagRuleBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfrbBaseBuilder%3AFlagRuleBuilder"><span class="hs-identifier hs-var hs-var">frbBaseBuilder</span></a></span><span> </span><span class="annot"><span class="annottext">FlagRuleBuilder
</span><a href="#local-6989586621679667170"><span class="hs-identifier hs-var">ruleBuilder</span></a></span><span>
</span><span id="line-377"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667169"><span class="hs-identifier hs-var">fb</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:fbRules:FlagBuilder :: [FlagRule]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbRules%3AFlagBuilder"><span class="hs-identifier hs-var">fbRules</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Clause] -&gt; VariationIndex -&gt; FlagRule
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagRule"><span class="hs-identifier hs-var">FlagRule</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FlagRuleBuilder -&gt; [Clause]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfrbClauses%3AFlagRuleBuilder"><span class="hs-identifier hs-var hs-var">frbClauses</span></a></span><span> </span><span class="annot"><span class="annottext">FlagRuleBuilder
</span><a href="#local-6989586621679667170"><span class="hs-identifier hs-var">ruleBuilder</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">VariationIndex
</span><a href="#local-6989586621679667171"><span class="hs-identifier hs-var">variationIndex</span></a></span><span> </span><span class="annot"><span class="annottext">FlagRule -&gt; [FlagRule] -&gt; [FlagRule]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">FlagBuilder -&gt; [FlagRule]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfbRules%3AFlagBuilder"><span class="hs-identifier hs-var hs-var">fbRules</span></a></span><span> </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667169"><span class="hs-identifier hs-var">fb</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-378"></span><span>
</span><span id="line-379"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#Variation"><span class="hs-identifier hs-type">Variation</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-380"></span><span>    </span><span id="local-6989586621679667158"><span class="annot"><span class="annottext">fallthroughVariation :: Bool -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="#local-6989586621679667158"><span class="hs-identifier hs-var hs-var hs-var hs-var">fallthroughVariation</span></a></span></span><span> </span><span id="local-6989586621679667157"><span class="annot"><span class="annottext">value :: Bool
</span><a href="#local-6989586621679667157"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span id="local-6989586621679667156"><span class="annot"><span class="annottext">fb :: FlagBuilder
</span><a href="#local-6989586621679667156"><span class="hs-identifier hs-var">fb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-381"></span><span>        </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667156"><span class="hs-identifier hs-var">fb</span></a></span><span>
</span><span id="line-382"></span><span>            </span><span class="annot"><span class="annottext">FlagBuilder -&gt; (FlagBuilder -&gt; FlagBuilder) -&gt; FlagBuilder
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#booleanFlag"><span class="hs-identifier hs-var">booleanFlag</span></a></span><span>
</span><span id="line-383"></span><span>            </span><span class="annot"><span class="annottext">FlagBuilder -&gt; (FlagBuilder -&gt; FlagBuilder) -&gt; FlagBuilder
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">VariationIndex -&gt; FlagBuilder -&gt; FlagBuilder
forall val. Variation val =&gt; val -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#fallthroughVariation"><span class="hs-identifier hs-var">fallthroughVariation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; VariationIndex
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForBoolean"><span class="hs-identifier hs-var">variationForBoolean</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679667157"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-384"></span><span>    </span><span id="local-6989586621679667155"><span class="annot"><span class="annottext">offVariation :: Bool -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="#local-6989586621679667155"><span class="hs-identifier hs-var hs-var hs-var hs-var">offVariation</span></a></span></span><span> </span><span id="local-6989586621679667154"><span class="annot"><span class="annottext">value :: Bool
</span><a href="#local-6989586621679667154"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span id="local-6989586621679667153"><span class="annot"><span class="annottext">fb :: FlagBuilder
</span><a href="#local-6989586621679667153"><span class="hs-identifier hs-var">fb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-385"></span><span>        </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667153"><span class="hs-identifier hs-var">fb</span></a></span><span>
</span><span id="line-386"></span><span>            </span><span class="annot"><span class="annottext">FlagBuilder -&gt; (FlagBuilder -&gt; FlagBuilder) -&gt; FlagBuilder
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#booleanFlag"><span class="hs-identifier hs-var">booleanFlag</span></a></span><span>
</span><span id="line-387"></span><span>            </span><span class="annot"><span class="annottext">FlagBuilder -&gt; (FlagBuilder -&gt; FlagBuilder) -&gt; FlagBuilder
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">VariationIndex -&gt; FlagBuilder -&gt; FlagBuilder
forall val. Variation val =&gt; val -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#offVariation"><span class="hs-identifier hs-var">offVariation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; VariationIndex
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForBoolean"><span class="hs-identifier hs-var">variationForBoolean</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679667154"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-388"></span><span>    </span><span id="local-6989586621679667152"><span class="annot"><span class="annottext">variationForAll :: Bool -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="#local-6989586621679667152"><span class="hs-identifier hs-var hs-var hs-var hs-var">variationForAll</span></a></span></span><span> </span><span id="local-6989586621679667151"><span class="annot"><span class="annottext">value :: Bool
</span><a href="#local-6989586621679667151"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span id="local-6989586621679667150"><span class="annot"><span class="annottext">fb :: FlagBuilder
</span><a href="#local-6989586621679667150"><span class="hs-identifier hs-var">fb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-389"></span><span>        </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667150"><span class="hs-identifier hs-var">fb</span></a></span><span>
</span><span id="line-390"></span><span>            </span><span class="annot"><span class="annottext">FlagBuilder -&gt; (FlagBuilder -&gt; FlagBuilder) -&gt; FlagBuilder
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#booleanFlag"><span class="hs-identifier hs-var">booleanFlag</span></a></span><span>
</span><span id="line-391"></span><span>            </span><span class="annot"><span class="annottext">FlagBuilder -&gt; (FlagBuilder -&gt; FlagBuilder) -&gt; FlagBuilder
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">VariationIndex -&gt; FlagBuilder -&gt; FlagBuilder
forall val. Variation val =&gt; val -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForAll"><span class="hs-identifier hs-var">variationForAll</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; VariationIndex
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForBoolean"><span class="hs-identifier hs-var">variationForBoolean</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679667151"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-392"></span><span>    </span><span id="local-6989586621679667149"><span class="annot"><span class="annottext">variationForAllUsers :: Bool -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="#local-6989586621679667149"><span class="hs-identifier hs-var hs-var hs-var hs-var">variationForAllUsers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; FlagBuilder -&gt; FlagBuilder
forall val. Variation val =&gt; val -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForAll"><span class="hs-identifier hs-var">variationForAll</span></a></span><span>
</span><span id="line-393"></span><span>    </span><span id="local-6989586621679667148"><span class="annot"><span class="annottext">variationForKey :: Text -&gt; Text -&gt; Bool -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="#local-6989586621679667148"><span class="hs-identifier hs-var hs-var hs-var hs-var">variationForKey</span></a></span></span><span> </span><span id="local-6989586621679667147"><span class="annot"><span class="annottext">kind :: Text
</span><a href="#local-6989586621679667147"><span class="hs-identifier hs-var">kind</span></a></span></span><span> </span><span id="local-6989586621679667146"><span class="annot"><span class="annottext">key :: Text
</span><a href="#local-6989586621679667146"><span class="hs-identifier hs-var">key</span></a></span></span><span> </span><span id="local-6989586621679667145"><span class="annot"><span class="annottext">value :: Bool
</span><a href="#local-6989586621679667145"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span id="local-6989586621679667144"><span class="annot"><span class="annottext">fb :: FlagBuilder
</span><a href="#local-6989586621679667144"><span class="hs-identifier hs-var">fb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-394"></span><span>        </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667144"><span class="hs-identifier hs-var">fb</span></a></span><span>
</span><span id="line-395"></span><span>            </span><span class="annot"><span class="annottext">FlagBuilder -&gt; (FlagBuilder -&gt; FlagBuilder) -&gt; FlagBuilder
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#booleanFlag"><span class="hs-identifier hs-var">booleanFlag</span></a></span><span>
</span><span id="line-396"></span><span>            </span><span class="annot"><span class="annottext">FlagBuilder -&gt; (FlagBuilder -&gt; FlagBuilder) -&gt; FlagBuilder
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; VariationIndex -&gt; FlagBuilder -&gt; FlagBuilder
forall val.
Variation val =&gt;
Text -&gt; Text -&gt; val -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForKey"><span class="hs-identifier hs-var">variationForKey</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679667147"><span class="hs-identifier hs-var">kind</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679667146"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; VariationIndex
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForBoolean"><span class="hs-identifier hs-var">variationForBoolean</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679667145"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-397"></span><span>    </span><span id="local-6989586621679667143"><span class="annot"><span class="annottext">variationForUser :: Text -&gt; Bool -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="#local-6989586621679667143"><span class="hs-identifier hs-var hs-var hs-var hs-var">variationForUser</span></a></span></span><span> </span><span id="local-6989586621679667142"><span class="annot"><span class="annottext">userKey :: Text
</span><a href="#local-6989586621679667142"><span class="hs-identifier hs-var">userKey</span></a></span></span><span> </span><span id="local-6989586621679667141"><span class="annot"><span class="annottext">value :: Bool
</span><a href="#local-6989586621679667141"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span id="local-6989586621679667140"><span class="annot"><span class="annottext">fb :: FlagBuilder
</span><a href="#local-6989586621679667140"><span class="hs-identifier hs-var">fb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-398"></span><span>        </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667140"><span class="hs-identifier hs-var">fb</span></a></span><span>
</span><span id="line-399"></span><span>            </span><span class="annot"><span class="annottext">FlagBuilder -&gt; (FlagBuilder -&gt; FlagBuilder) -&gt; FlagBuilder
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#booleanFlag"><span class="hs-identifier hs-var">booleanFlag</span></a></span><span>
</span><span id="line-400"></span><span>            </span><span class="annot"><span class="annottext">FlagBuilder -&gt; (FlagBuilder -&gt; FlagBuilder) -&gt; FlagBuilder
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; VariationIndex -&gt; FlagBuilder -&gt; FlagBuilder
forall val.
Variation val =&gt;
Text -&gt; val -&gt; FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForUser"><span class="hs-identifier hs-var">variationForUser</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679667142"><span class="hs-identifier hs-var">userKey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; VariationIndex
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForBoolean"><span class="hs-identifier hs-var">variationForBoolean</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679667141"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-401"></span><span>    </span><span id="local-6989586621679667139"><span class="annot"><span class="annottext">thenReturn :: Bool -&gt; FlagRuleBuilder -&gt; FlagBuilder
</span><a href="#local-6989586621679667139"><span class="hs-identifier hs-var hs-var hs-var hs-var">thenReturn</span></a></span></span><span> </span><span id="local-6989586621679667138"><span class="annot"><span class="annottext">value :: Bool
</span><a href="#local-6989586621679667138"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span id="local-6989586621679667137"><span class="annot"><span class="annottext">ruleBuilder :: FlagRuleBuilder
</span><a href="#local-6989586621679667137"><span class="hs-identifier hs-var">ruleBuilder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-402"></span><span>        </span><span class="annot"><span class="annottext">FlagRuleBuilder
</span><a href="#local-6989586621679667137"><span class="hs-identifier hs-var">ruleBuilder</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:frbBaseBuilder:FlagRuleBuilder :: FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfrbBaseBuilder%3AFlagRuleBuilder"><span class="hs-identifier hs-var">frbBaseBuilder</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FlagBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#booleanFlag"><span class="hs-identifier hs-var">booleanFlag</span></a></span><span> </span><span class="annot"><span class="annottext">(FlagBuilder -&gt; FlagBuilder) -&gt; FlagBuilder -&gt; FlagBuilder
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FlagRuleBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfrbBaseBuilder%3AFlagRuleBuilder"><span class="hs-identifier hs-var hs-var">frbBaseBuilder</span></a></span><span> </span><span class="annot"><span class="annottext">FlagRuleBuilder
</span><a href="#local-6989586621679667137"><span class="hs-identifier hs-var">ruleBuilder</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-403"></span><span>            </span><span class="annot"><span class="annottext">FlagRuleBuilder -&gt; (FlagRuleBuilder -&gt; FlagBuilder) -&gt; FlagBuilder
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">VariationIndex -&gt; FlagRuleBuilder -&gt; FlagBuilder
forall val. Variation val =&gt; val -&gt; FlagRuleBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#thenReturn"><span class="hs-identifier hs-var">thenReturn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; VariationIndex
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForBoolean"><span class="hs-identifier hs-var">variationForBoolean</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679667138"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-404"></span><span>
</span><span id="line-405"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-406"></span><span class="hs-comment">-- Starts defining a flag rule, using the &quot;is one of&quot; operator.</span><span>
</span><span id="line-407"></span><span class="hs-comment">--</span><span>
</span><span id="line-408"></span><span class="hs-comment">-- For example, this creates a rule that returns @True@ if the name is</span><span>
</span><span id="line-409"></span><span class="hs-comment">-- \&quot;Patsy\&quot; or \&quot;Edina\&quot;:</span><span>
</span><span id="line-410"></span><span class="hs-comment">--</span><span>
</span><span id="line-411"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-412"></span><span class="hs-comment">-- testData</span><span>
</span><span id="line-413"></span><span class="hs-comment">--     &amp; flag &quot;flag&quot;</span><span>
</span><span id="line-414"></span><span class="hs-comment">--     &amp; ifMatchContext &quot;user&quot; &quot;name&quot; [toJSON \&quot;Patsy\&quot;, toJSON \&quot;Edina\&quot;]</span><span>
</span><span id="line-415"></span><span class="hs-comment">--     &amp; thenReturn True</span><span>
</span><span id="line-416"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-417"></span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#ifMatchContext"><span class="hs-identifier hs-type">ifMatchContext</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-418"></span><span>    </span><span class="hs-comment">-- | the context kind to match again</span><span>
</span><span id="line-419"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-420"></span><span>    </span><span class="hs-comment">-- | the context attribute to match against</span><span>
</span><span id="line-421"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-422"></span><span>    </span><span class="hs-comment">-- | values to compare to</span><span>
</span><span id="line-423"></span><span>    </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-424"></span><span>    </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-425"></span><span>    </span><span class="hs-comment">-- | call 'thenReturn' to finish the rule, or add more tests with 'andMatch' or 'andNotMatch'</span><span>
</span><span id="line-426"></span><span>    </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagRuleBuilder"><span class="hs-identifier hs-type">FlagRuleBuilder</span></a></span><span>
</span><span id="line-427"></span><span id="ifMatchContext"><span class="annot"><span class="annottext">ifMatchContext :: Text -&gt; Text -&gt; [Value] -&gt; FlagBuilder -&gt; FlagRuleBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#ifMatchContext"><span class="hs-identifier hs-var hs-var">ifMatchContext</span></a></span></span><span> </span><span id="local-6989586621679667136"><span class="annot"><span class="annottext">kind :: Text
</span><a href="#local-6989586621679667136"><span class="hs-identifier hs-var">kind</span></a></span></span><span> </span><span id="local-6989586621679667135"><span class="annot"><span class="annottext">attribute :: Text
</span><a href="#local-6989586621679667135"><span class="hs-identifier hs-var">attribute</span></a></span></span><span> </span><span id="local-6989586621679667134"><span class="annot"><span class="annottext">values :: [Value]
</span><a href="#local-6989586621679667134"><span class="hs-identifier hs-var">values</span></a></span></span><span> </span><span id="local-6989586621679667133"><span class="annot"><span class="annottext">fb :: FlagBuilder
</span><a href="#local-6989586621679667133"><span class="hs-identifier hs-var">fb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-428"></span><span>    </span><span class="annot"><span class="annottext">FlagBuilder -&gt; FlagRuleBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#newFlagRuleBuilder"><span class="hs-identifier hs-var">newFlagRuleBuilder</span></a></span><span> </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667133"><span class="hs-identifier hs-var">fb</span></a></span><span>
</span><span id="line-429"></span><span>        </span><span class="annot"><span class="annottext">FlagRuleBuilder
-&gt; (FlagRuleBuilder -&gt; FlagRuleBuilder) -&gt; FlagRuleBuilder
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; [Value] -&gt; FlagRuleBuilder -&gt; FlagRuleBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#andMatchContext"><span class="hs-identifier hs-var">andMatchContext</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679667136"><span class="hs-identifier hs-var">kind</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679667135"><span class="hs-identifier hs-var">attribute</span></a></span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679667134"><span class="hs-identifier hs-var">values</span></a></span><span>
</span><span id="line-430"></span><span>
</span><span id="line-431"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">ifMatch</span><span> </span><span class="hs-pragma">&quot;Use ifMatchContext instead&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-432"></span><span>
</span><span id="line-433"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-434"></span><span class="hs-comment">-- Starts defining a flag rule, using the &quot;is one of&quot; operator.</span><span>
</span><span id="line-435"></span><span class="hs-comment">--</span><span>
</span><span id="line-436"></span><span class="hs-comment">-- This is a shortcut for calling 'ifMatch' with a context kind of &quot;user&quot;.</span><span>
</span><span id="line-437"></span><span class="hs-comment">--</span><span>
</span><span id="line-438"></span><span class="hs-comment">-- For example, this creates a rule that returns @True@ if the name is</span><span>
</span><span id="line-439"></span><span class="hs-comment">-- \&quot;Patsy\&quot; or \&quot;Edina\&quot;:</span><span>
</span><span id="line-440"></span><span class="hs-comment">--</span><span>
</span><span id="line-441"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-442"></span><span class="hs-comment">-- testData</span><span>
</span><span id="line-443"></span><span class="hs-comment">--     &amp; flag &quot;flag&quot;</span><span>
</span><span id="line-444"></span><span class="hs-comment">--     &amp; ifMatch &quot;name&quot; [toJSON \&quot;Patsy\&quot;, toJSON \&quot;Edina\&quot;]</span><span>
</span><span id="line-445"></span><span class="hs-comment">--     &amp; thenReturn True</span><span>
</span><span id="line-446"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-447"></span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#ifMatch"><span class="hs-identifier hs-type">ifMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-448"></span><span>    </span><span class="hs-comment">-- | the context attribute to match against</span><span>
</span><span id="line-449"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-450"></span><span>    </span><span class="hs-comment">-- | values to compare to</span><span>
</span><span id="line-451"></span><span>    </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-452"></span><span>    </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-453"></span><span>    </span><span class="hs-comment">-- | call 'thenReturn' to finish the rule, or add more tests with 'andMatch' or 'andNotMatch'</span><span>
</span><span id="line-454"></span><span>    </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagRuleBuilder"><span class="hs-identifier hs-type">FlagRuleBuilder</span></a></span><span>
</span><span id="line-455"></span><span id="ifMatch"><span class="annot"><span class="annottext">ifMatch :: Text -&gt; [Value] -&gt; FlagBuilder -&gt; FlagRuleBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#ifMatch"><span class="hs-identifier hs-var hs-var">ifMatch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; [Value] -&gt; FlagBuilder -&gt; FlagRuleBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#ifMatchContext"><span class="hs-identifier hs-var">ifMatchContext</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;user&quot;</span></span><span>
</span><span id="line-456"></span><span>
</span><span id="line-457"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-458"></span><span class="hs-comment">-- Starts defining a flag rule, using the &quot;is not one of&quot; operator.</span><span>
</span><span id="line-459"></span><span class="hs-comment">--</span><span>
</span><span id="line-460"></span><span class="hs-comment">-- For example, this creates a rule that returns @True@ if the name is neither</span><span>
</span><span id="line-461"></span><span class="hs-comment">-- \&quot;Saffron\&quot; nor \&quot;Bubble\&quot;</span><span>
</span><span id="line-462"></span><span class="hs-comment">--</span><span>
</span><span id="line-463"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-464"></span><span class="hs-comment">-- testData</span><span>
</span><span id="line-465"></span><span class="hs-comment">--     &amp; flag &quot;flag&quot;</span><span>
</span><span id="line-466"></span><span class="hs-comment">--     &amp; ifNotMatchContext &quot;user&quot; &quot;name&quot; [toJSON \&quot;Saffron\&quot;, toJSON \&quot;Bubble\&quot;]</span><span>
</span><span id="line-467"></span><span class="hs-comment">--     &amp; thenReturn True</span><span>
</span><span id="line-468"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-469"></span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#ifNotMatchContext"><span class="hs-identifier hs-type">ifNotMatchContext</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-470"></span><span>    </span><span class="hs-comment">-- | context kind to match again</span><span>
</span><span id="line-471"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-472"></span><span>    </span><span class="hs-comment">-- | attribute to match against</span><span>
</span><span id="line-473"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-474"></span><span>    </span><span class="hs-comment">-- | values to compare to</span><span>
</span><span id="line-475"></span><span>    </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-476"></span><span>    </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-477"></span><span>    </span><span class="hs-comment">-- | call 'thenReturn' to finish the rule, or add more tests with 'andMatch' or 'andNotMatch'</span><span>
</span><span id="line-478"></span><span>    </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagRuleBuilder"><span class="hs-identifier hs-type">FlagRuleBuilder</span></a></span><span>
</span><span id="line-479"></span><span id="ifNotMatchContext"><span class="annot"><span class="annottext">ifNotMatchContext :: Text -&gt; Text -&gt; [Value] -&gt; FlagBuilder -&gt; FlagRuleBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#ifNotMatchContext"><span class="hs-identifier hs-var hs-var">ifNotMatchContext</span></a></span></span><span> </span><span id="local-6989586621679667131"><span class="annot"><span class="annottext">kind :: Text
</span><a href="#local-6989586621679667131"><span class="hs-identifier hs-var">kind</span></a></span></span><span> </span><span id="local-6989586621679667130"><span class="annot"><span class="annottext">attibute :: Text
</span><a href="#local-6989586621679667130"><span class="hs-identifier hs-var">attibute</span></a></span></span><span> </span><span id="local-6989586621679667129"><span class="annot"><span class="annottext">values :: [Value]
</span><a href="#local-6989586621679667129"><span class="hs-identifier hs-var">values</span></a></span></span><span> </span><span id="local-6989586621679667128"><span class="annot"><span class="annottext">fb :: FlagBuilder
</span><a href="#local-6989586621679667128"><span class="hs-identifier hs-var">fb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-480"></span><span>    </span><span class="annot"><span class="annottext">FlagBuilder -&gt; FlagRuleBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#newFlagRuleBuilder"><span class="hs-identifier hs-var">newFlagRuleBuilder</span></a></span><span> </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667128"><span class="hs-identifier hs-var">fb</span></a></span><span>
</span><span id="line-481"></span><span>        </span><span class="annot"><span class="annottext">FlagRuleBuilder
-&gt; (FlagRuleBuilder -&gt; FlagRuleBuilder) -&gt; FlagRuleBuilder
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; [Value] -&gt; FlagRuleBuilder -&gt; FlagRuleBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#andNotMatchContext"><span class="hs-identifier hs-var">andNotMatchContext</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679667131"><span class="hs-identifier hs-var">kind</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679667130"><span class="hs-identifier hs-var">attibute</span></a></span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679667129"><span class="hs-identifier hs-var">values</span></a></span><span>
</span><span id="line-482"></span><span>
</span><span id="line-483"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">ifNotMatch</span><span> </span><span class="hs-pragma">&quot;Use ifNotMatchContext instead&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-484"></span><span>
</span><span id="line-485"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-486"></span><span class="hs-comment">-- Starts defining a flag rule, using the &quot;is not one of&quot; operator.</span><span>
</span><span id="line-487"></span><span class="hs-comment">--</span><span>
</span><span id="line-488"></span><span class="hs-comment">-- This is a shortcut for calling 'ifNotMatchContext' with a context kind of</span><span>
</span><span id="line-489"></span><span class="hs-comment">-- &quot;user&quot;.</span><span>
</span><span id="line-490"></span><span class="hs-comment">--</span><span>
</span><span id="line-491"></span><span class="hs-comment">-- For example, this creates a rule that returns @True@ if the name is neither</span><span>
</span><span id="line-492"></span><span class="hs-comment">-- \&quot;Saffron\&quot; nor \&quot;Bubble\&quot;</span><span>
</span><span id="line-493"></span><span class="hs-comment">--</span><span>
</span><span id="line-494"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-495"></span><span class="hs-comment">-- testData</span><span>
</span><span id="line-496"></span><span class="hs-comment">--     &amp; flag &quot;flag&quot;</span><span>
</span><span id="line-497"></span><span class="hs-comment">--     &amp; ifNotMatch &quot;name&quot; [toJSON \&quot;Saffron\&quot;, toJSON \&quot;Bubble\&quot;]</span><span>
</span><span id="line-498"></span><span class="hs-comment">--     &amp; thenReturn True</span><span>
</span><span id="line-499"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-500"></span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#ifNotMatch"><span class="hs-identifier hs-type">ifNotMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-501"></span><span>    </span><span class="hs-comment">-- | attribute to match against</span><span>
</span><span id="line-502"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-503"></span><span>    </span><span class="hs-comment">-- | values to compare to</span><span>
</span><span id="line-504"></span><span>    </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-505"></span><span>    </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-506"></span><span>    </span><span class="hs-comment">-- | call 'thenReturn' to finish the rule, or add more tests with 'andMatch' or 'andNotMatch'</span><span>
</span><span id="line-507"></span><span>    </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagRuleBuilder"><span class="hs-identifier hs-type">FlagRuleBuilder</span></a></span><span>
</span><span id="line-508"></span><span id="ifNotMatch"><span class="annot"><span class="annottext">ifNotMatch :: Text -&gt; [Value] -&gt; FlagBuilder -&gt; FlagRuleBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#ifNotMatch"><span class="hs-identifier hs-var hs-var">ifNotMatch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; [Value] -&gt; FlagBuilder -&gt; FlagRuleBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#ifNotMatchContext"><span class="hs-identifier hs-var">ifNotMatchContext</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;user&quot;</span></span><span>
</span><span id="line-509"></span><span>
</span><span id="line-510"></span><span class="hs-keyword">data</span><span> </span><span id="Clause"><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#Clause"><span class="hs-identifier hs-var">Clause</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Clause"><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#Clause"><span class="hs-identifier hs-var">Clause</span></a></span></span><span>
</span><span id="line-511"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AclauseAttribute%3AClause"><span class="annot"><span class="annottext">Clause -&gt; Text
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AclauseAttribute%3AClause"><span class="hs-identifier hs-var hs-var">clauseAttribute</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-512"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AcontextKind%3AClause"><span class="annot"><span class="annottext">Clause -&gt; Text
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AcontextKind%3AClause"><span class="hs-identifier hs-var hs-var">contextKind</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-513"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AclauseValues%3AClause"><span class="annot"><span class="annottext">Clause -&gt; [Value]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AclauseValues%3AClause"><span class="hs-identifier hs-var hs-var">clauseValues</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span class="hs-special">]</span><span>
</span><span id="line-514"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AclauseNegate%3AClause"><span class="annot"><span class="annottext">Clause -&gt; Bool
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AclauseNegate%3AClause"><span class="hs-identifier hs-var hs-var">clauseNegate</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-515"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-516"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679667117"><span id="local-6989586621679667119"><span id="local-6989586621679667121"><span class="annot"><span class="annottext">Int -&gt; Clause -&gt; ShowS
[Clause] -&gt; ShowS
Clause -&gt; String
(Int -&gt; Clause -&gt; ShowS)
-&gt; (Clause -&gt; String) -&gt; ([Clause] -&gt; ShowS) -&gt; Show Clause
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Clause] -&gt; ShowS
$cshowList :: [Clause] -&gt; ShowS
show :: Clause -&gt; String
$cshow :: Clause -&gt; String
showsPrec :: Int -&gt; Clause -&gt; ShowS
$cshowsPrec :: Int -&gt; Clause -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-517"></span><span>
</span><span id="line-518"></span><span class="hs-keyword">data</span><span> </span><span id="FlagRule"><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagRule"><span class="hs-identifier hs-var">FlagRule</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="FlagRule"><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagRule"><span class="hs-identifier hs-var">FlagRule</span></a></span></span><span>
</span><span id="line-519"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AfrClauses%3AFlagRule"><span class="annot"><span class="annottext">FlagRule -&gt; [Clause]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfrClauses%3AFlagRule"><span class="hs-identifier hs-var hs-var">frClauses</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-520"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AfrVariation%3AFlagRule"><span class="annot"><span class="annottext">FlagRule -&gt; VariationIndex
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfrVariation%3AFlagRule"><span class="hs-identifier hs-var hs-var">frVariation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#VariationIndex"><span class="hs-identifier hs-type">VariationIndex</span></a></span><span>
</span><span id="line-521"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-522"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679667109"><span id="local-6989586621679667111"><span id="local-6989586621679667113"><span class="annot"><span class="annottext">Int -&gt; FlagRule -&gt; ShowS
[FlagRule] -&gt; ShowS
FlagRule -&gt; String
(Int -&gt; FlagRule -&gt; ShowS)
-&gt; (FlagRule -&gt; String) -&gt; ([FlagRule] -&gt; ShowS) -&gt; Show FlagRule
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [FlagRule] -&gt; ShowS
$cshowList :: [FlagRule] -&gt; ShowS
show :: FlagRule -&gt; String
$cshow :: FlagRule -&gt; String
showsPrec :: Int -&gt; FlagRule -&gt; ShowS
$cshowsPrec :: Int -&gt; FlagRule -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-523"></span><span>
</span><span id="line-524"></span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#convertFlagRule"><span class="hs-identifier hs-type">convertFlagRule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagRule"><span class="hs-identifier hs-type">FlagRule</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Features.html#Rule"><span class="hs-identifier hs-type">F.Rule</span></a></span><span>
</span><span id="line-525"></span><span id="convertFlagRule"><span class="annot"><span class="annottext">convertFlagRule :: VariationIndex -&gt; FlagRule -&gt; Rule
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#convertFlagRule"><span class="hs-identifier hs-var hs-var">convertFlagRule</span></a></span></span><span> </span><span id="local-6989586621679667108"><span class="annot"><span class="annottext">idx :: VariationIndex
</span><a href="#local-6989586621679667108"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span id="local-6989586621679667107"><span class="annot"><span class="annottext">flagRule :: FlagRule
</span><a href="#local-6989586621679667107"><span class="hs-identifier hs-var">flagRule</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-526"></span><span>    </span><span class="annot"><span class="annottext">$WRule :: Text -&gt; [Clause] -&gt; VariationOrRollout -&gt; Bool -&gt; Rule
</span><a href="LaunchDarkly.Server.Features.html#%24WRule"><span class="hs-identifier hs-type hs-type">F.Rule</span></a></span><span>
</span><span id="line-527"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:id:Rule :: Text
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3Aid%3ARule"><span class="hs-identifier hs-var">F.id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; String -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;rule&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">VariationIndex -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">VariationIndex
</span><a href="#local-6989586621679667108"><span class="hs-identifier hs-var">idx</span></a></span><span>
</span><span id="line-528"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:variationOrRollout:Rule :: VariationOrRollout
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3AvariationOrRollout%3ARule"><span class="hs-identifier hs-var">F.variationOrRollout</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe VariationIndex -&gt; Maybe Rollout -&gt; VariationOrRollout
</span><a href="LaunchDarkly.Server.Features.html#VariationOrRollout"><span class="hs-identifier hs-var">F.VariationOrRollout</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VariationIndex -&gt; Maybe VariationIndex
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(VariationIndex -&gt; Maybe VariationIndex)
-&gt; VariationIndex -&gt; Maybe VariationIndex
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FlagRule -&gt; VariationIndex
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfrVariation%3AFlagRule"><span class="hs-identifier hs-var hs-var">frVariation</span></a></span><span> </span><span class="annot"><span class="annottext">FlagRule
</span><a href="#local-6989586621679667107"><span class="hs-identifier hs-var">flagRule</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Rollout
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-529"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:clauses:Rule :: [Clause]
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3Aclauses%3ARule"><span class="hs-identifier hs-var">F.clauses</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Clause -&gt; Clause) -&gt; [Clause] -&gt; [Clause]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Clause
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#convertClause"><span class="hs-identifier hs-var">convertClause</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FlagRule -&gt; [Clause]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfrClauses%3AFlagRule"><span class="hs-identifier hs-var hs-var">frClauses</span></a></span><span> </span><span class="annot"><span class="annottext">FlagRule
</span><a href="#local-6989586621679667107"><span class="hs-identifier hs-var">flagRule</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-530"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:trackEvents:Rule :: Bool
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3AtrackEvents%3ARule"><span class="hs-identifier hs-var">F.trackEvents</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-531"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-532"></span><span>
</span><span id="line-533"></span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#convertClause"><span class="hs-identifier hs-type">convertClause</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Features.html#Clause"><span class="hs-identifier hs-type">F.Clause</span></a></span><span>
</span><span id="line-534"></span><span id="convertClause"><span class="annot"><span class="annottext">convertClause :: Clause -&gt; Clause
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#convertClause"><span class="hs-identifier hs-var hs-var">convertClause</span></a></span></span><span> </span><span id="local-6989586621679667097"><span class="annot"><span class="annottext">clause :: Clause
</span><a href="#local-6989586621679667097"><span class="hs-identifier hs-var">clause</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-535"></span><span>    </span><span class="annot"><span class="annottext">$WClause :: Reference -&gt; Text -&gt; Bool -&gt; Op -&gt; [Value] -&gt; Clause
</span><a href="LaunchDarkly.Server.Features.html#%24WClause"><span class="hs-identifier hs-type hs-type">F.Clause</span></a></span><span>
</span><span id="line-536"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:attribute:Clause :: Reference
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3Aattribute%3AClause"><span class="hs-identifier hs-var">F.attribute</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Reference
</span><a href="LaunchDarkly.Server.Reference.html#makeReference"><span class="hs-identifier hs-var">makeReference</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Reference) -&gt; Text -&gt; Reference
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Text
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AclauseAttribute%3AClause"><span class="hs-identifier hs-var hs-var">clauseAttribute</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621679667097"><span class="hs-identifier hs-var">clause</span></a></span><span>
</span><span id="line-537"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:contextKind:Clause :: Text
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3AcontextKind%3AClause"><span class="hs-identifier hs-var">F.contextKind</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Text
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AcontextKind%3AClause"><span class="hs-identifier hs-var hs-var">contextKind</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621679667097"><span class="hs-identifier hs-var">clause</span></a></span><span>
</span><span id="line-538"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:negate:Clause :: Bool
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3Anegate%3AClause"><span class="hs-identifier hs-var">F.negate</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Bool
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AclauseNegate%3AClause"><span class="hs-identifier hs-var hs-var">clauseNegate</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621679667097"><span class="hs-identifier hs-var">clause</span></a></span><span>
</span><span id="line-539"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:values:Clause :: [Value]
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3Avalues%3AClause"><span class="hs-identifier hs-var">F.values</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; [Value]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AclauseValues%3AClause"><span class="hs-identifier hs-var hs-var">clauseValues</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621679667097"><span class="hs-identifier hs-var">clause</span></a></span><span>
</span><span id="line-540"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:op:Clause :: Op
</span><a href="LaunchDarkly.Server.Features.html#%24sel%3Aop%3AClause"><span class="hs-identifier hs-var">F.op</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Op
</span><a href="LaunchDarkly.Server.Operators.html#OpIn"><span class="hs-identifier hs-var">Op.OpIn</span></a></span><span>
</span><span id="line-541"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-542"></span><span>
</span><span id="line-543"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-544"></span><span class="hs-comment">-- A builder for feature flag rules to be used with 'FlagBuilder'.</span><span>
</span><span id="line-545"></span><span class="hs-comment">--</span><span>
</span><span id="line-546"></span><span class="hs-comment">-- In the LaunchDarkly model, a flag can have any number of rules, and a rule</span><span>
</span><span id="line-547"></span><span class="hs-comment">-- can have any number of clauses. A clause is an individual test such as</span><span>
</span><span id="line-548"></span><span class="hs-comment">-- \&quot;name is \'X\'\&quot;. A rule matches a context if all of the rule's clauses</span><span>
</span><span id="line-549"></span><span class="hs-comment">-- match the context.</span><span>
</span><span id="line-550"></span><span class="hs-comment">--</span><span>
</span><span id="line-551"></span><span class="hs-comment">-- To start defining a rule, use one of the matching functions such as</span><span>
</span><span id="line-552"></span><span class="hs-comment">-- 'ifMatch' or 'ifNotMatch'. This defines the first clause for the rule.</span><span>
</span><span id="line-553"></span><span class="hs-comment">--</span><span>
</span><span id="line-554"></span><span class="hs-comment">-- Optionally, you may add more clauses with the rule builder functions such as</span><span>
</span><span id="line-555"></span><span class="hs-comment">-- 'andMatch' and 'andNotMatch'.</span><span>
</span><span id="line-556"></span><span class="hs-comment">--</span><span>
</span><span id="line-557"></span><span class="hs-comment">-- Finally, call 'thenReturn' to finish defining the rule.</span><span>
</span><span id="line-558"></span><span class="hs-keyword">data</span><span> </span><span id="FlagRuleBuilder"><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagRuleBuilder"><span class="hs-identifier hs-var">FlagRuleBuilder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="FlagRuleBuilder"><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagRuleBuilder"><span class="hs-identifier hs-var">FlagRuleBuilder</span></a></span></span><span>
</span><span id="line-559"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AfrbClauses%3AFlagRuleBuilder"><span class="annot"><span class="annottext">FlagRuleBuilder -&gt; [Clause]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfrbClauses%3AFlagRuleBuilder"><span class="hs-identifier hs-var hs-var">frbClauses</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-560"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AfrbBaseBuilder%3AFlagRuleBuilder"><span class="annot"><span class="annottext">FlagRuleBuilder -&gt; FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfrbBaseBuilder%3AFlagRuleBuilder"><span class="hs-identifier hs-var hs-var">frbBaseBuilder</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span>
</span><span id="line-561"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-562"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679667082"><span id="local-6989586621679667084"><span id="local-6989586621679667086"><span class="annot"><span class="annottext">Int -&gt; FlagRuleBuilder -&gt; ShowS
[FlagRuleBuilder] -&gt; ShowS
FlagRuleBuilder -&gt; String
(Int -&gt; FlagRuleBuilder -&gt; ShowS)
-&gt; (FlagRuleBuilder -&gt; String)
-&gt; ([FlagRuleBuilder] -&gt; ShowS)
-&gt; Show FlagRuleBuilder
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [FlagRuleBuilder] -&gt; ShowS
$cshowList :: [FlagRuleBuilder] -&gt; ShowS
show :: FlagRuleBuilder -&gt; String
$cshow :: FlagRuleBuilder -&gt; String
showsPrec :: Int -&gt; FlagRuleBuilder -&gt; ShowS
$cshowsPrec :: Int -&gt; FlagRuleBuilder -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-563"></span><span>
</span><span id="line-564"></span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#newFlagRuleBuilder"><span class="hs-identifier hs-type">newFlagRuleBuilder</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder"><span class="hs-identifier hs-type">FlagBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagRuleBuilder"><span class="hs-identifier hs-type">FlagRuleBuilder</span></a></span><span>
</span><span id="line-565"></span><span id="newFlagRuleBuilder"><span class="annot"><span class="annottext">newFlagRuleBuilder :: FlagBuilder -&gt; FlagRuleBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#newFlagRuleBuilder"><span class="hs-identifier hs-var hs-var">newFlagRuleBuilder</span></a></span></span><span> </span><span id="local-6989586621679667081"><span class="annot"><span class="annottext">baseBuilder :: FlagBuilder
</span><a href="#local-6989586621679667081"><span class="hs-identifier hs-var">baseBuilder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-566"></span><span>    </span><span class="annot"><span class="annottext">FlagRuleBuilder :: [Clause] -&gt; FlagBuilder -&gt; FlagRuleBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagRuleBuilder"><span class="hs-identifier hs-type hs-type">FlagRuleBuilder</span></a></span><span>
</span><span id="line-567"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:frbClauses:FlagRuleBuilder :: [Clause]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfrbClauses%3AFlagRuleBuilder"><span class="hs-identifier hs-var">frbClauses</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Clause]
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-568"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:frbBaseBuilder:FlagRuleBuilder :: FlagBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfrbBaseBuilder%3AFlagRuleBuilder"><span class="hs-identifier hs-var">frbBaseBuilder</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FlagBuilder
</span><a href="#local-6989586621679667081"><span class="hs-identifier hs-var">baseBuilder</span></a></span><span>
</span><span id="line-569"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-570"></span><span>
</span><span id="line-571"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-572"></span><span class="hs-comment">-- Adds another clause, using the &quot;is one of&quot; operator.</span><span>
</span><span id="line-573"></span><span class="hs-comment">--</span><span>
</span><span id="line-574"></span><span class="hs-comment">-- For example, this creates a rule that returns @True@ if the name is</span><span>
</span><span id="line-575"></span><span class="hs-comment">-- \&quot;Patsy\&quot; and the country is \&quot;gb\&quot;:</span><span>
</span><span id="line-576"></span><span class="hs-comment">--</span><span>
</span><span id="line-577"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-578"></span><span class="hs-comment">-- testData</span><span>
</span><span id="line-579"></span><span class="hs-comment">--     &amp; flag &quot;flag&quot;</span><span>
</span><span id="line-580"></span><span class="hs-comment">--     &amp; ifMatch &quot;name&quot; [toJSON \&quot;Patsy\&quot;]</span><span>
</span><span id="line-581"></span><span class="hs-comment">--     &amp; andMatch &quot;country&quot; [toJSON \&quot;gb\&quot;]</span><span>
</span><span id="line-582"></span><span class="hs-comment">--     &amp; thenReturn True</span><span>
</span><span id="line-583"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-584"></span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#andMatchContext"><span class="hs-identifier hs-type">andMatchContext</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-585"></span><span>    </span><span class="hs-comment">-- | the context kind to match again</span><span>
</span><span id="line-586"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-587"></span><span>    </span><span class="hs-comment">-- | the context attribute to match against</span><span>
</span><span id="line-588"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-589"></span><span>    </span><span class="hs-comment">-- | values to compare to</span><span>
</span><span id="line-590"></span><span>    </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-591"></span><span>    </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagRuleBuilder"><span class="hs-identifier hs-type">FlagRuleBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-592"></span><span>    </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagRuleBuilder"><span class="hs-identifier hs-type">FlagRuleBuilder</span></a></span><span>
</span><span id="line-593"></span><span id="andMatchContext"><span class="annot"><span class="annottext">andMatchContext :: Text -&gt; Text -&gt; [Value] -&gt; FlagRuleBuilder -&gt; FlagRuleBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#andMatchContext"><span class="hs-identifier hs-var hs-var">andMatchContext</span></a></span></span><span> </span><span id="local-6989586621679667079"><span class="annot"><span class="annottext">kind :: Text
</span><a href="#local-6989586621679667079"><span class="hs-identifier hs-var">kind</span></a></span></span><span> </span><span id="local-6989586621679667078"><span class="annot"><span class="annottext">attribute :: Text
</span><a href="#local-6989586621679667078"><span class="hs-identifier hs-var">attribute</span></a></span></span><span> </span><span id="local-6989586621679667077"><span class="annot"><span class="annottext">values :: [Value]
</span><a href="#local-6989586621679667077"><span class="hs-identifier hs-var">values</span></a></span></span><span> </span><span id="local-6989586621679667076"><span class="annot"><span class="annottext">ruleBuilder :: FlagRuleBuilder
</span><a href="#local-6989586621679667076"><span class="hs-identifier hs-var">ruleBuilder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-594"></span><span>    </span><span class="annot"><span class="annottext">FlagRuleBuilder
</span><a href="#local-6989586621679667076"><span class="hs-identifier hs-var">ruleBuilder</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:frbClauses:FlagRuleBuilder :: [Clause]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfrbClauses%3AFlagRuleBuilder"><span class="hs-identifier hs-var">frbClauses</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; [Value] -&gt; Bool -&gt; Clause
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#Clause"><span class="hs-identifier hs-var">Clause</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679667078"><span class="hs-identifier hs-var">attribute</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679667079"><span class="hs-identifier hs-var">kind</span></a></span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679667077"><span class="hs-identifier hs-var">values</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; [Clause] -&gt; [Clause]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">FlagRuleBuilder -&gt; [Clause]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfrbClauses%3AFlagRuleBuilder"><span class="hs-identifier hs-var hs-var">frbClauses</span></a></span><span> </span><span class="annot"><span class="annottext">FlagRuleBuilder
</span><a href="#local-6989586621679667076"><span class="hs-identifier hs-var">ruleBuilder</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-595"></span><span>
</span><span id="line-596"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">andMatch</span><span> </span><span class="hs-pragma">&quot;Use andMatchContext instead&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-597"></span><span>
</span><span id="line-598"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-599"></span><span class="hs-comment">-- Adds another clause, using the &quot;is one of&quot; operator.</span><span>
</span><span id="line-600"></span><span class="hs-comment">--</span><span>
</span><span id="line-601"></span><span class="hs-comment">-- This is a shortcut for calling 'andMatchContext' with a context kind of</span><span>
</span><span id="line-602"></span><span class="hs-comment">-- &quot;user&quot;.</span><span>
</span><span id="line-603"></span><span class="hs-comment">--</span><span>
</span><span id="line-604"></span><span class="hs-comment">-- For example, this creates a rule that returns @True@ if the name is</span><span>
</span><span id="line-605"></span><span class="hs-comment">-- \&quot;Patsy\&quot; and the country is \&quot;gb\&quot;:</span><span>
</span><span id="line-606"></span><span class="hs-comment">--</span><span>
</span><span id="line-607"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-608"></span><span class="hs-comment">-- testData</span><span>
</span><span id="line-609"></span><span class="hs-comment">--     &amp; flag &quot;flag&quot;</span><span>
</span><span id="line-610"></span><span class="hs-comment">--     &amp; ifMatch &quot;name&quot; [toJSON \&quot;Patsy\&quot;]</span><span>
</span><span id="line-611"></span><span class="hs-comment">--     &amp; andMatch &quot;country&quot; [toJSON \&quot;gb\&quot;]</span><span>
</span><span id="line-612"></span><span class="hs-comment">--     &amp; thenReturn True</span><span>
</span><span id="line-613"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-614"></span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#andMatch"><span class="hs-identifier hs-type">andMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-615"></span><span>    </span><span class="hs-comment">-- | the context attribute to match against</span><span>
</span><span id="line-616"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-617"></span><span>    </span><span class="hs-comment">-- | values to compare to</span><span>
</span><span id="line-618"></span><span>    </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-619"></span><span>    </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagRuleBuilder"><span class="hs-identifier hs-type">FlagRuleBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-620"></span><span>    </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagRuleBuilder"><span class="hs-identifier hs-type">FlagRuleBuilder</span></a></span><span>
</span><span id="line-621"></span><span id="andMatch"><span class="annot"><span class="annottext">andMatch :: Text -&gt; [Value] -&gt; FlagRuleBuilder -&gt; FlagRuleBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#andMatch"><span class="hs-identifier hs-var hs-var">andMatch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; [Value] -&gt; FlagRuleBuilder -&gt; FlagRuleBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#andMatchContext"><span class="hs-identifier hs-var">andMatchContext</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;user&quot;</span></span><span>
</span><span id="line-622"></span><span>
</span><span id="line-623"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-624"></span><span class="hs-comment">-- Adds another clause, using the &quot;is not one of&quot; operator.</span><span>
</span><span id="line-625"></span><span class="hs-comment">--</span><span>
</span><span id="line-626"></span><span class="hs-comment">-- For example, this creates a rule that returns @True@ if the name is</span><span>
</span><span id="line-627"></span><span class="hs-comment">-- \&quot;Patsy\&quot; and the country is not \&quot;gb\&quot;:</span><span>
</span><span id="line-628"></span><span class="hs-comment">--</span><span>
</span><span id="line-629"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-630"></span><span class="hs-comment">-- testData</span><span>
</span><span id="line-631"></span><span class="hs-comment">--     &amp; flag &quot;flag&quot;</span><span>
</span><span id="line-632"></span><span class="hs-comment">--     &amp; ifMatchContext &quot;user&quot; &quot;name&quot; [toJSON \&quot;Patsy\&quot;]</span><span>
</span><span id="line-633"></span><span class="hs-comment">--     &amp; andNotMatchContext &quot;user&quot; &quot;country&quot; [toJSON \&quot;gb\&quot;]</span><span>
</span><span id="line-634"></span><span class="hs-comment">--     &amp; thenReturn True</span><span>
</span><span id="line-635"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-636"></span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#andNotMatchContext"><span class="hs-identifier hs-type">andNotMatchContext</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-637"></span><span>    </span><span class="hs-comment">-- | the context kind to match against</span><span>
</span><span id="line-638"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-639"></span><span>    </span><span class="hs-comment">-- | the context attribute to match against</span><span>
</span><span id="line-640"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-641"></span><span>    </span><span class="hs-comment">-- | values to compare to</span><span>
</span><span id="line-642"></span><span>    </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-643"></span><span>    </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagRuleBuilder"><span class="hs-identifier hs-type">FlagRuleBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-644"></span><span>    </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagRuleBuilder"><span class="hs-identifier hs-type">FlagRuleBuilder</span></a></span><span>
</span><span id="line-645"></span><span id="andNotMatchContext"><span class="annot"><span class="annottext">andNotMatchContext :: Text -&gt; Text -&gt; [Value] -&gt; FlagRuleBuilder -&gt; FlagRuleBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#andNotMatchContext"><span class="hs-identifier hs-var hs-var">andNotMatchContext</span></a></span></span><span> </span><span id="local-6989586621679667075"><span class="annot"><span class="annottext">kind :: Text
</span><a href="#local-6989586621679667075"><span class="hs-identifier hs-var">kind</span></a></span></span><span> </span><span id="local-6989586621679667074"><span class="annot"><span class="annottext">attribute :: Text
</span><a href="#local-6989586621679667074"><span class="hs-identifier hs-var">attribute</span></a></span></span><span> </span><span id="local-6989586621679667073"><span class="annot"><span class="annottext">values :: [Value]
</span><a href="#local-6989586621679667073"><span class="hs-identifier hs-var">values</span></a></span></span><span> </span><span id="local-6989586621679667072"><span class="annot"><span class="annottext">ruleBuilder :: FlagRuleBuilder
</span><a href="#local-6989586621679667072"><span class="hs-identifier hs-var">ruleBuilder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-646"></span><span>    </span><span class="annot"><span class="annottext">FlagRuleBuilder
</span><a href="#local-6989586621679667072"><span class="hs-identifier hs-var">ruleBuilder</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:frbClauses:FlagRuleBuilder :: [Clause]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfrbClauses%3AFlagRuleBuilder"><span class="hs-identifier hs-var">frbClauses</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; [Value] -&gt; Bool -&gt; Clause
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#Clause"><span class="hs-identifier hs-var">Clause</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679667074"><span class="hs-identifier hs-var">attribute</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679667075"><span class="hs-identifier hs-var">kind</span></a></span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679667073"><span class="hs-identifier hs-var">values</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; [Clause] -&gt; [Clause]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">FlagRuleBuilder -&gt; [Clause]
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#%24sel%3AfrbClauses%3AFlagRuleBuilder"><span class="hs-identifier hs-var hs-var">frbClauses</span></a></span><span> </span><span class="annot"><span class="annottext">FlagRuleBuilder
</span><a href="#local-6989586621679667072"><span class="hs-identifier hs-var">ruleBuilder</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-647"></span><span>
</span><span id="line-648"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">andNotMatch</span><span> </span><span class="hs-pragma">&quot;Use andNotMatchContext instead&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-649"></span><span>
</span><span id="line-650"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-651"></span><span class="hs-comment">-- Adds another clause, using the &quot;is not one of&quot; operator.</span><span>
</span><span id="line-652"></span><span class="hs-comment">--</span><span>
</span><span id="line-653"></span><span class="hs-comment">-- This is a shortcut for calling 'andNotMatchContext' with a context kind of</span><span>
</span><span id="line-654"></span><span class="hs-comment">-- &quot;user&quot;.</span><span>
</span><span id="line-655"></span><span class="hs-comment">--</span><span>
</span><span id="line-656"></span><span class="hs-comment">-- For example, this creates a rule that returns @True@ if the name is</span><span>
</span><span id="line-657"></span><span class="hs-comment">-- \&quot;Patsy\&quot; and the country is not \&quot;gb\&quot;:</span><span>
</span><span id="line-658"></span><span class="hs-comment">--</span><span>
</span><span id="line-659"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-660"></span><span class="hs-comment">-- testData</span><span>
</span><span id="line-661"></span><span class="hs-comment">--     &amp; flag &quot;flag&quot;</span><span>
</span><span id="line-662"></span><span class="hs-comment">--     &amp; ifMatch &quot;name&quot; [toJSON \&quot;Patsy\&quot;]</span><span>
</span><span id="line-663"></span><span class="hs-comment">--     &amp; andNotMatch &quot;country&quot; [toJSON \&quot;gb\&quot;]</span><span>
</span><span id="line-664"></span><span class="hs-comment">--     &amp; thenReturn True</span><span>
</span><span id="line-665"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-666"></span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#andNotMatch"><span class="hs-identifier hs-type">andNotMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-667"></span><span>    </span><span class="hs-comment">-- | the context attribute to match against</span><span>
</span><span id="line-668"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-669"></span><span>    </span><span class="hs-comment">-- | values to compare to</span><span>
</span><span id="line-670"></span><span>    </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-671"></span><span>    </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagRuleBuilder"><span class="hs-identifier hs-type">FlagRuleBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-672"></span><span>    </span><span class="annot"><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagRuleBuilder"><span class="hs-identifier hs-type">FlagRuleBuilder</span></a></span><span>
</span><span id="line-673"></span><span id="andNotMatch"><span class="annot"><span class="annottext">andNotMatch :: Text -&gt; [Value] -&gt; FlagRuleBuilder -&gt; FlagRuleBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#andNotMatch"><span class="hs-identifier hs-var hs-var">andNotMatch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; [Value] -&gt; FlagRuleBuilder -&gt; FlagRuleBuilder
</span><a href="LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#andNotMatchContext"><span class="hs-identifier hs-var">andNotMatchContext</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;user&quot;</span></span><span>
</span><span id="line-674"></span><span>
</span><span id="line-675"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">variationForAllUsers</span><span> </span><span class="hs-pragma">&quot;Use variationForAll instead&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-676"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">variationForUser</span><span> </span><span class="hs-pragma">&quot;Use variationForKey instead&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-677"></span></pre></body></html>
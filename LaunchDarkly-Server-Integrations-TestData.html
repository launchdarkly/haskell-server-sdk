<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>LaunchDarkly.Server.Integrations.TestData</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">launchdarkly-server-sdk-4.2.0: Server-side SDK for integrating with LaunchDarkly</span><ul class="links" id="page-menu"><li><a href="src/LaunchDarkly.Server.Integrations.TestData.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">LaunchDarkly.Server.Integrations.TestData</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">FlagBuilder</a></li><li><a href="#g:2">FlagRuleBuilder</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A mechanism for providing dynamically updatable feature flag state in a
 simplified form to an SDK client in test scenarios.</p><p>Unlike <a href="LaunchDarkly-Server-Integrations-FileData.html">LaunchDarkly.Server.Integrations.FileData</a>, this mechanism does not
 use any external resources. It provides only the data that the application
 has put into it using the <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:update" title="LaunchDarkly.Server.Integrations.TestData">update</a></code> function.</p><pre>td &lt;- TestData.newTestData
update td =&lt;&lt; (flag td &quot;flag-key-1&quot;
                &lt;&amp;&gt; booleanFlag
                &lt;&amp;&gt; variationForAll True)

let config = makeConfig &quot;sdkKey&quot;
                &amp; configSetDataSourceFactory (dataSourceFactory td)
client &lt;- makeClient config

-- flags can be updated at any time:
update td =&lt;&lt;
   (flag td &quot;flag-key-2&quot;
         &lt;&amp;&gt; variationForKey &quot;user&quot; &quot;some-user-key&quot; True
         &lt;&amp;&gt; fallthroughVariation False)
</pre><p>The above example uses a simple boolean flag, but more complex
 configurations are possible using the methods of the <code><a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></code> that is
 returned by <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:flag" title="LaunchDarkly.Server.Integrations.TestData">flag</a></code>. <code><a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></code> supports many of the ways a flag can be
 configured on the LaunchDarkly dashboard, but does not currently support:</p><ol><li>Rule operators other than &quot;in&quot; and &quot;not in&quot;</li><li>Percentage rollouts.</li></ol><p>If the same <code><a href="LaunchDarkly-Server-Integrations-TestData.html#t:TestData" title="LaunchDarkly.Server.Integrations.TestData">TestData</a></code> instance is used to configure multiple
 <code><a href="LaunchDarkly-Server-Client.html#v:Client" title="LaunchDarkly.Server.Client">Client</a></code> instances, any changes made to the data
 will propagate to all of the <code>Client</code>s.</p><p>see <a href="LaunchDarkly-Server-Integrations-FileData.html">LaunchDarkly.Server.Integrations.FileData</a></p><p><em>Since: 2.2.1</em></p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:TestData">TestData</a></li><li class="src short"><a href="#v:newTestData">newTestData</a> :: <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="LaunchDarkly-Server-Integrations-TestData.html#t:TestData" title="LaunchDarkly.Server.Integrations.TestData">TestData</a></li><li class="src short"><a href="#v:flag">flag</a> :: <a href="LaunchDarkly-Server-Integrations-TestData.html#t:TestData" title="LaunchDarkly.Server.Integrations.TestData">TestData</a> -&gt; <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></li><li class="src short"><a href="#v:update">update</a> :: <a href="LaunchDarkly-Server-Integrations-TestData.html#t:TestData" title="LaunchDarkly.Server.Integrations.TestData">TestData</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a> -&gt; <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li class="src short"><a href="#v:dataSourceFactory">dataSourceFactory</a> :: <a href="LaunchDarkly-Server-Integrations-TestData.html#t:TestData" title="LaunchDarkly.Server.Integrations.TestData">TestData</a> -&gt; DataSourceFactory</li><li class="src short"><span class="keyword">data</span> <a href="#t:FlagBuilder">FlagBuilder</a></li><li class="src short"><a href="#v:booleanFlag">booleanFlag</a> :: <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></li><li class="src short"><a href="#v:on">on</a> :: <a href="../base-4.13.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></li><li class="src short"><a href="#v:fallthroughVariation">fallthroughVariation</a> :: Variation val =&gt; val -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></li><li class="src short"><a href="#v:offVariation">offVariation</a> :: Variation val =&gt; val -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></li><li class="src short"><a href="#v:variationForAll">variationForAll</a> :: Variation val =&gt; val -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></li><li class="src short"><a href="#v:variationForAllUsers">variationForAllUsers</a> :: Variation val =&gt; val -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></li><li class="src short"><a href="#v:valueForAll">valueForAll</a> :: <a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> value =&gt; value -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></li><li class="src short"><a href="#v:valueForAllUsers">valueForAllUsers</a> :: <a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> value =&gt; value -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></li><li class="src short"><a href="#v:variationForKey">variationForKey</a> :: Variation val =&gt; <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; val -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></li><li class="src short"><a href="#v:variationForUser">variationForUser</a> :: Variation val =&gt; <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; val -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></li><li class="src short"><a href="#v:variations">variations</a> :: [<a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a>] -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></li><li class="src short"><a href="#v:ifMatch">ifMatch</a> :: <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; [<a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a>] -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a></li><li class="src short"><a href="#v:ifMatchContext">ifMatchContext</a> :: <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; [<a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a>] -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a></li><li class="src short"><a href="#v:ifNotMatch">ifNotMatch</a> :: <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; [<a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a>] -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a></li><li class="src short"><a href="#v:ifNotMatchContext">ifNotMatchContext</a> :: <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; [<a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a>] -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:VariationIndex">VariationIndex</a> = <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:FlagRuleBuilder">FlagRuleBuilder</a></li><li class="src short"><a href="#v:andMatch">andMatch</a> :: <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; [<a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a>] -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a></li><li class="src short"><a href="#v:andMatchContext">andMatchContext</a> :: <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; [<a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a>] -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a></li><li class="src short"><a href="#v:andNotMatch">andNotMatch</a> :: <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; [<a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a>] -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a></li><li class="src short"><a href="#v:andNotMatchContext">andNotMatchContext</a> :: <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; [<a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a>] -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a></li><li class="src short"><a href="#v:thenReturn">thenReturn</a> :: Variation val =&gt; val -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TestData" class="def">TestData</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.html#TestData" class="link">Source</a> <a href="#t:TestData" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:newTestData" class="def">newTestData</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.html#newTestData" class="link">Source</a> <a href="#v:newTestData" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="LaunchDarkly-Server-Integrations-TestData.html#t:TestData" title="LaunchDarkly.Server.Integrations.TestData">TestData</a></td><td class="doc"><p>a new configurable test data source</p></td></tr></table></div><div class="doc"><p>Creates a new instance of the test data source.</p></div></div><div class="top"><p class="src"><a id="v:flag" class="def">flag</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.html#flag" class="link">Source</a> <a href="#v:flag" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="LaunchDarkly-Server-Integrations-TestData.html#t:TestData" title="LaunchDarkly.Server.Integrations.TestData">TestData</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a></td><td class="doc"><p>the flag key</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></td><td class="doc"><p>a flag configuration builder</p></td></tr></table></div><div class="doc"><p>Creates or copies a <code><a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></code> for building a test flag configuration.</p><p>If this flag key has already been defined in this <code><a href="LaunchDarkly-Server-Integrations-TestData.html#t:TestData" title="LaunchDarkly.Server.Integrations.TestData">TestData</a></code> instance, then
  the builder starts with the same configuration that was last provided for
  this flag.</p><p>Otherwise, it starts with a new default configuration in which the flag has
  <code>True</code> and <code>False</code> variations, is <code>True</code> for all users when targeting is
  turned on and <code>False</code> otherwise, and currently has targeting turned on. You
  can change any of those properties, and provide more complex behavior,
  using the <code><a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></code> methods.</p><p>Once you have set the desired configuration, pass the builder to <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:update" title="LaunchDarkly.Server.Integrations.TestData">update</a></code>.</p><p>see <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:update" title="LaunchDarkly.Server.Integrations.TestData">update</a></code></p></div></div><div class="top"><p class="src"><a id="v:update" class="def">update</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.html#update" class="link">Source</a> <a href="#v:update" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="LaunchDarkly-Server-Integrations-TestData.html#t:TestData" title="LaunchDarkly.Server.Integrations.TestData">TestData</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></td><td class="doc"><p>a flag configuration builder</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Updates the test data with the specified flag configuration.</p><p>This has the same effect as if a flag were added or modified on the
  LaunchDarkly dashboard. It immediately propagates the flag change to any
  <code><a href="LaunchDarkly-Server-Client.html#v:Client" title="LaunchDarkly.Server.Client">Client</a></code> instance(s) that you have already
  configured to use this <code><a href="LaunchDarkly-Server-Integrations-TestData.html#t:TestData" title="LaunchDarkly.Server.Integrations.TestData">TestData</a></code>. If no <code>Client</code> has been started yet, it
  simply adds this flag to the test data which will be provided to any
  <code>Client</code> that you subsequently configure.</p><p>Any subsequent changes to this <code><a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></code> instance do not affect the
  test data, unless you call <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:update" title="LaunchDarkly.Server.Integrations.TestData">update</a></code></p><p>see <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:flag" title="LaunchDarkly.Server.Integrations.TestData">flag</a></code></p></div></div><div class="top"><p class="src"><a id="v:dataSourceFactory" class="def">dataSourceFactory</a> :: <a href="LaunchDarkly-Server-Integrations-TestData.html#t:TestData" title="LaunchDarkly.Server.Integrations.TestData">TestData</a> -&gt; DataSourceFactory <a href="src/LaunchDarkly.Server.Integrations.TestData.html#dataSourceFactory" class="link">Source</a> <a href="#v:dataSourceFactory" class="selflink">#</a></p></div><a href="#g:1" id="g:1"><h1>FlagBuilder</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:FlagBuilder" class="def">FlagBuilder</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagBuilder" class="link">Source</a> <a href="#t:FlagBuilder" class="selflink">#</a></p><div class="doc"><p>A builder for feature flag configurations to be used with
 <a href="LaunchDarkly-Server-Integrations-TestData.html">LaunchDarkly.Server.Integrations.TestData</a>.</p><p>see <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:flag" title="LaunchDarkly.Server.Integrations.TestData">flag</a></code> and
 <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:update" title="LaunchDarkly.Server.Integrations.TestData">update</a></code></p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:FlagBuilder">Instances</h4><details id="i:FlagBuilder" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FlagBuilder:Show:1"></span> <a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></span> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#line-71" class="link">Source</a> <a href="#t:FlagBuilder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FlagBuilder:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="LaunchDarkly-Server-Integrations-TestData-FlagBuilder.html">LaunchDarkly.Server.Integrations.TestData.FlagBuilder</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a> -&gt; <a href="../base-4.13.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a> -&gt; <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a>] -&gt; <a href="../base-4.13.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:booleanFlag" class="def">booleanFlag</a> :: <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#booleanFlag" class="link">Source</a> <a href="#v:booleanFlag" class="selflink">#</a></p><div class="doc"><p>A shortcut for setting the flag to use the standard boolean configuration.</p><p>This is the default for all new flags created with
 <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:flag" title="LaunchDarkly.Server.Integrations.TestData">flag</a></code>. The flag will have two
 variations, <code>True</code> and <code>False</code> (in that order); it will return <code>False</code>
 whenever targeting is off, and <code>True</code> when targeting is on if no other
 settings specify otherwise.</p></div></div><div class="top"><p class="src"><a id="v:on" class="def">on</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#on" class="link">Source</a> <a href="#v:on" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.13.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></td><td class="doc"><p>isOn <code>True</code> if targeting should be on</p></td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Sets targeting to be on or off for this flag.</p><p>The effect of this depends on the rest of the flag configuration, just as it
 does on the real LaunchDarkly dashboard. In the default configuration that
 you get from calling <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:flag" title="LaunchDarkly.Server.Integrations.TestData">flag</a></code> with a
 new flag key, the flag will return <code>False</code> whenever targeting is off, and
 <code>True</code> when targeting is on.</p></div></div><div class="top"><p class="src"><a id="v:fallthroughVariation" class="def">fallthroughVariation</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#fallthroughVariation" class="link">Source</a> <a href="#v:fallthroughVariation" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Variation val</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; val</td><td class="doc"><p><code>True</code> or <code>False</code> or the desired fallthrough variation index: 0 for the first, 1 for the second, etc.</p></td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Specifies the fallthrough variation. The fallthrough is the value that
 is returned if targeting is on and the context was not matched by a more
 specific target or rule.</p><p>If the flag was previously configured with other variations and the
 variation specified is a boolean, this also changes it to a boolean
 flag.</p></div></div><div class="top"><p class="src"><a id="v:offVariation" class="def">offVariation</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#offVariation" class="link">Source</a> <a href="#v:offVariation" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Variation val</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; val</td><td class="doc"><p><code>True</code> or <code>False</code> or the desired fallthrough variation index: 0 for the first, 1 for the second, etc.</p></td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Specifies the off variation for a flag. This is the variation that is
 returned whenever targeting is off.</p><p>If the flag was previously configured with other variations and the
 variation specified is a boolean, this also changes it to a boolean
 flag.</p></div></div><div class="top"><p class="src"><a id="v:variationForAll" class="def">variationForAll</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForAll" class="link">Source</a> <a href="#v:variationForAll" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Variation val</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; val</td><td class="doc"><p><code>True</code> or <code>False</code> or the desired fallthrough variation index: 0 for the first, 1 for the second, etc.</p></td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Sets the flag to always return the specified variation for all contexts.</p><p>The variation is specified, Targeting is switched on, and any existing
 targets or rules are removed. The fallthrough variation is set to the
 specified value. The off variation is left unchanged.</p><p>If the flag was previously configured with other variations and the
 variation specified is a boolean, this also changes it to a boolean
 flag.</p></div></div><div class="top"><p class="src"><a id="v:variationForAllUsers" class="def">variationForAllUsers</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForAllUsers" class="link">Source</a> <a href="#v:variationForAllUsers" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Variation val</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; val</td><td class="doc"><p><code>True</code> or <code>False</code> or the desired fallthrough variation index: 0 for the first, 1 for the second, etc.</p></td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><div class="warning"><p>Deprecated: Use variationForAll instead</p></div><p>Sets the flag to always return the specified variation for all users.</p><p>The variation is specified, Targeting is switched on, and any existing
 targets or rules are removed. The fallthrough variation is set to the
 specified value. The off variation is left unchanged.</p><p>If the flag was previously configured with other variations and the
 variation specified is a boolean, this also changes it to a boolean
 flag.</p></div></div><div class="top"><p class="src"><a id="v:valueForAll" class="def">valueForAll</a> :: <a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> value =&gt; value -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#valueForAll" class="link">Source</a> <a href="#v:valueForAll" class="selflink">#</a></p><div class="doc"><p>Sets the flag to always return the specified variation value for all
 contexts.</p><p>The value may be of any type that implements <code><a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a></code>. This method
 changes the flag to have only a single variation, which is this value, and
 to return the same variation regardless of whether targeting is on or off.
 Any existing targets or rules are removed.</p></div></div><div class="top"><p class="src"><a id="v:valueForAllUsers" class="def">valueForAllUsers</a> :: <a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> value =&gt; value -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#valueForAllUsers" class="link">Source</a> <a href="#v:valueForAllUsers" class="selflink">#</a></p><div class="doc"><div class="warning"><p>Deprecated: Use valueForAll instead</p></div><p>Sets the flag to always return the specified variation value for all users.</p><p>This function is an alias to <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:valueForAll" title="LaunchDarkly.Server.Integrations.TestData">valueForAll</a></code>.</p><p>The value may be of any type that implements <code><a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a></code>. This method
 changes the flag to have only a single variation, which is this value, and
 to return the same variation regardless of whether targeting is on or off.
 Any existing targets or rules are removed.</p></div></div><div class="top"><p class="src"><a id="v:variationForKey" class="def">variationForKey</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForKey" class="link">Source</a> <a href="#v:variationForKey" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Variation val</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a></td><td class="doc"><p>The context kind to match against</p></td></tr><tr><td class="src">-&gt; <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a></td><td class="doc"><p>a key to target</p></td></tr><tr><td class="src">-&gt; val</td><td class="doc"><p><code>True</code> or <code>False</code> or the desired fallthrough variation index: 0 for the first, 1 for the second, etc.</p></td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Sets the flag to return the specified variation for a specific context
 kind and key when targeting is on.</p><p>This has no effect when targeting is turned off for the flag.</p><p>If the flag was previously configured with other variations and the
 variation specified is a boolean, this also changes it to a boolean
 flag.</p></div></div><div class="top"><p class="src"><a id="v:variationForUser" class="def">variationForUser</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variationForUser" class="link">Source</a> <a href="#v:variationForUser" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Variation val</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a></td><td class="doc"><p>a user key to target</p></td></tr><tr><td class="src">-&gt; val</td><td class="doc"><p><code>True</code> or <code>False</code> or the desired fallthrough variation index: 0 for the first, 1 for the second, etc.</p></td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><div class="warning"><p>Deprecated: Use variationForKey instead</p></div><p>Sets the flag to return the specified variation for a specific user key
 when targeting is on.</p><p>This has no effect when targeting is turned off for the flag.</p><p>If the flag was previously configured with other variations and the
 variation specified is a boolean, this also changes it to a boolean
 flag.</p></div></div><div class="top"><p class="src"><a id="v:variations" class="def">variations</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#variations" class="link">Source</a> <a href="#v:variations" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: [<a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a>]</td><td class="doc"><p>the desired variations</p></td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Changes the allowable variation values for the flag.</p><p>The value may be of any JSON type, as defined by <code><a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a></code>. For
 instance, a boolean flag normally has [toJSON True, toJSON False]; a
 string-valued flag might have [toJSON &quot;red&quot;, toJSON &quot;green&quot;]; etc.</p></div></div><div class="top"><p class="src"><a id="v:ifMatch" class="def">ifMatch</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#ifMatch" class="link">Source</a> <a href="#v:ifMatch" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a></td><td class="doc"><p>the context attribute to match against</p></td></tr><tr><td class="src">-&gt; [<a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a>]</td><td class="doc"><p>values to compare to</p></td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a></td><td class="doc"><p>call <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:thenReturn" title="LaunchDarkly.Server.Integrations.TestData">thenReturn</a></code> to finish the rule, or add more tests with <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:andMatch" title="LaunchDarkly.Server.Integrations.TestData">andMatch</a></code> or <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:andNotMatch" title="LaunchDarkly.Server.Integrations.TestData">andNotMatch</a></code></p></td></tr></table></div><div class="doc"><div class="warning"><p>Deprecated: Use ifMatchContext instead</p></div><p>Starts defining a flag rule, using the &quot;is one of&quot; operator.</p><p>This is a shortcut for calling <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:ifMatch" title="LaunchDarkly.Server.Integrations.TestData">ifMatch</a></code> with a context kind of &quot;user&quot;.</p><p>For example, this creates a rule that returns <code>True</code> if the name is
 &quot;Patsy&quot; or &quot;Edina&quot;:</p><pre>testData
    &amp; flag &quot;flag&quot;
    &amp; ifMatch &quot;name&quot; [toJSON &quot;Patsy&quot;, toJSON &quot;Edina&quot;]
    &amp; thenReturn True
</pre></div></div><div class="top"><p class="src"><a id="v:ifMatchContext" class="def">ifMatchContext</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#ifMatchContext" class="link">Source</a> <a href="#v:ifMatchContext" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a></td><td class="doc"><p>the context kind to match again</p></td></tr><tr><td class="src">-&gt; <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a></td><td class="doc"><p>the context attribute to match against</p></td></tr><tr><td class="src">-&gt; [<a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a>]</td><td class="doc"><p>values to compare to</p></td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a></td><td class="doc"><p>call <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:thenReturn" title="LaunchDarkly.Server.Integrations.TestData">thenReturn</a></code> to finish the rule, or add more tests with <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:andMatch" title="LaunchDarkly.Server.Integrations.TestData">andMatch</a></code> or <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:andNotMatch" title="LaunchDarkly.Server.Integrations.TestData">andNotMatch</a></code></p></td></tr></table></div><div class="doc"><p>Starts defining a flag rule, using the &quot;is one of&quot; operator.</p><p>For example, this creates a rule that returns <code>True</code> if the name is
 &quot;Patsy&quot; or &quot;Edina&quot;:</p><pre>testData
    &amp; flag &quot;flag&quot;
    &amp; ifMatchContext &quot;user&quot; &quot;name&quot; [toJSON &quot;Patsy&quot;, toJSON &quot;Edina&quot;]
    &amp; thenReturn True
</pre></div></div><div class="top"><p class="src"><a id="v:ifNotMatch" class="def">ifNotMatch</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#ifNotMatch" class="link">Source</a> <a href="#v:ifNotMatch" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a></td><td class="doc"><p>attribute to match against</p></td></tr><tr><td class="src">-&gt; [<a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a>]</td><td class="doc"><p>values to compare to</p></td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a></td><td class="doc"><p>call <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:thenReturn" title="LaunchDarkly.Server.Integrations.TestData">thenReturn</a></code> to finish the rule, or add more tests with <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:andMatch" title="LaunchDarkly.Server.Integrations.TestData">andMatch</a></code> or <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:andNotMatch" title="LaunchDarkly.Server.Integrations.TestData">andNotMatch</a></code></p></td></tr></table></div><div class="doc"><div class="warning"><p>Deprecated: Use ifNotMatchContext instead</p></div><p>Starts defining a flag rule, using the &quot;is not one of&quot; operator.</p><p>This is a shortcut for calling <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:ifNotMatchContext" title="LaunchDarkly.Server.Integrations.TestData">ifNotMatchContext</a></code> with a context kind of
 &quot;user&quot;.</p><p>For example, this creates a rule that returns <code>True</code> if the name is neither
 &quot;Saffron&quot; nor &quot;Bubble&quot;</p><pre>testData
    &amp; flag &quot;flag&quot;
    &amp; ifNotMatch &quot;name&quot; [toJSON &quot;Saffron&quot;, toJSON &quot;Bubble&quot;]
    &amp; thenReturn True
</pre></div></div><div class="top"><p class="src"><a id="v:ifNotMatchContext" class="def">ifNotMatchContext</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#ifNotMatchContext" class="link">Source</a> <a href="#v:ifNotMatchContext" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a></td><td class="doc"><p>context kind to match again</p></td></tr><tr><td class="src">-&gt; <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a></td><td class="doc"><p>attribute to match against</p></td></tr><tr><td class="src">-&gt; [<a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a>]</td><td class="doc"><p>values to compare to</p></td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a></td><td class="doc"><p>call <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:thenReturn" title="LaunchDarkly.Server.Integrations.TestData">thenReturn</a></code> to finish the rule, or add more tests with <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:andMatch" title="LaunchDarkly.Server.Integrations.TestData">andMatch</a></code> or <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:andNotMatch" title="LaunchDarkly.Server.Integrations.TestData">andNotMatch</a></code></p></td></tr></table></div><div class="doc"><p>Starts defining a flag rule, using the &quot;is not one of&quot; operator.</p><p>For example, this creates a rule that returns <code>True</code> if the name is neither
 &quot;Saffron&quot; nor &quot;Bubble&quot;</p><pre>testData
    &amp; flag &quot;flag&quot;
    &amp; ifNotMatchContext &quot;user&quot; &quot;name&quot; [toJSON &quot;Saffron&quot;, toJSON &quot;Bubble&quot;]
    &amp; thenReturn True
</pre></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:VariationIndex" class="def">VariationIndex</a> = <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#VariationIndex" class="link">Source</a> <a href="#t:VariationIndex" class="selflink">#</a></p></div><a href="#g:2" id="g:2"><h1>FlagRuleBuilder</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:FlagRuleBuilder" class="def">FlagRuleBuilder</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#FlagRuleBuilder" class="link">Source</a> <a href="#t:FlagRuleBuilder" class="selflink">#</a></p><div class="doc"><p>A builder for feature flag rules to be used with <code><a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></code>.</p><p>In the LaunchDarkly model, a flag can have any number of rules, and a rule
 can have any number of clauses. A clause is an individual test such as
 &quot;name is 'X'&quot;. A rule matches a context if all of the rule's clauses
 match the context.</p><p>To start defining a rule, use one of the matching functions such as
 <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:ifMatch" title="LaunchDarkly.Server.Integrations.TestData">ifMatch</a></code> or <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:ifNotMatch" title="LaunchDarkly.Server.Integrations.TestData">ifNotMatch</a></code>. This defines the first clause for the rule.</p><p>Optionally, you may add more clauses with the rule builder functions such as
 <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:andMatch" title="LaunchDarkly.Server.Integrations.TestData">andMatch</a></code> and <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:andNotMatch" title="LaunchDarkly.Server.Integrations.TestData">andNotMatch</a></code>.</p><p>Finally, call <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:thenReturn" title="LaunchDarkly.Server.Integrations.TestData">thenReturn</a></code> to finish defining the rule.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:FlagRuleBuilder">Instances</h4><details id="i:FlagRuleBuilder" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FlagRuleBuilder:Show:1"></span> <a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a></span> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#line-562" class="link">Source</a> <a href="#t:FlagRuleBuilder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FlagRuleBuilder:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="LaunchDarkly-Server-Integrations-TestData-FlagBuilder.html">LaunchDarkly.Server.Integrations.TestData.FlagBuilder</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a> -&gt; <a href="../base-4.13.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a> -&gt; <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a>] -&gt; <a href="../base-4.13.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:andMatch" class="def">andMatch</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#andMatch" class="link">Source</a> <a href="#v:andMatch" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a></td><td class="doc"><p>the context attribute to match against</p></td></tr><tr><td class="src">-&gt; [<a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a>]</td><td class="doc"><p>values to compare to</p></td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><div class="warning"><p>Deprecated: Use andMatchContext instead</p></div><p>Adds another clause, using the &quot;is one of&quot; operator.</p><p>This is a shortcut for calling <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:andMatchContext" title="LaunchDarkly.Server.Integrations.TestData">andMatchContext</a></code> with a context kind of
 &quot;user&quot;.</p><p>For example, this creates a rule that returns <code>True</code> if the name is
 &quot;Patsy&quot; and the country is &quot;gb&quot;:</p><pre>testData
    &amp; flag &quot;flag&quot;
    &amp; ifMatch &quot;name&quot; [toJSON &quot;Patsy&quot;]
    &amp; andMatch &quot;country&quot; [toJSON &quot;gb&quot;]
    &amp; thenReturn True
</pre></div></div><div class="top"><p class="src"><a id="v:andMatchContext" class="def">andMatchContext</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#andMatchContext" class="link">Source</a> <a href="#v:andMatchContext" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a></td><td class="doc"><p>the context kind to match again</p></td></tr><tr><td class="src">-&gt; <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a></td><td class="doc"><p>the context attribute to match against</p></td></tr><tr><td class="src">-&gt; [<a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a>]</td><td class="doc"><p>values to compare to</p></td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Adds another clause, using the &quot;is one of&quot; operator.</p><p>For example, this creates a rule that returns <code>True</code> if the name is
 &quot;Patsy&quot; and the country is &quot;gb&quot;:</p><pre>testData
    &amp; flag &quot;flag&quot;
    &amp; ifMatch &quot;name&quot; [toJSON &quot;Patsy&quot;]
    &amp; andMatch &quot;country&quot; [toJSON &quot;gb&quot;]
    &amp; thenReturn True
</pre></div></div><div class="top"><p class="src"><a id="v:andNotMatch" class="def">andNotMatch</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#andNotMatch" class="link">Source</a> <a href="#v:andNotMatch" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a></td><td class="doc"><p>the context attribute to match against</p></td></tr><tr><td class="src">-&gt; [<a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a>]</td><td class="doc"><p>values to compare to</p></td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><div class="warning"><p>Deprecated: Use andNotMatchContext instead</p></div><p>Adds another clause, using the &quot;is not one of&quot; operator.</p><p>This is a shortcut for calling <code><a href="LaunchDarkly-Server-Integrations-TestData.html#v:andNotMatchContext" title="LaunchDarkly.Server.Integrations.TestData">andNotMatchContext</a></code> with a context kind of
 &quot;user&quot;.</p><p>For example, this creates a rule that returns <code>True</code> if the name is
 &quot;Patsy&quot; and the country is not &quot;gb&quot;:</p><pre>testData
    &amp; flag &quot;flag&quot;
    &amp; ifMatch &quot;name&quot; [toJSON &quot;Patsy&quot;]
    &amp; andNotMatch &quot;country&quot; [toJSON &quot;gb&quot;]
    &amp; thenReturn True
</pre></div></div><div class="top"><p class="src"><a id="v:andNotMatchContext" class="def">andNotMatchContext</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#andNotMatchContext" class="link">Source</a> <a href="#v:andNotMatchContext" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a></td><td class="doc"><p>the context kind to match against</p></td></tr><tr><td class="src">-&gt; <a href="../text-1.2.4.0/Data-Text.html#t:Text" title="Data.Text">Text</a></td><td class="doc"><p>the context attribute to match against</p></td></tr><tr><td class="src">-&gt; [<a href="../aeson-1.4.7.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a>]</td><td class="doc"><p>values to compare to</p></td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Adds another clause, using the &quot;is not one of&quot; operator.</p><p>For example, this creates a rule that returns <code>True</code> if the name is
 &quot;Patsy&quot; and the country is not &quot;gb&quot;:</p><pre>testData
    &amp; flag &quot;flag&quot;
    &amp; ifMatchContext &quot;user&quot; &quot;name&quot; [toJSON &quot;Patsy&quot;]
    &amp; andNotMatchContext &quot;user&quot; &quot;country&quot; [toJSON &quot;gb&quot;]
    &amp; thenReturn True
</pre></div></div><div class="top"><p class="src"><a id="v:thenReturn" class="def">thenReturn</a> <a href="src/LaunchDarkly.Server.Integrations.TestData.FlagBuilder.html#thenReturn" class="link">Source</a> <a href="#v:thenReturn" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Variation val</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; val</td><td class="doc"><p><code>True</code> or <code>False</code> or the desired fallthrough variation index: 0 for the first, 1 for the second, etc.</p></td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagRuleBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagRuleBuilder</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="LaunchDarkly-Server-Integrations-TestData.html#t:FlagBuilder" title="LaunchDarkly.Server.Integrations.TestData">FlagBuilder</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Finishes defining the rule, specifying the result as either a boolean or
 a variation index.</p><p>If the flag was previously configured with other variations and the
 variation specified is a boolean, this also changes it to a boolean
 flag.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.23.0</p></div></body></html>